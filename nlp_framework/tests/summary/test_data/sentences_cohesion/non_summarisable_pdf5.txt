
UCS & Data Center Virtualization

UCS - Unified Computing System

VOLUME 1
UCS Foundation

UCS Resources

UCSM 1.4 Features Update (Balboa)

April 2011



THE SPECIFICATIONS AND INFORMATION REGARDING THE PRODUCTS IN THIS MANUAL ARE SUBJECT TO 

CHANGE WITHOUT NOTICE. ALL STATEMENTS, INFORMATION, AND RECOMMENDATIONS IN THIS MANUAL 

ARE BELIEVED TO BE ACCURATE BUT ARE PRESENTED WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 

IMPLIED. USERS MUST TAKE FULL RESPONSIBILITY FOR THEIR APPLICATION OF ANY PRODUCTS. 

THE SOFTWARE LICENSE AND LIMITED WARRANTY FOR THE ACCOMPANYING PRODUCT ARE SET FORTH IN 

THE INFORMATION PACKET THAT SHIPPED WITH THE PRODUCT AND ARE INCORPORATED HEREIN BY THIS 

REFERENCE. IF YOU ARE UNABLE TO LOCATE THE SOFTWARE LICENSE OR LIMITED WARRANTY, CONTACT 

YOUR CISCO REPRESENTATIVE FOR A COPY. 

The Cisco implementation of TCP header compression is an adaptation of a program developed by the University of California, 

Berkeley (UCB) as part of UCB’s public domain version of the UNIX operating system. All rights reserved. Copyright © 1981, 
Regents of the University of California.  

NOTWITHSTANDING ANY OTHER WARRANTY HEREIN, ALL DOCUMENT FILES AND SOFTWARE OF THESE 

SUPPLIERS ARE PROVIDED “AS IS” WITH ALL FAULTS. CISCO AND THE ABOVE-NAMED SUPPLIERS DISCLAIM 
ALL WARRANTIES, EXPRESSED OR IMPLIED, INCLUDING, WITHOUT LIMITATION, THOSE OF 

MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OR ARISING FROM A 

COURSE OF DEALING, USAGE, OR TRADE PRACTICE. 

IN NO EVENT SHALL CISCO OR ITS SUPPLIERS BE LIABLE FOR ANY INDIRECT, SPECIAL, CONSEQUENTIAL, OR 

INCIDENTAL DAMAGES, INCLUDING, WITHOUT LIMITATION, LOST PROFITS OR LOSS OR DAMAGE TO DATA 

ARISING OUT OF THE USE OR INABILITY TO USE THIS MANUAL, EVEN IF CISCO OR ITS SUPPLIERS HAVE 

BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. 

CCDE, CCENT, CCSI, Cisco Eos, Cisco HealthPresence, Cisco IronPort, the Cisco logo, Cisco Lumin, Cisco Nexus, Cisco 

Nurse Connect, Cisco StackPower, Cisco StadiumVision, Cisco TelePresence, Cisco Unified Computing System, Cisco WebEx, 

DCE, Flip Channels, Flip for Good, Flip Mino, Flip Video, Flip Video (Design), Flipshare (Design), Flip Ultra, and Welcome to 

the Human Network are trademarks; Changing the Way We Work, Live, Play, and Learn, Cisco Store, and Flip Gift Card are 

service marks; and Access Registrar, Aironet, AsyncOS, Bringing the Meeting To You, Catalyst, CCDA, CCDP, CCIE, CCIP, 

CCNA, CCNP, CCSP, CCVP, Cisco, the Cisco Certified Internetwork Expert logo, Cisco IOS, Cisco Press, Cisco Systems, 

Cisco Systems Capital, the Cisco Systems logo, Cisco Unity, Collaboration Without Limitation, EtherFast, EtherSwitch, Event 

Center, Fast Step, Follow Me Browsing, FormShare, GigaDrive, HomeLink, Internet Quotient, IOS, iPhone, iQuick Study, 

IronPort, the IronPort logo, LightStream, Linksys, MediaTone, MeetingPlace, MeetingPlace Chime Sound, MGX, Networkers, 

Networking Academy, Network Registrar, PCNow, PIX, PowerPanels, ProConnect, ScriptShare, SenderBase, SMARTnet, 

Spectrum Expert, StackWise, The Fastest Way to Increase Your Internet Quotient, TransPath, WebEx, and the WebEx logo are 

registered trademarks of Cisco Systems, Inc. and/or its affiliates in the United States and certain other countries.  

All other trademarks mentioned in this document or website are the property of their respective owners. The use of the word 

partner does not imply a partnership relationship between Cisco and any other company. (0907R) 

Any Internet Protocol (IP) addresses and phone numbers used in this document are not intended to be actual addresses and phone 

numbers. Any examples, command display output, network topology diagrams, and other figures included in the document are 

shown for illustrative purposes only. Any use of actual IP addresses or phone numbers in illustrative content is unintentional and 

coincidental. 

Cisco Technical Documentation Style Guide©1992–2009 Cisco Systems, Inc. All rights reserved. 

 
 



 
 

 

 

 

Module 1: UCS Foundations 



 
 

Lesson 1 

UCS Component 

Overview 

Overview 

In this lesson you will learn about Cisco’s Unified Computing System Platform. 
You will understand new trends in the datacenter and understand how Cisco has 
designed the UCS hardware to be at the forefront of these trends. 

Objectives 

The specific objectives of this lesson are to enable you to perform the following 
tasks: 

• Introduce the UCS system hardware 

 

  



 
 

 

1-1  UCS Foundations  © Cisco Systems, Inc. 
 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

Introduction to Unified 
Computing System 
Platform

 

 

In this lesson you will learn about Cisco’s Unified Computing System Platform. You will 
understand new trends in the datacenter and understand how Cisco has designed the UCS 

hardware and software to be at the forefront of these trends. 

 

Upon completing this lesson you will be able to: 

 

• Describe the components that comprise a UCS system 
 

 

 

 

  



 
 

 

© Cisco Systems, Inc.  Overview of UCS Hardware 1-2 

© 2009 Cisco Systems, Inc. All rights reserved. UCS Technical Training – Overview 

UCS Hardware 
Components

 

 

In this section, we will introduce each of the hardware components that comprise a UCS 

system.  Specifically, the learning objectives are 

 

• Describe logical and physical perspectives of UCS 
• Describe the blades 
• Describe the mezzanine cards 
• Describe the hard disk drives 
• Describe the fabric interconnects 
• Describe the expansion modules 
• Describe the chassis 
• Describe the fabric extender 
• Describe the backplane 

 

 

 

  



 
 

 

1-3  UCS Foundations  © Cisco Systems, Inc. 
 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

LAN

Logical View of UCS

SAN

 

 

Logical View of UCS 

 

The graphic depicts a fully-populated UCS system, which includes the following: 

 

• 2 fabric interconnects  
• 1-40 chassis 
• 2 fabric extenders (aka IOM) per chassis 
• 1-8 blades per chassis 

 

Note that the fabric interconnects have uplink connectivity to both the LAN and SAN 

networks.  Also note that support for up to 40 chassis requires use of the 40-port 6140. In 

an HA configuration using 2 interconnects, both switches may be configured to actively 

switch traffic simultaneously, thereby improving throughput. 

 

 

  



 
 

 

© Cisco Systems, Inc.  Overview of UCS Hardware 1-4 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

Front View of UCS

2 x power supplies

2 x fan modules

4 x half-width 
blades

2 x full-
width blades

4 x power supplies

chassis

redundant
fabric 
interconnect

 

 

Front View of UCS 

 

Note that the power supplies for both the switch and chassis are accessible via the front.  

Also note that a combination of half-width and full-width blades is supported in the same 

chassis.  The fan modules for the switch are accessible in the front, while fan modules for 

the chassis are accessed from the rear. 

 

The diagram shows the most typical topology, with a redundant fabric interconnect.  The 

same two fabric interconnects connect down to multiple chassis to form a UCS system. 

 

At time of writing the blade options are: 

 

• Half-width blade: B200 
• Full-width blade: B250 
 

As shown in the diagram, you are free to mix and match half-width and full-width blades 

in the same chassis. 

 

Chassis 

 



 
 

 

1-5  UCS Foundations  © Cisco Systems, Inc. 
 

The internal name for the chassis is Santa Clara. The chassis is 32” deep and 6RU tall.  
The blades and power supplies plug in from the front. The same chassis may be used for 

up to 8 half-width blades, 4 full-width blades, or some combination of half- and full-

width blades.  For the half-width blades, a vertical divider is used to separate horizontally 

adjacent blades.  For the full-width blades, this divider must be removed. 

 

Power 

There are a maximum of 4 x 2500W hot-pluggable power supplies per chassis.  The 

actual number of power supplies required depends on the system’s hardware 
configuration and desired power redundancy.  They can be configured as non-redundant, 

N+1, or N+N (grid) redundant. They are single-phase 220V, IEC320-C 19.  The power 

supplies provide a 550W budget per slot for up to 8 half-width blades and 1100W budget 

per slot for up to 4 full-width blades.  While this may seem like “overkill”, the design 
supports future growth and power budget requirements with no service disruption.  

 

Cooling 

The chassis cools from front to rear with a high-efficiency, high-reliability flow-through 

airflow design (63% of a fully populated chassis is air). The fan modules are sized to 

support all blades running at full power budget.  There are 8 hot-plug dual fan modules 

per chassis with status indicators on each module. 

 

UCS feature support: 
 UCS features supported by the chassis include the ability to scale up to as many as 20 

chassis (using the 20-port interconnect) or 40 chassis (using the 40-port interconnect). 

 

 

  



 
 

 

© Cisco Systems, Inc.  Overview of UCS Hardware 1-6 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

Rear View of UCS

4 x power entry

2x fabric 
extenders

4 x 10GE SFP+  
fabric ports

1 x management port

2 x cluster ports

console port

20/40 x fabric/border 
ports

2 x power 
entry

8 x fan 
modules

expansion 
module bay 
1 or 2

 

 

Rear View of UCS 

 

All the cabling for a UCS for both the interconnects and the chassis (including power, 

Ethernet, console, and Fiber Channel) are plugged into the rear.  In such a redudant setup 

as shown , the “left” FEX connects to the “A” switch and the “right” FEX connects to the 
“B” switch.  Note that the interconnect shown in the slide is the 20-port 6120. 
 

 

  



 
 

 

1-7  UCS Foundations  © Cisco Systems, Inc. 
 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

Blade Overview

Differences

Type Form Factor Number of 

DIMM Slots

Number of 

Mezzanine Slots

Half-width ½ chassis width 12 1

Full-width full chassis width 48 2

Similarities

Type On Board 

Management

CPU Sockets Internal Drives

Half-width BMC 2 2

Full-width BMC 2 2

 

 

Blade Overview 

 

There are two types of blades available – half-width and full-width blades. Three factors 
distinguish these blades: the form factor, the number of DIMM slots, and the number of 

mezzanine card slots.  The blades have a common (x64 Nehalem) architecture and share 

many features such as being hot-swappable in the chassis, having 2 CPU sockets, 2 

internal SAS disk drive bays, and a baseboard management controller (BMC). Only one 

CPU is required for normal system operation.  If only one CPU is installed, then it must 

go in the first socket.  The CPUs must be identical on the same blade but can be mixed 

between blades in the same chassis. The baseboard management controller (BMC) is a 

microcontroller on the motherboard that provides “lights out” hardware status and 
configurability to the system management software over dedicated Ethernet links 

between the BMC and each FEX.  The BMC uses the IPMI (Intelligent Platform 

Management Interface) protocol over the I2C (inter-integrated circuit) serial bus to 

manage devices on the baseboard.  The BMC is also responsible for providing remote 

KVM access to the end user through dedicated management IP addresses for each blade 

exposed on the fabric-interconnect management port and NAT’-ed into the BMC. 
 

UCS feature support: 

Choice of blades provides increased scalability to the consumer with regard to: 

 



 
 

 

© Cisco Systems, Inc.  Overview of UCS Hardware 1-8 

• Number of CPUs to populate (1-2) 
• Number of disk drives to populate (1-2) 
• Number of mezzanine adapters to populate (1-2) 
• Amount of memory to install (depending on blade, up to 512GB) 
  

Another UCS feature supported for the blades is statelessness, where the following blade 

personality elements are relocatable between blades: 

 

• Identity elements such as MACs, WWNs, and UUIDs 
• Behavior elements such as BIOS version and QoS settings 
 

At the time of writing the B250 supports two mezzanine slots, althought the two cards 

must be identical.   

 

 

  



 
 

 

1-9  UCS Foundations  © Cisco Systems, Inc. 
 

 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

Adapter Offerings

Cost Effective 
10GbE LAN access

Existing Driver 

Stacks

VM I/O Virtualization 
and Consolidation

10GbE/FCoE

PCIe Bus

FC10GbE For hosts that 
need LAN 

access

PCIe x16

10GbE/FCoE

vNICs

Eth

0

FC

1 2

FC

3

Eth

127

CostCompatibilityVirtualization

Eth

 
 

Adapter Offerings 

 

The 3 types of adapters (aka mezzanine cards) available in a UCS blade include Palo, 

Menlo, and Oplin. 

 

M81KR – P81KR 
 

The Palo adapter supports up to 128 Ethernet vNICs (or FC vHBAs) running at 500 

KIOPs in both initiator and target mode. The Palo adapter is a converged network adapter 

(CNA) with dual 10GE ports and dual FC ports to the backplane.  The Palo ASIC 

provides failover between the redundant Ethernet links.  No multipathing software is 

required on the host OS for this functionality.   

 

M71KR –E|Q 
 

The Menlo adapter is a converged network adapter (CNA) with 2 host-side 10GE ports 

and 2 FC ports to the backplane.  The 2 network ports can run either native Ethernet or 

FCoE protocols and can be configured for failover.  This failover is performed by the 

Menlo ASIC and does not require multipathing software on the host OS. The Menlo 

ASIC is a Cisco-designed multiplexor and FCoE protocol offload engine with a 350MHz 



 
 

 

© Cisco Systems, Inc.  Overview of UCS Hardware 1-10 

24K MIPS processor. There are 2 versions of this card:  Menlo-E (with an Emulex 

chipset) and Menlo-Q (with a Qlogic chipset), thereby supporting existing proven driver 

stacks to the customer. 

 

Ether net 

 

The Oplin card is made by Intel.  It has 2 10GE ports to the backplane which run native 

Ethernet.  OS-implemented FCoE may be run over the Oplin to provide “free SAN 
access” to the host.   The Oplin card does not provide failover functionality. 
 

UCS feature support: 

 

• Choice of the Palo adapter provides enhanced virtualization.  The Palo adapter 
supports up to 128 vNICs presented to the ESX server which can then be used as 

VMNICs for virtual machines.  Further, the personality (through port profiles which 

define MAC forging, VLANs, and QoS settings) of a VM can migrate (i.e. Vmotion) 

using the VNTag functionality of the Palo adapter and NX5K. 

 

• Choice of the Menlo adapter provides increased scalability.  The FC-to-Ethernet 
protocol encapsulation and decapsulation is offloaded from the host and performed on 

the Menlo card itself. 

 

• Choice of any of these mezzanine cards simplifies management because of reduced 
cabling/switching infrastructure and less firmware to upgrade 

 

 

  



 
 

 

1-11  UCS Foundations  © Cisco Systems, Inc. 
 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

Hard Disk Drives

• 2 SFF drive bays plug 
into SAS backplane

• 73GB 15KRPM
• 146 or 300GB  10KRPM

• RAID-0 or RAID-1

• Diskless configuration 
supported (requires 
SAN or LAN[PXE]  
boot)

 

 

Hard Disk Drives 

 

Both types of blades have two drive bays and an SAS backplane, regardless of whether 

the blade was sold as “diskless”.  The supported drives – a 73GB 15KRPM SAS SFF 
drive , a146GB 10KRPM SAS SFF drive and a 300GB 10KRPM  SAS dirive . No local 

hard drive is required. If two hard drives are installed, then they must both be of the same 

size and speed and are hot-swappable.  The build-in LSI RAID  controller supports 

RAID-0 & RAID-1.  

  

UCS feature support: 

 

•  UCS features supported at the disk drive include statelessness by scrubbing any data 
on a disk drive during a service profile migration.   

 

•  Also, local disk policies (such as RAID-0 or RAID-1) may be configured that migrate 
with logical service profiles between blades. 

 

 

  



 
 

 

© Cisco Systems, Inc.  Overview of UCS Hardware 1-12 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

20 and 40 - Port Fabric Interconnect

1U

2U

 

 

20 and 40 port Interconnects 

 

20 – Port Fabric Interconnect 
 

The internal name of the fabric interconnect is Springfield. The 20-port interconnect is 

1U high.  It has 20 SFP+ ports for 10GE/FCoE .  There is 1 expansion module for 

connecting to the LAN and SAN networks.  The 20-port interconnect supports up to 560 

Gbps fabric.  None of these ports are enabled or configured by default.  

  
 40 – Port Fabric Interconnect 
 

The 40-port interconnect is 2U high.  It has 40 SFP+ ports for 10GE/FCoE.  There are 2 

expansion modules for connecting to the LAN and SAN networks.  The 40-port 

interconnect supports up to 1.12 Tbps fabric.    

 

UCS feature support: 

 

• Choice of either the 20-port or 40-port version of the interconnect provides scalability 
to the customer 

 



 
 

 

1-13  UCS Foundations  © Cisco Systems, Inc. 
 

• UCS features supported by the fabric interconnects include scalability.  You have the 
choice of using a 20-port or (shown in the next slide) a 40-port interconnect.  

 

• Another UCS feature supported by the interconnect is enhanced phyiscal (on the fex) 
and logical port virtualization as implemented in the VNTag feature.    

 

• The interconnect also natively supports FCoE to converge Fiber Channel and Ethernet 
fabrics.   

 

• Finally, the management server (discussed later in this module) runs on the 
interconnect and simplifies management so that all UCS components may be managed 

through a single pane of glass. 

 

 

  



 
 

 

© Cisco Systems, Inc.  Overview of UCS Hardware 1-14 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

Expansion Modules

Combo FC + 
Ethernet

FC-only (8 ports 
@ 1/2/4 Gbsec)

Ethernet-only

FC-only (6 ports 
@ 1/2/4/8 Gbsec
saphire)

 

 

Expansion Modules 

 

The expansion modules (also referred to as GEMs) provide connectivity into your 

enterprise Ethernet LAN and Fiber Channel SAN networks.  There are three expansion 

modules from which to choose:  FC-only, combination FC and Ethernet, and Ethernet-

only. 

 

• FC-Only (1/2/4Gb) - This fibre channel expansion module contains 8 SFP ports that 
run 1, 2, and 4 Gbps FC.   

• FC-Only (1/2/4/8Gb) - This fibre channel expansion module contains 6 SFP ports that 
run 1, 2, 4 and 8 Gbps FC.   

• Combo - This combination expansion module contains 4 SFP+ ports that run 10GE 
and 4 SFP ports that run 1, 2, and 4 Gbps FC.  It is internally referred to as a diamond 

card. 

• Ethernet-Only - This Ethernet expansion module contains 6 SFP+ ports that run 
10GE.   It is internally referred to as an emerald card. 

 UCS feature support: 

 

The expansion modules support increased scalability by providing choices to the 

consumer for LAN and/or SAN expansion. 



 
 

 

1-15  UCS Foundations  © Cisco Systems, Inc. 
 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

I/O Module (Fabric Extenders)

 
 

I/O Module 

 

FEX 

The fabric extender (also referred to as an IO module or IOM) logically extends the 

fabric from the switch to the blade. The name of the ASIC in the FEX is internally 

referred to as Redwood. Its primary function is to connect the blades to the left or right 

interconnect.  Secondarily, it houses a chassis management controller (CMC).  

There are 4 10Gbps ports that can be used to connect the chassis to the switch.  You 

connect either 1, 2, or 4 links from the FEX to the fabric interconnect.  The FEX 

support from 2:1 to 8:1 oversubscription rates.   The chassis contains 2 FEX slots for 

increased redundancy and bandwidth, though only one FEX is required for minimal 

configuration.  If only one FEX is installed, it must be placed into the “left” bay.    If 
both are used, they are hot-swappable and fully redundant.    The FEX provides 10Gbps 

per blade port (there are 2 ports per blade).   Each blade connects to both FEXs in the 

chassis via the mezzanine card.   

  

CMC 

The FEX has a chassis management controller (CMC) which is a key part of 

management infrastructure.  The CMC collects status data from the FEX using the 

IPMI (Intelligent Platform Management Interface) protocol over the I2C (inter-



 
 

 

© Cisco Systems, Inc.  Overview of UCS Hardware 1-16 

integrated circuit) serial bus and then communicates that information to the 

management node using the Ethernet server link. The CMC controls power supply and 

fan speeds. The CMC serves as a proxy for UCS manager to the blades for certain 

functionality.  We will also see that the CMC plays a part in the HA protocols. 

  

Diag port 

The FEX has a diag port used for “depot-level” troubleshooting. 
  

UCS feature support: 

The FEX supports increased scalability by multiplexing an up to 8:1 oversubscribed 

blades to ports ratio. 

  

 

 

  



 
 

 

1-17  UCS Foundations  © Cisco Systems, Inc. 
 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

Backplane

Redundant data and management paths

I/O 

Modules

Blade 

Connectors
PSU 

Connectors

 

 

Backplane 

 

The backplane provides redundant power to the FEXs and blades that plug into it.  The 

backplane also provides redundant data network (Ethernet) connectivity between the FEX 

and the blades.   Last, the backplane has redundant management (I2C) paths and 

dedicated management network (Ethernet) connectivity  and supports auto-discovery of 

all components plugging into it.  

 

The backplane supports up to 1.2 Tbps on the data plane. While the back plane is largely 

passive it does have 3 SEEPROMS on it used for managing the HA capabilities of the 

6120. 

 

 

  



 
 

 

© Cisco Systems, Inc.  Overview of UCS Hardware 1-18 

© 2009 Cisco Systems, Inc. All rights reserved. UCS Technical Training – Overview 

UCS C-Series Servers

 

 

UCS C-Series Servers 

 

UCS C-Series servers are not yet part of UCS integrated management.  They are 

standalone rack-mounted versions with the exact same CPU/Memory horsepower as 

their B-series equivalents. 

 

There are plans to integrate C-series rack-mounted servers into UCS integration 

(connected to the 6100 fabric interconnects, either directly or through a next-generation 

fex).  This will likely occur in late CY 2010 

 

 

  



 
 

 

1-19  UCS Foundations  © Cisco Systems, Inc. 
 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

C-Series Overview

 Expands UCS into rack 
mount market

 Multiple offerings for different 
work loads

• C200 - 1RU rack-mount server

• C210 – 2RU large internal storage

• C250 – 2RU Memory Extending 

 Offers Path to Unified 
Computing

UCS C200 M1

UCS C210 M1

UCS C250 M1

 

 

C-Series Overview 

 

Cisco expands the UCS platform to now includes a series of servers that are in a rack 

mount form factor. These models are known as the Unified Compute System C-Series 

Rack mount servers. Consumers that do not use or prefer the rack mount architecture 

will also be able to take advantage of the many benefits of Cisco’s UCS system without 
being forced to use the B-Series Blade architecture. At launch not all UCS integration 

will be available for the c-series servers, but Cisco plans to complete this integration in 

CY2010. 

 

The C-Series offers 4 models: 

 

• C200 – First model introduced. 1RU rack-mount server designed to balance simplicity, 
performance, and density for production-level virtualization, web infrastructure, and 

other mainstream data center workloads 

• C210 – Large internal storage model. designed to balance performance, density, and 
efficiency for workloads requiring economical, high-capacity, reliable, internal storage 

• C250 – Large memory server. designed to increase performance and capacity for 
demanding virtualization and large-data-set workloads 



 
 

 

© Cisco Systems, Inc.  Overview of UCS Hardware 1-20 

• C-460 – The largest of the c-series and capable of up to 512 GB of RAM in this 4 u 
box. This server is designed for high-end applications like databases and virtualization 

deployments. 

 

Because the C-Series is designed to be part of the UCS system, it offers many of the same 

advantages: 

 

• Simplifying management – Use existing tools (CIMC) to manage the server or UCSM  
• Unified I/O – The C-Series will use Converged Network Adapters as well as fibre 

channel and Ethernet adapters 

• Virtualization – The C-Series have Virtualization adapter like the B-series (M81KR). 
Large memory server is designed for large virtualized work loads 

 

 

  



 
 

 

1-21  UCS Foundations  © Cisco Systems, Inc. 
 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

C-200 Overview

UCS C200 Front View

UCS C200 Rear View

Expansion Card

LOM

Console and Management 

USB and VGA

Power 

DVD 

Dongle 
for 

2USB, 
VGA, 

Console

Internal 
Disk

 

 

C-200 Overview 

 

The C-200 is the general purpose high density model of the c-series line. The C-200 

offers the following features: 

 

• Up to two Intel Xeon 5500 Series multicore processors  
• Up to 96 GB (DDR3) 
• Up to four internal SAS or SATA disk drives; up to 2 terabytes (TB) total  
• RAID capable: 

• Built-in RAID 0 and 1 support for up to four SATA drives 
• RAID 0 and 1 support for up to four SAS or SATA drives with optional 

mezzanine card 

• RAID 0, 1, 5, 6, and 10 support for up to four SAS or SATA drives with optional 
LSI MegaRAID card  

• Two half length x8 PCIe slots  
• One full height  
• One low profile 

• Two integrated Gigabit Ethernet ports and one 10/100 Mbps management port 
• KVM access  



 
 

 

© Cisco Systems, Inc.  Overview of UCS Hardware 1-22 

• Front-panel interface with video, two USB, and serial port connections.  
• Back-panel video, two USB, and serial port connections  

• Dual redundant power 

  



 
 

 

1-23  UCS Foundations  © Cisco Systems, Inc. 
 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

C-210 Overview

UCS C210 Front View

UCS C210 Rear View

Expansion Card

LOM

Console and Management 

USB and VGA

Power 

DVD 

Dongle 
for 

2USB, 
VGA, 

Console

Internal 
Disk

 

 

C-210 Overview 

 

The C-210 is the general purpose, high density, and large internal storage model of the c-

series line. The C-210 offers the following features: 

 

• Up to two Intel Xeon 5500 Series multicore processors  
• Up to 96 GB (DDR3) 
• Up to 16 internal small form factor (SFF), (SAS), or (SATA) disk drives; up to 8 TB 

total  

• RAID capable: 
• Built-in RAID 0 and 1 support for up to four SATA drives 
• RAID 0 and 1 support for up to four SAS or SATA drives with optional 

mezzanine card 

• RAID 0, 1, 5, 6, and 10 support for up to 16 SAS or SATA drives with optional 
LSI MegaRAID card  

• Five full-height PCIe slots:  
• two full-height, full-length x8 PCIe card slots  
• three full-height, half-length x8 PCI card slots, all with x16 connectors   

• Two integrated Gigabit Ethernet ports and one 10/100 Mbps management port 



 
 

 

© Cisco Systems, Inc.  Overview of UCS Hardware 1-24 

• KVM access  
• Front-panel interface with video, two USB, and serial port connections.  
• Back-panel video, two USB, and serial port connections  

• Dual redundant power 
 

 

  



 
 

 

1-25  UCS Foundations  © Cisco Systems, Inc. 
 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

C-250 Overview

UCS C250 Front View

UCS C250 Rear View

Expansion Card

LOM

Console and Management 

USB 
and 
VGA

Power 

DVD 

Dongle 
for 

2USB, 
VGA, 

Console Internal 
Disk

 

 

C-250 Overview 

 

The C-250 server is a high-performance, memory-intensive, two-socket, 2RU rack-mount 

server designed to increase performance and capacity for demanding virtualization and 

large-data-set workloads. It also can reduce the cost of smaller memory footprints. The C-

250 offers the following features: 

 

• Up to two Intel Xeon 5500 Series multicore processors  
• Up to 384GB (DDR3) 
• Up to eight internal small form factor (SFF), (SAS), or (SATA) drives; up to 4 TB total   
• RAID capable: 

• RAID 0 and 1 support for up to eight SAS or SATA drives through optional PCI 
Express (PCIe) controller 

• RAID 0, 1, 5, 6, and 10 support for up to 8 SAS or SATA drives with optional 
LSI MegaRAID card  

• Support for up to five PCIe cards in three low-profile,  
• half-length x8 and two full-height,  
• half-length x16 slots   

• Four integrated Gigabit Ethernet ports and 2 x 10/100 Mbps management port 



 
 

 

© Cisco Systems, Inc.  Overview of UCS Hardware 1-26 

• KVM access  
• Front-panel interface with video, two USB, and serial port connections.  
• Back-panel video, two USB, and serial port connections  

• Dual redundant power 
 

 

  



 
 

 

1-27  UCS Foundations  © Cisco Systems, Inc. 
 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 38

Cisco C-460 – Large Memory Rack Mount 
Server

• 4 rack unit (RU) rack-mount chassis
• 64 dual in-line memory module (DIMM) 
• Up to 512 GB based on Samsung's 40nm class DDR3 

technology
• Up to 12 small form-factor (SFF) optional SAS or SATA

 

Cisco C-460 – Large Memory Rack Mount Server 
The Cisco UCS C460 M1 server features: 

 

 4 rack unit (RU) rack-mount chassis 

 64 dual in-line memory module (DIMM) slots and up to 512 GB based on 
Samsung's 40nm class DDR3 technology 

 Up to 12 small form-factor (SFF) optional SAS or SATA hot plug hard drives10 x 
PCI Express  (PCIe)  slots 

 Two 1/10 Gb Ethernet LAN on Motherboard (LOM) ports, two 10/100/1000 
LOM ports plus baseboard management controller (BMC) 

  



 
 

 

© Cisco Systems, Inc.  Overview of UCS Hardware 1-28 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

Adapter Offerings

10
G

bE
/F

C
oE

P
C

Ie
 B

usFC
10

G
bE

Ethernet or HBA

CNA

Virtualization

P
C

Ie
 x

16

10
G

bE
/F

C
oE

vN
IC

s

E
th 0

FC 1
2

FC 3

E
th 12

7

E
th • UCS P81e

• 128 vNICs
• Uses VNlink
• NIC Teaming done by HW

• Emulex and Qlogic
• 2 Fibre Channel
• 2 Ethernet
• NIC Teaming through bonding driver

• Emulex / Qlogic (HBA)
• Broadcom Ethernet
• NIC Teaming through bonding driver

 

 

Adapter Offerings 

 

The 3 types of adapters cards available in a UCS C-Series. 

 

Virtual Interface Card (UCS P81e) 

 

Cisco UCS P81E Virtual Interface Card is a virtualization-optimized Fibre Channel over 

Ethernet (FCoE) PCI Express (PCIe) 2.0 x8 10-Gbps adapter designed for use with Cisco 

UCS C-Series Rack-Mount Servers. The virtual interface card is a dual-port 10 Gigabit 

Ethernet PCIe adapter that can support up to 128 PCIe standards-compliant virtual 

interfaces, which can be dynamically configured so that both their interface type 

(network interface card [NIC] or host bus adapter [HBA]) and identity (MAC address and 

worldwide name [WWN]) are established using just-in-time provisioning. In addition, the 

Cisco UCS P81E can support network interface virtualization and Cisco VN-Link 

technology. 

 

Converged Network Adapters 

 

The converged network adapter (CNA) offers and the ability to provide converged 

network fabrics across 10 Gbe. The adapters have 2 host-side 10GE ports and 2 FC ports 

to the CAN, but then will convert all fibre channel and Ethernet traffic from these ports to 



 
 

 

1-29  UCS Foundations  © Cisco Systems, Inc. 
 

be transported across 10 Gbe of the consumers network.  These CNAs then would be 

linked to a Nexus 5K as an example in order to use the FCoE capabilities. There are two 

manufacturers of CAN, Qlogic and Emulex. 

 

• Emulex OneConnect 
• Qlogic QLE8152 
 

Ethernet and/or HBAs 

 

You can also opt for traditional HBA and Ethernet Connectivity. Fro Ethernet we offer 

Broadcom NetXtremeII cards with either 2 or 4 port connectivity. For HBA we offer both 

Emulex and Qlogic. 

 

Ethernet: 

 

• Broadcom NetXtremeII 4 port 
• Broadcom NetXtremeII 2 port 
 

HBA: 

 

• Emulex LightPulse LPe11002 
• Qlogic SANBlade QLE2462 
 

 

 

  



 
 

 

© Cisco Systems, Inc.  Overview of UCS Hardware 1-30 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

C-Series Storage

Disks
• 3.5 inch and 2.5 inch form 

factors

• 15K SAS (High Performance)
• 10K SAS (Performace)
• 7200 SAS (High Cap / Perf)
• 7200 SATA (Cost and Cap)
• 73GB, 146GB, 300GB, and 

500GB

RAID Controllers
• 1 Built in controller (ICH10R)
• Option LSI 1064e based 

mezz controller

• Option LSI 1078 based Mega 
RAID controller

 

 

C-Series Storage 

 

The C-Series has multiple internal drives, 4 on the C-200 , 16 on the C-210, and 8 on the 

C-250. These drives can be controlled by an internal RAID controller. The C-series offers 

a single built in RAID controller, ICH10R RAID, to do simple RAID 0 and 1. This 

controller is not compatible for use with VMWare ESX Server software.  

 

In addition to the built in RAID controller, you have the option of getting either: 

 

• LSI 1064-based controller mezzanine card – Only offers 0 and 1 capabilities 
• LSI 1078-based MegaRAID controller card – Offers 0,1,5,6,and 10 support 
 

Disks come in multiple options. Depending on the model you have the following options 

 

C-200 

 

• 250-GB SATA; 7200 RPM 
• 500-GB SATA; 7200 RPM 
• 46-GB SAS; 15,000 RPM 
• 300-GB SAS; 15,000 RPM 



 
 

 

1-31  UCS Foundations  © Cisco Systems, Inc. 
 

• 1-TB SAS; 7200 RPM 
 

C-210 

 

• 73-GB SAS; 6G, 15,000 RPM 
• 146-GB SAS; 6G, 10,000 RPM 
• 300-GB SAS; 6G,10,000 RPM 
• 500-GB SATA; 7200 RPM 
 

C-250 

 

• 73-GB SAS; 6G, 15,000 RPM 
• 146-GB SAS; 6G, 10,000 RPM 
• 300-GB SAS; 6G,10,000 RPM 
• 500-GB SATA; 7200 RPM 
 

 

  

  

 

 

 

  



 
 

 

© Cisco Systems, Inc.  Overview of UCS Hardware 1-32 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

C-Series Power

PSU Options
• C-200 can operate at 450W
• C-200 and 210 650W PSU
• C- 250 750W PSU

C-200/210 C-250

 

 

C-Series Power 

 

The C-Series has a number fo power options fepending on the model. For power 

efficiency with the C-200 you can option a 450 W PSU as opposed to the 650W PSU. 

Because of the potential for more disk drives the C-210 comes with 650 W PSU. Finally 

the C-250 with its ability to house up to 384 GB RAM uses a 750W PSU. The 650 and 

450 watt PSU have the same form factor. 

 

 

  



 
 

 

1-33  UCS Foundations  © Cisco Systems, Inc. 
 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

C-Series Cooling

C- 210 C-250

Cooling Info
• Front to Back
• Internal Fans in the C200 

and 210

• Hot Swappable External 
Units C-250

• PSU have separate Fans

C-200

 

 

C-Series Cooling 

 

The C-series have front to back cooling compliant with the warm row cool row design. In 

the C-200 and 210 models the fans are internal to the unit as shown in the picture above. 

This means it will require opening the system to replace the fans. On the C-250 the Fans 

are module sin the front of the server and are removable and hot-swappable. 

 

 



 
 

Lesson 2 

Introduction UCS 

Management 

Overview 

In this lesson you will learn about Cisco’s Unified Computing System Platform. 
You will understand new trends in the datacenter and understand how Cisco has 
designed the UCS hardware and software to be at the forefront of these trends. 

Objectives 

The specific objectives of this lesson are to enable you to perform the following 
tasks: 

 

• Introduce the UCS management hardware and software 

  



 
 

 

2-1   UCS Foundation  © Cisco Systems, Inc. 
 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

Introduction to UCS 

Management

 

 

Introduction to UCS Management 

  

This section will introduce the UCS management model.  We will briefly look at the 

management architecture, high-availability and interfaces. 

  

• Management architecture 
• What is UCS Manager and where does it run? 
• What does UCS Manager not do 
• Introduction to UCS Manager high-availability 
• UCS Manager interfaces 
• Opt-in deployment models 

  

 

 

  



 
 

 

© Cisco Systems, Inc.  Introduction to UCS Management 2-2 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

High-Level Management Architecture

Fabric 
Interconnect 
switch elements

chassis elements

server elements

management 
interfaces

managed 
endpoints

multiple protocol 
support

redundant management plane

redundant 
management service

UCSM
UCSM

 

 

High-Level Management Architecture 

 

UCS Manager is the name of the management service for all the UCS components.  As 

such, users can manage the entire UCS system through a single pane of glass, thereby 

reducing management complexity.  UCSM runs on the management node.  In an HA 

configuration, there is a redundant instance of UCSM running on the second.  Managed 

Fabric interconnect switch elements include GEM modules and ports.  Managed chassis 

elements include the CMC, fan modules, and power supplies.  Managed server elements 

include disks, mezz cards, BMC and BIOS. 

 

 

  



 
 

 

2-3   UCS Foundation  © Cisco Systems, Inc. 
 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

X M L 

A P I

UCS Manager and XML

Cisco UCS

Manager

configuration 
state

GUI

CLI

3rd party 
tools

operational 
state

 

 

UCS Manager and XML 

 

UCS Manager‟s native language is XML.  Both the GUI and CLI are written using UCS 
Manager‟s XML API.  3rd party tools can also use this same XML API to integrate with 
UCS Manager.  When user‟s submit management configuration requests for a managed 
device to UCS Manager, UCS Manager will call the appropriate device manager to 

deploy the management request.  A device‟s operational state is communicated back to 
UCS Manager and reflected in the UI. 

 

 

  



 
 

 

© Cisco Systems, Inc.  Introduction to UCS Management 2-4 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

Overview of HA in UCS

L1 to L1

L2 to L2

 

 

Overview of HA in UCS 

 

Configuring two interconnects in your UCS can provide redundancy for both the UCS 

Manager functionality as well as the switching functionality that the interconnect 

provides.    You are not required to run in HA mode, but if you do, you must follow 

certain rules.  First, you must connect the L1 port of the “left” fabric interconnect to 
that of the “right” fabric interconnect  and L2 of left to L2 of right.  These two Ethernet 
links are used for cluster protocol traffic only.  Second, you must connect the “left” IO 
module to the “left” fabric interconnect  (using between 1 and 4 server links) and 
connect the “right” IO module to the “right” fabric interconnect. 
 

Each UCS Manager instance either runs as the „primary‟ or „subordinate‟ – an election 
algorithm runs at fabric interconnect startup to determine which is which.  All 

management information is replicated between the two instances over the private 

network so that it persists across failovers.  A “floating” management IP address is 
configured for UCS Manager and is run on the primary instance.  

 

While a UCS Manager instance running on an interconnect is either primary or 

subordinate, both interconnects may be configured to switch Ethernet and FC traffic 

simultaneously.  In other words, as management nodes, the fabric interconnects run 

“active-passive” but as switches for the data plane they may run “active-active”. 



 
 

 

2-5   UCS Foundation  © Cisco Systems, Inc. 
 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

UCS Manager Principal Interfaces

GUI Navigation CLI Equivalent to GUI

 
 

UCS Principal Interfaces 

 

GUI 

The GUI is the principal access mechanism to UCS Manager.  The GUI is a Java 

Application downloaded and launched  (using Java Webstart technology) from a web 

server inside UCS Manager.  It runs as a standalone application (it can survive death of 

the browser that launched it, for example).  Since it is 100% Java, it should be nearly 

identical on a variety of client OS‟s and platforms. 
 

• Downloaded from UCS Manager using Java Webstart 
• Runs as standalone GUI 
• Changes made in GUI are refle 

 

CLI 

The CLI is a distinct, secondary interface to UCS Manager.  Almost all tasks can be 

performed either in the GUI or the CLI, although the two are independent (for example, 

the GUI does not invoke the CLI).  Configuration and changes made and committed in 

the CLI are reflected immediately in the GUI (and vice versa).  Both the CLI and GUI 

subscribe to the event channels of the other. 

 

• Use ssh (default) or telnet directly to UCS Manager IP 



 
 

 

© Cisco Systems, Inc.  Introduction to UCS Management 2-6 

• Independent control mechanism from GUI 
• Changes made in CLI are reflected in GUI 

 

 

 

  



 
 

 

2-7   UCS Foundation  © Cisco Systems, Inc. 
 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

Out-of-the-Box Protocol Support

Call-homeSMASH CLP

Remote KVM UCS CLI and GUI

UCS XML API

CIM XMLIPMI

SNMP

Serial Over LAN

 

 

UCSM Protocol Support 

 

UCS Manager supports a variety of industry-standard protocols for monitoring, 

configuration, and call-home.  Some of these interfaces (e.g. Remote KVM) are cut-

through interfaces that “go around” UCS Manager while others (e.g. Call-home) use 
UCS Manager for configuration and activation.  Configuration and detail about these 

protocols is covered in a later module in this course. 

 

The UCS XML API (and corresponding SDK) allow you to perform custom wrappers 

around UCS configuration and monitoring.  There are several use cases for this: 

 

• Creating a multi-tenant portal with your own presentation/authorization/authentication 
mechanisms 

• Integrating with custom or industry-standard orchestration tools 
• Populating external CMDBs to include management changes in a UCS environment 
into your enterprise management system 

• Scripting and integrating into custom management solutions. 
• Extending the base functionality provided by UCS Manager 

 

 



 
 

 

© Cisco Systems, Inc.  Introduction to UCS Management 2-8 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

Opt-in Models for UCS Management

 Basic

– 1:1 mapping from server identities/behaviors to servers

– Uses built-in (hardware-derived) identities

 Stateless computing

– 1:many mapping from server identities /behaviors to 
servers

– Uses pools, policies, and templates to assign identities and 
behaviors to servers

 Multi-tenancy

– 1:1 or 1:many mapping from resources to organizations

– Uses RBAC to control privileges

 
 

UCS Manager Opt-in Models 

 

In order to facilitate different levels of adoption for UCS features, customers can 

choose from essentially three different management paradigms: basic, stateless, and 

multi-tenancy. 

 

Basic 

In this paradigm, the user can treat blades as physical servers in an analogous fashion as 

one would would a rack-mounted server.  Consumers who require that the operating 

systems, applications, and users using a server in a UCS are confined to a particular 

blade could exploit this model.  While this is the easiest model to adopt, it does not 

make use of many of the features UCS provides (namely mobility and organizational 

sharing of servers). 

 

Stateless computing 

In this paradigm, the user does not care on which physical blade an operating system or 

application runs.  Instead, users can pool servers together and then have UCS Manager 

automatically select a server that satisfies the physical or logical requirements of a user 

(e.g. amount of memory installed, CPU capacity) as well as identity requirements (e.g. 

WWN, MAC) and behavior (e.g. firmware versions, boot order, … etc). 
 



 
 

 

2-9   UCS Foundation  © Cisco Systems, Inc. 
 

Multi-tenancy 

In this paradigm, users (or “tenants”) of the same UCS can all share its resources.  UCS 
Mnager uses role-based access control (or RBAC) to grant or deny particular access to 

a particular resource for a particular user based on privileges assigned to a role. 

 

 

 

  



 
 

 

© Cisco Systems, Inc.  Introduction to UCS Management 2-10 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

Overview of Server Deployment in UCS

Identity

(MAC Address, 

WWN, Etc.)

Behavior

(Firmware, 

QoS, Etc.)

Other

(vNICs, 

vHBAs, Etc.)

Configuration 

Methods
Service Profile Physical 

Blade

• Manual
• Automatic
• Default

 

 

Overview of Server Deployment 

 

Pools 

Identity pools such as MAC and WWN pools allow the server administrator to pull 

from a pre-defined set of identity addresses and assign them to servers.  Server pools 

allow the server administrator to pull from a pre-defined set of blades that satisfy 

certain criteria (such as RAM and CPU capacity). 

 

Policies 

Policies allow the server administrator to consume pre-defined behaviors such as boot 

order and QoS settings. 

 

Templates 

Templates allow the server administrator to consume predefined profile, NIC, and HBA 

configuration. 

 

Profiles 

The service profile is the heart of the UCS Manager.  It represents all the identity and 

behavior of a server.  When you need a blade with a particular identity and set of 

behaviors, you simply assign a service profile to that blade.  Insodoing, UCS Manager 



 
 

 

2-11   UCS Foundation  © Cisco Systems, Inc. 
 

configures a physical blade with the appropriate behavior and identities with LAN and 

SAN connectivity. 

 

  



 
 

 

© Cisco Systems, Inc.  Introduction to UCS Management 2-12 

© 2009 Cisco Systems, Inc. All rights reserved. UCS Technical Training – Overview 

Management and UCS 
C-Series 

 
 

This section will introduce the UCS management model.  We will briefly look at the 

management architecture, high-availability and interfaces. 

 

• Management architecture of C-Series 
• What is CIMC does and does not do 
• Deployment of C-series 

 

 

 

  



 
 

 

2-13   UCS Foundation  © Cisco Systems, Inc. 
 

 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

UCSM

High-Level Management Architecture

Administrative tasks
Communications 
User Management
Network Configuration

Server Monitoring
Inventory
IPMI
Logs

RAID Configuration
Boot Options
Server Options

management 
interfaces

managed 
endpoints

Web GUI
Console

management service

CIMC

BIOS

 

High-Level Management Architecture 

 

This is a very high level view of the management of the C-Series. While full integration 

with the UCSM is not available currently, you can still effectively manage the server 

using the same tools you use currently. Included with the C-Series are also some unique 

management and monitoring capabilities. 

 

CIMC – Cisco Integrated Management Controller 

 

CIMC is a separate management module that is built onto the motherboard. The CIMC 

has its own processor which runs the CIMC software. The CIMC is shipped with a 

running version of the firmware. Users can update the CIMC firmware through the 

Firmware Update Management page, You  need not worry about installing the initial 

CIMC firmware. Users do not install a host OS like Windows or Linux on the CIMC. The 

host OS runs on the Intel host processor. You install the host OS on the host hard drive 

using the DVD drive, or over the network. You can use the CIMC to install the host OS 



 
 

 

© Cisco Systems, Inc.  Introduction to UCS Management 2-14 

using the KVM console and vMedia. You can use a web-based GUI or SSH-based CLI to 

access, configure, administer, and monitor the server. 

Almost all tasks can be performed in either interface, and the results of tasks performed 

in one interface are 

automatically displayed in another. 

 

Tasks you can perform using the CIMC: 

 

• Power on, power off, power cycle, reset and shut down the server 
• Toggle the locator LED 
• Configure the server boot order 
• View server properties and sensors 
• Manage remote presence 
• Create and manage local user accounts, and enable remote user authentication through 

Active Directory 

• Configure network-related settings, including NIC properties, IPv4, VLANs, and 
network security 

• Configure communication services, including HTTP, SSH, and IPMI Over LAN 
• Manage certificates 
• Configure platform event filters 
• Update CIMC firmware 
• Monitor faults, alarms, and server status 
 

Tasks you CANNOT do with CIMC: 

 

• Deploy an OS, such as Windows or Linux 
• Deploy patches for software, such as an OS or an application 
• Install base software components, such as anti-virus software, monitoring agents, or 

backup clients 

• Install software applications, such as databases, application server software, or web 
servers 

• Perform operator actions, including restarting an Oracle database, restarting printer 
queues, or handling non-CIMC user accounts 

• Configure or manage external storage on the SAN or NAS storage 
 

UCSM 

 

As of release 1.4.(1m) the UCS b series management software, UCSM, can now manage 

c-series rack mounts as if they were additional blades. This means all of the management 



 
 

 

2-15   UCS Foundation  © Cisco Systems, Inc. 
 

and monitoring of the rack mounts is done through the use of Policies, Profiles, and 

Templates. The CIMC is no longer used to manage the server and infact cannot be used 

unless you change the mode of management from UCS to Stand alone. 

BIOS 

 

There are a number of BIOS on the C-Series for configuring either the Server itself or the 

various adapter cards that can be housed inside the server. 

 

If managed by UCSM bios settings are part of policies and service profiles.  



 
 

 

© Cisco Systems, Inc.  Introduction to UCS Management 2-16 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

C-Series Management Connectivity

 

 

C-Series Management Connectivity 

 

The principal management feature is through redundant out-of-band network connections 

to each rack-mounted server‟s BMC.   A web-page is presented by the BMC which is 
similar in nature to the “server (equipment)” and “server(logical)” views in UCS --- from 
this page you can power on and power off the server, perform other maintenance tasks, 

and launch the same KVM remote console tool that is used with B-series blades. 

 

Of course on board standard video and USB console access is available as well. 

 

 

  



 
 

 

2-17   UCS Foundation  © Cisco Systems, Inc. 
 

© 2009 Cisco Systems Inc. All rights reserved. UCS Technical Training – Overview

C-Series Deployment Scenarios

 

 

C-Series Deployment Scenarios 

 

This slide gives you an idea of the flexibility of these particular products with Cisco 

networking products and how it'll be integrated from a UCS perspective. In the middle, 

you have displayed the UCS C250, 210 and 200, and how we see it being deployed in 

various scenarios either with third party products, with Cisco switches like the Nexus 

5000, for example, or the Cisco Nexus 2000 Fabric Extender, or into a UCS environment 

moving forward. If you look at how the B-Series kind of plays in this overall portfolio, 

you've got the UCS, the blade server chassis and products to the left, and really the C-

Series allows you the flexibility to play in a standalone environment, connect to various 

Cisco gear with other third party gear that may be already in place in the data center, or a 

migration path to the UCS in the future. Whereas you see where the Cisco Unified 

Computing system on the left, how that plays, it's kind of a system in its own and doesn't 

provide some of the flexibility, although it has tremendous TCO advantage and other 

advantages associated with that deployment model.  

 

 

 



 
 

Lesson 3 

Introduction to UCS User 

Interfaces 

Overview 

The purpose of this module is to familiarize yourself with the GUI and the CLI.  
Focus in the practical exercises will be on the equipment areas of the GUI and 
CLI; you will get plenty of practice creating and managing logical objects in the 
hands-on labs in the remainder of the course 

Objectives 

The specific objectives of this lesson are to enable you to explain the following 
about UCS GUI and CLI: 

 
• Become familiar with navigating the GUI  

• Understand the functions of the 5 main tabs on the navigation pane 

• Become familiar with the CLI and CLI scoping 

• Use CLI commands to perform creation and deletion of managed 

objects 

 

 
 

 

  



 
 

 

3-1   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—2

UCS Manager
UI Overview
Objectives

• Become familiar with navigating the GUI 

• Understand the functions of the 5 main tabs on the navigation 
pane

• Become familiar with the CLI and CLI scoping

• Use CLI commands to perform creation and deletion of managed 
objects

 

 

The purpose of this module is to familiarize yourself with the GUI and the CLI.  Focus in 

the practical exercises will be on the equipment areas of the GUI and CLI; you will get 

plenty of practice creating and managing logical objects in the hands-on labs in the 

remainder of the course. 

 

• Become familiar with navigating the GUI  
• Understand the functions of the 5 main tabs on the navigation pane 
• Become familiar with the CLI and CLI scoping 
• Use CLI commands to perform creation and deletion of managed objects 

 

 

 

  



 
 

 

© Cisco Systems, Inc.   Introduction to UCS User Interfaces 3-2 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—3

Primary view of Graphical interface

NAVIGATION PANE CONTENT PANE

 

 

Primary view of Graphical interface 

 

The left or Navigation Pane consist of a fault summary bar across the top view and a 

series of 5 tabs that offer differing views of the various managed components in the 

Unified Computing System. The fault summary has four conditions ranging from critical, 

major, minor and warning. The faults summary contains all the cumulative totals for the 

entire UCS 

 

An expandable branch or tree function allows the operator to traverse the various 

components located in the five tabs. 

 

The right or Content Pane consist of a top toolbar with a back button, new object creation 

pull down, options & questions buttons, information button and a debug pull down menu. 

 

The second toolbar in the content pane offers the operator a breadcrumbs trail of object 

hierarchies already traversed with the ability to rapidly return to a previous location along 

the trail. At the right most portion of this bar is the current location. 

 

The largest part of the content pane offers granular details associated with the varying 

objects that have been highlighted in the navigation pane. And at the vary bottom the 



 
 

 

3-3   UCS Foundations  © Cisco Systems, Inc. 
 

content pane are the function buttons associated with committing or saving as well as 

discarding the changes made here. 

 

 

  



 
 

 

© Cisco Systems, Inc.   Introduction to UCS User Interfaces 3-4 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—4

Navigation Pane Tabs 
(Equipment)

This shows
current UCS HW 
components

 

 

Navigation Pane Tabs (Equipment) 

 

This view displays the Equipment tab contents in the Navigation pane. The display is in a 

hierarchical format that list chassis 1-40 and then fabric interconnect A and B 

Subcomponents such as blades and interface cards are then expanded out from the chassis 

objects to perform operations on individual components and their attributes. Each 

hardware object that is highlighted then has its corresponding attributes displayed on the 

content pane. 

 

The content pane may have 1 or more tabs depending on the amount of attributes or 

functions. At the top of the Navigation pane is a filter pulldown for your view. The filter 

is set to “all” by default but can be set to restrict the object view to the topmost objects in 
that tab. 

 

In the case of the Equipment view the Chassis or fabric interconnects are the topmost 

objects. 

 

 

  



 
 

 

3-5   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—5

Navigation Pane Tabs 
(Servers)

This tab is for 
the creation of 
logical servers

 

 

Navigation Pane Tabs (Servers) 

 

This is the servers tab. As opposed to the equipment tab, this tab focuses on the logical 

deployment of servers by configuring and managing service profiles and their associated 

templates,  policies and pools. 

 

This tab is the “heart” of configuration of UCS servers.  The idea is that the network 
administrator and SAN administrator can spend “up front” time configuring global 
network and SAN settings on the LAN and SAN tabs.  After this, all the information 

comes together on this servers tab during the configuration of service profiles. 

 

 

  



 
 

 

© Cisco Systems, Inc.   Introduction to UCS User Interfaces 3-6 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—6

Navigation Pane Tabs 
(LAN)

This tab is for 
network related 
tasks like 
creating VLANs

 

 

Navigation Pane Tabs (LAN) 

 

The LAN tab contains network configuration that will then be visible and available for 

the configuration of service profiles.  This tab is focused mostly on global network 

configuration that will affect UCS northbound connectivity, and configure a set of 

choices, pools, and policies related to the network arena that will be available for 

incorporation into service profiles. 

 

Another way of saying this is that a lot of the information on the LAN tab is created by 

network administrators and then consumed by server administrators as they set up 

service profiles. 

 

 

  



 
 

 

3-7   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—7

Navigation Pane Tabs (SAN)

This tab is for 
SAN related 
tasks like 
creating VSANs

 

 

Navigation Pane Tabs (SAN) 

 

The SAN tab contains SAN storage  configuration that will then be visible and 

available for the configuration of service profiles.  It is very analogous to the LAN tab. 

 

Alot of the information on the SAN tab (VSAN’s available, WWN pools)  is created by 
storage  administrators and then consumed by server administrators as they set up 

service profiles. 

 

 

 

  



 
 

 

© Cisco Systems, Inc.   Introduction to UCS User Interfaces 3-8 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—8

Navigation Pane Tabs (VM)

This tab is 
specifically for 
Virtual Card 
(Palo) Pass-
through switch 
(PTS) feature

 

 

Navigation Pane Tabs (VM) 

 

This tab deals specifically with the Palo Pass-through switch (PTS) feature for 

VMware.  It is not at this time used for any other purpose. 

 

The Palo PTS feature will involve making a connection between USCM and VMware 

VCenter (the “VM Providers” setup).  VM Profiles (port profiles) will be pushed to 
VCenter for the attachment of virtual machines to the pass-through switch.  Each 

virtual machine adapter will be “wired straight through” the PTS to a Palo virtualized 
NIC which will have the exact same visibility as physical NIC’s in the UCS system. 

 

 

  



 
 

 

3-9   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—9

Navigation Pane 
Tabs ( Admin)

This tab is for UCS 
related management 
tasks like RBAC

 

 

Navigation Pane Tabs ( Admin) 

 

The Admin tab is used for administrative tasks such as setting up users and external 

authentication schemes.  IP management (for management functionality) only is also 

controlled on this screen. 

 

 

 

  



 
 

 

© Cisco Systems, Inc.   Introduction to UCS User Interfaces 3-10 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—10

Content Pane Details

Actions for 
selected 
object in 
NAV Pane

Fault 
summary 
for selected 
object in 
NAV Pane

Bread 
Crumbs 
View for 
Content 
Pane

Content 
Pane tabs 
for 
selected 
object 

(different 
for each 
object)

UCS 
Manager 
control 
buttons

 

 

Content Pane Details 

 

Content Pane is designed to show you information of an object you select in the Nav 

Pane. Any changes to the object will be done in the Content Pane. There are a series of 

tabs near the top of the Content Pane, and depending on which you select it will allow 

you to monitor or change the characteristics of the object. As an example if you wish to 

change the firmware, then the “installed firmware” tab would be the tab you select. 
 

In addition to the Content Pane tabs, there is also a actions menu where you can 

perform a given action for the item.  

 

Included in the content pane are also the fault summary for the object, a “bread crumb” 
view to indicate where in the Nav Pane you are and buttons for controlling UCS 

manager settings.  

 

 

  



 
 

 

3-11   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—11

Example Content – Tabs and Sub-Tabs 
(Physical Server RAM)

 

 

Example Content – Tabs and Sub-Tabs (Physical Server RAM) 
 

This is just a nice example of the cascading tabs sometimes available on the content 

pane.  This is the content pane associated with (highlighting) a physical blade server on 

the nav pane.  The Inventory tab gives a set of sub-tabs which have all the auto-

discovered hardware information about the blade, including the position, size, and 

clock speed of each DIMM.  None of this particular information is configured 

manually, it is all discovered automatically. 

 

 

  



 
 

 

© Cisco Systems, Inc.   Introduction to UCS User Interfaces 3-12 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—12

Command Line Interface

UCS
Command Line

Interface

 

 

 

  



 
 

 

3-13   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—13

Management Command (?) 

 

 

Management Command (?)  

 

You can always use the question mark to see commands available in a particular 

context.  If you are in the middle of typing a command (at a new word boundary), you 

can use “?” to see the set of subcommands available in the exact context in which you 
are typing. 

 

 

  



 
 

 

© Cisco Systems, Inc.   Introduction to UCS User Interfaces 3-14 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—14

Management  Commands (show ?)

 

 

Management  Commands (show ?) 

 

This is an example of “?” in the “middle of command” context.  Note the “scope 
context” (discussed on subsequent slides) is also taken into account. 

 

 

  



 
 

 

3-15   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—15

Management Commands (scope ?)

 

 

Management Commands (scope ?) 

 

The scope command is used to change the focus of the object to be operated upon. This 

will allow the traversing of the hierarchical tree of objects and their child or parent 

objects. Don’t forget that the show command can be used in conjunction with the scope 
command to see immediately the commands available in the new position.   

 

There are parts of the “scope tree” for physical objects and other parts for logically 
configured objects.   

 

Moving around the CLI tree using scoping is analogous to using “cd” to move around a 
file system. 

 

 

  



 
 

 

© Cisco Systems, Inc.   Introduction to UCS User Interfaces 3-16 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—16

Management Commands (scope, where, up & top)

Nav Pane Navigation CLI Equivalent to Nav Pane

 

 

Management Commands (scope, where, up & top) 

 

In this slide we see the difference between the GUI Nav Pane to focus on a given 

object, and the CLI use of the scope command to focus on the same object. Notice 2 

levels are traversed and then the up command is used to ascend one level. Then the top 

command is used to return to the root level. 

 

Also of note is the use of the command “where”. Since we have to scope to the level of 
a component much like changing from one directory to another, the “where” command 
is useful in determining your location in the CLI “scope tree”. 

 

 

  



 
 

 

3-17   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—17

Command Line (show configuration)

devwasha-A# scope org /

devwasha-A /org # scope service-profile TryPXEInst

devwasha-A /org/service-profile # show config

enter service-profile TryPXEInst instance

associate server 1/8

enter boot-definition

enter lan

enter path primary

set vnic eth0

exit

set order 2

exit

enter storage

enter local

set order 1

exit

set descr ""

set enforce-vnic-name no

set reboot-on-update yes

exit

enter default-behavior vhba

set action none

exit

............

 

 

Command Line (show configuration) 

 

“show configuration” is a special command.  It goes down recursively from the scope in 
which it is typed, and shows the configuration in the format of the commands that would 

have been used to create or administer the current state the object at the current scope and 

all sub objects. 

 

The example starts at a service profile and shows how all the recursive configuration 

underneath that service profile might have been created with CLI commands.  The output 

is a reverse engineering of the CLI commands because the configuration is not really 

stored as a set of CLI commands (it is stored in XML). 

 

 

 

  



 
 

 

© Cisco Systems, Inc.   Introduction to UCS User Interfaces 3-18 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—18

Management Commands (create and delete)

devwasha-A# scope org /

devwasha-A /org # create org marketing

devwasha-A /org* # commit

devwasha-A /org # top

devwasha-A# show org

Organizations:

Name

----

/ (root)

/marketing

devwasha-A# scope org /

devwasha-A /org # delete org marketing

devwasha-A /org* # commit

devwasha-A /org # top

devwasha-A# show org

Organizations:

Name

----

/ (root)

 

 

Management Commands (create and delete) 

 

When you actually modify the configuration, using “create” and “delete” and other 
commands, you must commit your changes, as shown, to actually make the configuration 

(the equivalent on the GUI is pressing an “confirm” button). 
 

The opposite of “commit” is “discard” --- this will discard all your changes since the last 
commit. 

 

 

 

  



 
 

 

3-19   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—19

Connect commands 

UCS 
Software

 

 

 

  



 
 

 

© Cisco Systems, Inc.   Introduction to UCS User Interfaces 3-20 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—20

Management command (connect)

devwasha-A# connect ?

adapter     Mezzanine Adapter

bmc Baseboard Management Controller

clp Connect to DMTF CLP

iom IO Module

local-mgmt  Connect to Local Management CLI

nxos Connect to NXOS CLI

 

 

Management command (connect) 

 

The “connect” command really takes you into one of the other shells available in the 
CLI.  We will focus on the “local-mgmt” shell and the “nxos” shell, however here is a 
summary of what these connect shells do: 

 

Adapter 

Allows a local connection to the mezzanine adapter on a given blade. Syntax, connect 

adapter 1/1/1 (Chassis 1 / server 1 / Adpater 1). This would be used only for 

troubleshooting. 

 

BMC 

Baseboard Management Controller is an ASIC on the mother board of each blade. This 

allows you to connect to the BMC (which has a running Linux kernel) and perform 

basic information gathering from the BMC. Syntax, connect bmc 1/1 (Chassis 1 / 

Server 1). 

 



 
 

 

3-21   UCS Foundations  © Cisco Systems, Inc. 
 

CLP 

Connects you to a shell for the SMASH (Systems Management Architecture for Server 

Hardware) CLP (Command Line Protocol). If you have a customer who uses this 

protocol they can interface to the UCS and collect information about the many 

components and what their status is. The connect command puts you in a shell that 

accepts SMASH CLP commands. At present it is limited in the scope of commands you 

can run, mostly being the show command. 

 

IOM 

 I/O Module also has an ASIC running a linux kernel. Through the connect command 

you can connect to the IOM similar to doing a ssh session to a linux server. You will 

have a limited number of commands you can run, but this can be useful for 

troubleshooting problems on an IOM. 

 

Local-mgmt 

Local management allows the user to run commands that allow for maintenance 

activities to be done on the 6120 including things like show tech-support and erasing 

the current database. 

 

NXOS 

connects to the underlying NXOS CLI. From here users can run typical NXOS 

commands and examine connectivity through the 6120. 

 

 

 

 

  



 
 

 

© Cisco Systems, Inc.   Introduction to UCS User Interfaces 3-22 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—21

Management commands (connect local-mgt)

devwasha-A# connect local-mgmt

Cisco UCS 6100 Series Fabric Interconnect

TAC support: http://www.cisco.com/tac

Copyright (c) 2009, Cisco Systems, Inc. All rights reserved.

devwasha-A(local-mgmt)# ?

cd Change current directory

clear             Reset functions

cluster           Cluster mode

connect           Connect to Another CLI

copy              Copy a file

cp                Copy a file

.

.

ping              Test network reachability

pwd View current directory

reboot            Reboots Fabric Interconnect

rm Remove a file

rmdir Remove a directory

run-script        Run a script

show              Show running system information

ssh               SSH to another system

.
 

 

Management commands (connect local-mgt) 

 

“local-mgmt” tasks are mainly tasks associated with the particular fabric interconnect on 
which you are typing, rather than on the UCS configuration as a whole.  For example, 

you do not reboot the entire UCS; instead you can reboot (from the local-mgmt shell) a 

particular interconnect (the one on which you are typing). 

 

 

  



 
 

 

3-23   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco, Inc. All rights reserved. DCTC v1.0—22

Management commands (connect nx-os)

devwasha-A# connect nxos

Cisco UCS 6100 Series Fabric Interconnect

TAC support: http://www.cisco.com/tac

Copyright (c) 2009, Cisco Systems, Inc. All rights reserved.

devwasha-A(nxos)# sh run int e1/1/1

version 4.1(3)N2(1.1)

interface Ethernet1/1/1

switchport mode trunk

switchport trunk allowed vlan none

no pinning server sticky

fabric-interface Eth1/7

no cdp enable

no shutdown

 

 

Management commands (connect nx-os) 

 

The “connect nxos” command allows for connection to the NXOS shell. This provides 
the user with the full set of “show” command functionalities associated with the 
underlying nxos on the fabric interconnect on which you are typing. 

 

You do not  have access to any nxos configuration commands.  The nxos shell is “show 
and tell” only.  Actual management is always accomplished using the UCS manager. 

 

 

 

 



 
 

Lesson 4 

Using Blade Servers with 

the Opt-in Models 

Overview 

This module discusses full usage (installing, booting, accessing) of the UCS 
blade servers using the basic opt-in model and the stateless model.   

Objectives 

The specific objectives of this lesson are to enable you to perform the following 
tasks: 

• Identify the Relationship between blade servers and service profiles 

 Review the  primary purposes of service profiles 

 Create a simple service profile for a single blade with appropriate vNIC 

 Use the expert wizard 

 Understand association 



 
 

 

4-1   UCS Foundations  © Cisco Systems, Inc. 
 

 
© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 1

Service Profiles and 
the Opt-in Model

 

 

 

Using Blade Servers with the Opt-in Models 

 

This module discusses full usage (installing, booting, accessing) of the UCS blade 

servers using the basic opt-in model and the stateless model.   

 

The first paradigm, the method is to use each blade server as a traditional server. The 

second will show this same profile taking advantage of the “service profile mobility” 
and blade pooling models, or statelessness. 

 

One main theme of this module is that the “Service Profile” configuration, whose 
design is intended to support mobility and pooling, is still required even if you want to 

boot, install, and use an individual blade as you would use  a traditional server. 

 

 

  



 
 

 

© Cisco Systems, Inc.  Using Blade Servers with the Opt-in Models 4-2 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 2

Lesson Objectives

• Identify the Relationship between blade servers and service profiles

• Review the  primary purposes of service profiles

• Create a simple service profile for a single blade with appropriate 
vNIC

• Use the expert wizard

• Understand association

 

 

In this lesson Students will: 

 

• Identify the Relationship between blade servers and service profiles 

• Review the  primary purposes of service profiles 

• Create a simple service profile for a single blade with appropriate vNIC 

• Use the expert wizard 

• Understand association 

 

 

 

  



 
 

 

4-3   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 3

Service Profiles and Blade Servers

Service Profile: 

ls-RH53Oracle
Physical 

Blade: 5

Identity

(MAC Address, 

WWN, Etc.)

Behavior

(Firmware, 

QoS, Etc.)

Other

(vNICs, 

vHBAs, Etc.)

Associated to

=

Client Server: 

RH53Oracle

 

 

Service Profiles and Blade Servers 

 

Understanding the service profile, or “logical server” is key to understanding blade 
management on UCS. 

The service profile represents a logical view of a single blade server, without needing to 

know exactly which blade you are talking about.  The profile object contains the server 

personality (identity and network information and the like, as discussed on later slides) 

and connectivity requirements.  The profile can then be associated with a single blade at a 

time. 

 

The concept of profiles was invented to support the notion of mobility --- or transferring 

of identity transparently from one blade to another, as well as pooling concepts discussed 

in detail in the next module. 

 

Even if you intend to manage the blade server as a traditional individual server (not 

taking advantage of mobility or pooling) you still have to create and manage a service 

profile for the blade.  While you could boot a blade without a service profile, it would 

have no network or SAN connectivity. 

 

 



 
 

 

© Cisco Systems, Inc.  Using Blade Servers with the Opt-in Models 4-4 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 4

Blade Mobility with Service Profiles 

Blade Failure

Identity
LAN/SAN

Config

Service Profile: 
MyDBServer

Time A

Time B

 

 

Blade Mobility with Service Profiles  

 

This graphic is just intended to review the concept of logical server mobility.  A logical 

server is defined with identity (e.g. UUID, MAC/WWN addresses, VLAN/VSAN 

requirements).  The profile can be associated with only one blade at a time, but the 

association can be changed if there is a problem with a particular blade, or hardware 

maintenance required on a particular blade. 

 

The mobile logical server concept works well when the blade’s OS and data reside  on 
external SAN storage.  A “replacement blade” for the profile will inherit the 
WWN/VSAN information  and boot specifications from the profile just like the original 

blade.  From the point of view of the LAN/SAN infrastructure, the new blade is the 

same server as the old blade, and it will be exposed to and boot the exact same SAN 

LUN’s without any further reconfiguration. 
 

Blade local disks in this scenario could still be used for temporary storage and/or swap 

space. 

 

 

  



 
 

 

4-5   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 5

Service Profiles: Multiple Servers

Blade Failure

Profile A1
Time A

Time A
Profile A2

 

 

Service Profiles: Multiple Servers 

 

Every blade that is booted simultaneously must  have its own service profile, even if in 

your mind the profiles are very similar (exact same connectivity requirements, for 

example). 

 

There are two  easy ways to create large numbers of very similar service profiles: 

cloning and templates. These will be discussed in more detail in the next module. 

 

 

  



 
 

 

© Cisco Systems, Inc.  Using Blade Servers with the Opt-in Models 4-6 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 6

Contents of a Service Profile

• UUID/WWNN
• Boot order
• Other Policies

 

 

Contents of a Service Profile 

 

This is just a summary of the contents of a service profile.  Examples of blade identity 

information unrelated to specific network or disk adapters are the UUID and World Wide 

Node Name. The profile also holds network adapter identity information.  All of this 

information is physically applied to the blade associated at a particular time with the 

profile.  In this manner, blades associated with a particular profile at different points in 

time are indistinguishable from one another, from the point of view of any identity 

information for the purpose of licensing schemes or network and external storage 

configuration. 

 

 

  



 
 

 

4-7   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 8

Creating a Service Profile (GUI)

Look at simplified wizard later...

 

 

Creating a Service Profile (GUI) 

 

There are two wizards for creating service profiles, the expert wizard and the simplified 

wizard. It is helpful to step through the expert wizard in order to understand the nature 

of the service profile.  

 

 

 

  



 
 

 

© Cisco Systems, Inc.  Using Blade Servers with the Opt-in Models 4-8 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 9

Service Profile

 

 

Service Profile 

 

This screenshot shows the first page of the service profile creation process.  You must set 

a unique name for the profile and an optional description. 

 

The UUID can be virtualized (more about this in the next module) or just set to the 

Hardware Default, which is sufficient for a basic service profile. 

 

 

  



 
 

 

4-9   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 10

Service Profile: Storage

We’ll Focus on it more in next module

 

 

Service Profile: Storage 

 

The body of the storage section focuses on SAN connectivity via vHBA.  We will focus 

more on that, and on the local storage and scrub policies, in the next module.  In the 

module, for simplicity’s sake, we will be creating service profiles without SAN 
connectivity. 

 

 

  



 
 

 

© Cisco Systems, Inc.  Using Blade Servers with the Opt-in Models 4-10 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 11

Service Profile: Networking

Simple sub-wizard ---1 vNIC per fabric

Single native VLAN per vNIC

 

 

Service Profile: Networking 

 

The Networking page has single and expert “sub-modes”. 
 

The simple “sub-network-wizard” allows creation of up to two vNIC’s, and lets you 
choose a single Native VLAN for each (but no more VLAN’s).  It also does not let you 
choose a virtualized identity.  This is sufficient for physical adapter cards (it can use the 

hardware default as the identity), but will have to be changed for Palo cards which 

require a virtualized nic identity. 

 

Note that this simple sub-wizard only allows you to create one vNIC per fabric.  If you 

do not have a redundant fabric interconnect (as in the system on which the screenshot 

was taken), you only have a single fabric. 

 

 

  



 
 

 

4-11   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 12

Service Profile: Networking (expert)

 

 

Service Profile: Networking (expert) 

 

The expert “sub-network-wizard” allows you to invoke the detailed form for each 
vNIC. This is the form we saw in the previous module.  You can specify a virtualized 

MAC address, and trunk as many VLANs as you like to the vNIC, with at most one 

being native.You could also optionally choose a pin group. 

 

 

  



 
 

 

© Cisco Systems, Inc.  Using Blade Servers with the Opt-in Models 4-12 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 13

Service Profile: vNIC Placement

 

 

Service Profile: vNIC Placement 

 

This piece of a service profile is meaningful only when association with a blade with 

two physical adapters (B250 full-width blade).  It lets you specify with which physical 

adapter each of your vNIC definitions should be associated.  You can choose to let the 

UCS Manager automatically perform placement.   

 

 

  



 
 

 

4-13   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 14

Service Profile: Boot Order

 

 

Service Profile: Boot Order 

 

Boot order lets you specify the boot priority as a “virtualized configuration” in service 
profile – this boot order will be applied to the BIOS of the specific blade server as the 
service profile is associated. 

 

It is still possible to set the boot order manually by escaping into the BIOS control 

screen as you can on any traditional server.   

 

 

  



 
 

 

© Cisco Systems, Inc.  Using Blade Servers with the Opt-in Models 4-14 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 15

Service Profile: Server Assignment

 

 

Server assignment is optional in the wizard. 

 

It is probably best practice, especially with complicated service profiles, to skip server 

assignment in the wizard (or if you get to this page, leave it at “assign later”), and 
examine and massage your service profile as a strictly logical configuration before 

actually assigning to a blade. 

 

On this screen you can also specify whether you want the physical server to be left 

powered down after the actual service profile association process, or whether you want 

UCS manager to automatically boot the server (using the boot priority specified by the 

boot order), after the actual association process.   

 

 

  



 
 

 

4-15   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 16

Service Profile: Policies

 

 

Service Profile: Policies 

 

We will talk about many of the policies to which you can refer from a service profile 

near the end of the next module.  It is fine to click “finish” before you reach this page 
for now, or just not interact with this page. 

 

 

  



 
 

 

© Cisco Systems, Inc.  Using Blade Servers with the Opt-in Models 4-16 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 17

Simplified Wizard

 

 

Simplified Wizard 

 

The simplified wizard for creating service profiles works well with the basic opt-in 

model.  The wizard will produce a service profile with the basic characteristics outlined 

on the slide. If you want to customize the service profile once the wizard is finished 

(add more vNIC’s, attach vNIC’s to different or multiple VLAN’s, etc.) you could still 
do so. 

 

 

 

  



 
 

 

4-17   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 19

Profile: Created but not Assigned or 
Associated

 

 

Profile: Created but not Assigned or Associated 

 

The screenshot shows our profile.  We have not yet specified any blade to associate with 

the profile, so the Selected Blade and Associated Blade fields are blank. 

 

 

  



 
 

 

© Cisco Systems, Inc.  Using Blade Servers with the Opt-in Models 4-18 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 20

Associating Blade

Actually two step process (but all done with 
“Associate” command):

1. Assigning blade to service profile (just a UCS config)

 Could still fail if blade not compatible with profile

2. Blade Configuration through PnuOS

 

 

Associating Blade 

 

When you give the command to associate a blade, UCSM first tries to assign the blade to 

the configuration.  This does nothing to modify the blade itself. However the assignment 

still checks that a blade is compatible with a profile.  If it is not compatible, it will fail. 

 

Examples of incompatible blades: 

 

• Too few physical network adapters for number of vNICs 
• vNIC specified for failover but you have an Oplin in the blade 
• vNIC specified for failover, but you have only one fabric interconnect 
• vHBA specified, but you have an Oplin 

 

Once the blade is successfully assigned, the actual association configuration process 

begins. This involves UCSM causing a mini-OS called PnuOS (processing node utility 

OS)  to be booted on the blade. 

 

 

  



 
 

 

4-19   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 22

Associating Blade with Profile

 

 

Associating Blade with Profile 

 

As depicted in the screenshot, you use the Change Service Profile Association to access a 

form to select the blade.  When committed, this will initiate the assignment and 

association of the blade. 

 

The “Pre-provision a slot” is interesting in that it allows you to choose to “pre-associate” 
a service profile with an empty slot.  When a blade server is actually inserted into that 

slot, it will undergo automatic discovery, and then UCS Manager will automatically try to 

associate the service profile with the blade server (there is no guarantee, still, that the 

service profile and new blade server are compatible). 

 

 

  



 
 

 

© Cisco Systems, Inc.  Using Blade Servers with the Opt-in Models 4-20 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 23

Profile Assigned and Associating

 

 

Profile Assigned and Associating 

 

The GUI indicates that the selected blade is successfully assigned. There were no 

incompatibilities between the blade and the profile.  It is in the process of associating.You 

could just wait for the association to complete (the state will change to associated).  You 

could also already access the blade console and actually watch it booting PnuOS, just to 

make sure everything looks normal. 

 

 

  



 
 

 

4-21   UCS Foundations  © Cisco Systems, Inc. 
 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 25

Booting a Blade from Virtual Media

 

 

Booting a Blade from Virtual Media 

 

The KVM, together with the virtual media sub-feature discussed in an earlier module, are 

the “manual” way to install an OS on a blade server that has a service profile. 
 

Note once we configure networking in the OS we are likely to have less need for the 

KVM console since we can just access the OS over the network (Remote Desktop for 

Windows, for example).    

 

 



 
 

 

 

 

Module 2: UCS Resources 



 
 

Lesson  1  

UCS Pools, Policies, and 

Templates Overview 

Overview 

This lesson is designed to introduce you to various forms of applications and application 

services you can implement with VMware. By understanding these and how you would 

implement them on a UCS you will better understand customer needs when they plan to 

use VMware on UCS. 

Objectives 

In this lesson you will: 

 Examine Data Center infrastructure change 

 Describe the facilities in the UCSM that allow for stateless computing 

 Summarize UCS model organizational model 

 Describe uses of the UCS in a computing infrastructure 

 

  



 
 

 

1-1   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—2

Describe Data 
Center Architecture 
Evolution

In this section we will define how the movement of the compute 
architecture is moving toward a service oriented architecture or cloud 
computing. Students will learn:

• Describe the movement toward cloud computing
• Define the nature of cloud services
• Describe key technologies needed to support cloud adoption

 

Examine data center infrastructure change 

In this section we will define how the movement of the compute architecture is moving 

toward service oriented architectures or cloud computing. Students will learn: 

 Explain the transition to a cloud based architecture over other compute models 

 Describe the nature of different cloud service 

 Describe challenges faced by cloud architectures  

  



 
 

 

© Cisco Systems, Inc.  Overview of Pools, Policies, and Templates in UCS1-2 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 3

Describe Movement Toward Cloud Computing

1960 1970 1980 1990 2000 2010

Mainframe

Mini Comp

Client Srv

Web

Virtualization

Cloud

 

Describe movement toward cloud computing 

Historically if we look to how compute architectures have changed, many folks would 

say that they seem to be going back to a model very similar to Mainframe computing. In 

Mainframe computing the compute architecture is in a central location and on a single 

platform accessed by a limited number of terminal devices. This had many advantages in 

that a single compute platform could supply applications to a multitude of people as long 

as they could connect to mainframe through a terminal. In those times few workers 

needed access to this type of computing so the model worked effectively.  

As workers began to use computers more (word processing, spread sheets, email) the 

need for more power for the user, more standardized applications, and feature rich work 

environments, pushed more of the computing out to the user in the form of high powered 

workstations, leaving centralized servers to provide smaller services that were common to 

most workers (like printing). This works well except that things begin to become a 

challenge when workers are not located in the same facility, forcing expensive and 

complex networking be setup to provide this access. 

The web helped a lot with these challenges by providing an easy way to begin to provide 

more complex applications and services through common portals and browsers. This 

made access to service extremely easy to implement, but exploded the datacenter 

infrastructure in terms of the amount of equipment, man power, and management 

software to glue this all together. 



 
 

 

1-3   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

Cloud offers the next step in the architectural revolution by changing the infrastructure to 

be on demand or when you need it. A service could be created and architected through the 

cloud automatically when a user logged into the cloud based on their profile. In order to 

be able to provide this in a cost effective fashion without causing the data center to 

explode more and become more complex, businesses are relying on new and maturing 

technologies to help provide the needed agility to do these services. This means that from 

a physical infrastructure perspective, compute, networking, and storage all have to be 

able to be dynamically provisioned at the time it is needed and to have that same 

infrastructure torn down or changed as new services are requested. This also means that 

managing these services will require tight software integration with each of the varying 

vendors supplying components to this infrastructure.  

  



 
 

 

© Cisco Systems, Inc.  Overview of Pools, Policies, and Templates in UCS1-4 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 4

Define the Nature of Typical Cloud Services

Platform as a Service:
Providing data center infrastructure via the 
cloud

Cloud 
Computing

IaaS

Infrastructure as a Service
Providing infrastructure for cloud based services.

Software as a Service:
Providing software infrastructure via cloud

Management
• 3Tera
• RightScale
• Scala
• Vertabra

Applications
• SalesForce
• Gmail
• BaseCamp
• Square Space

Platforms:
• Python – Google 
App Engine
• Facebook
• Appistry
• Force.com

Service Providers
• Amazon Web Services
• Joyent
• Flexiscale

 

Define the nature of typical cloud services 

Today cloud computing is still being defined. Currently the variants as to types of 

services can be broken down into 3 categories: 

 PaaS – (Platform as a Service): Platform as a Service delivers a computing 

platform and/or solution stack as a service, often consuming cloud infrastructure 

and sustaining cloud applications  

 SaaS – (Software as a Service): SaaS Using the “network” to provide applications 

to customers either as a service on demand, through a subscription, or at no 

charge. This approach to application delivery, has all of the technology is in the 

"cloud" accessed over the Internet as a service. 

 IaaS – (Infrastructure as a Service): Infrastructure services deliver computer 
infrastructure as a service. Rather than purchasing servers, software, data-center 

space or network equipment, clients instead buy those resources as a fully 

outsourced service.  

While these are purely definitions, none of these translate perfectly into a given solution. 

What is meant by this is that most cloud based solution customers develop will contain 

within them elements of each of these types of services. Take virtual desktop 

infrastructure could be said to be PaaS service, however it may also deliver applications 

to the desktops through a SaaS type of cloud service. In this case the VDI solution is 

using cloud elements from both categorizations. 



 
 

 

1-5   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 5

Describe Key technologies Needed to Support 
Cloud Adoption

Platform Virtualization UCS Features:
• Hardware Abstraction with 

Service Profiles
• Unified Fabric with FCoE
• Pools, Policies, and Templates 
• Easy Management integration 

with XML api

 

Describe Key technologies needed to support cloud adoption 

Whatever the solution the cloud based services will rely on some key technology 

changes: 

 Virtualizations: For the ability to provide server infrastructure in a dynamic 
fashion make provisioning easier, faster, and more flexible. Additionally compute 

resources and network infrastructure can be use more efficiently. 

 Platforms and Networks designed for virtualized workloads. Specifically UCS is 
Ideal for a number of reasons: 

o Hardware Abstraction with Service Profiles 

o Unified Fabric with FCoE 

o Pools, Policies, and Templates  

o Easy Management integration with XML API 

  



 
 

 

© Cisco Systems, Inc.  Overview of Pools, Policies, and Templates in UCS1-6 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—6

Describe How UCS
is Designed for 
Utility Computing

In this section we will look at key enabling technologies that allow the UCS 
to be an ideal compute platform for cloud based architectures. Students will 
learn the following:

• Define challenges faced by current compute platforms
• Define How Virtualization and the UCS are Ideal for Cloud Architectures 
• Describe benefits of service profiles
• Explain contents of a service profile
• Describe how Pools work with service profiles
• Describe how Policies work with service profiles
• Describe how Templates work with service profiles
• Explain who creates resource sin UCSM
• Summarize the UCSM organizational Model
• Explain how resources are consumed and returned

 

Describe How UCS is Designed for Utility Computing 

In this section we will look at key enabling technologies that allow the UCS to be an 

ideal compute platform for cloud based architectures. Students will learn the following: 

 Define challenges faced by current compute platforms 

 Define How Virtualization and the UCS are Ideal for Cloud Architectures  

 Describe benefits of service profiles 

 Explain contents of a service profile  

 Describe how Pools work with service profiles  

 Describe how Policies work with service profiles 

 Describe how Templates work with service profiles 

 Explain who creates resource sin UCSM 

 Summarize the UCSM organizational Model 

 Explain how resources are consumed and returned  



 
 

 

1-7   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 7

Define Challenges Faced by Current 
Compute Platforms

Solution
“A”

Server Team
• Implements 

Servers
• Manages Servers
• Consumes 

resources from 
SAN and LAN 
teams 

SAN Team
• Implements data 

center storage  
solutions

• Manages storage 
network

• Creates the 
storage 
consumed by 
solutions

LAN Team
• Implements data 

center network  
solutions

• Manages network 
policies control 

• Creates network 
controls 
consumed by 
Server Team

Current Challenges
• Have to coordinate 

these groups
• Implementation is in 

days / weeks
• Troubleshooting is a 

challenge
• Knowledge in 

protected silos

 

Define challenges faced by current compute platforms 

Typical compute platforms present a number of challenges in a utility/cloud compute 

model. The greatest of these is agility of your platform and the flexibility. Keep in mind 

that most data center infrastructures are still today created from 3 different groups: 

 Server – Handle the server hardware configurations, and software configuration. 

Produce the servers consumed by application and solution designers. 

 Network – Produces network infrastructure and applies polices, ACL, and other 
types of configurations to ensure security, compliance, and bandwidth as needed 

for a solution. Server folks consume network resources as part of the server 

configuration. 

 Storage – In charge of configuring and deploying storage for the servers used in a 

given solution. They produce the LUNs, volumes, and blocks used to store data 

centrally, this is then consumed by the server group for the given solution. 

We all know that these three very different groups have to work together in order to 

provide the solution in its entirety to the consumers or workers. Because of this, much 

time can be taken up in the coordination and communication between these groups, thus 

making this model not nearly agile enough to be able to provide “X” as a Service in a 
cloud based architecture. 

  



 
 

 

© Cisco Systems, Inc.  Overview of Pools, Policies, and Templates in UCS1-8 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 8

Define How Virtualization and the UCS are 
Ideal for Cloud Architectures

Platform Virtualization
• VM Machine deploy on hypervisor
• Hypervisor cretes virtual environment
• Enables business continuity features
• Fast deployment (cloning / host 

profiles)

UCS Features
• HW abstraction with service 

profiles
• Profiles can be moved around 

easily
• Profiles can associate to any 

blade
• Profiles completely abstract –

Identity, behavior, network 
configuration

 

Define how virtualization and the UCS are ideal for cloud 

architectures 

Virtualization aids tremendously in the ability of a given data center to be agile and able 

to deliver infrastructure as needed or on-demand. This is because much of the customized 

infrastructure needed for a solution is created virtually by the hypervisor and managed by 

the hypervisor. This means a few things: 

 Faster provisioning – Through the use of things like host profiles and the fact that 

the compute infrastructure is totally virtualized by the hypervisor, a server now 

can be deployed in minutes rather than weeks with a consistent install. Add also in 

that can clone existing servers, cluster them, and provide even fault tolerance 

virtually this is a very key technology required for cloud. 

 Common management – Since everything is virtualized, all components behind 
the hypervisor can be managed by the same management software. For larger 

enterprise deployments additional orchestrating management software can be 

bolted on.  

While this works well for the compute platform the applications run on, the hypervisor 

still relies on a physical compute, network, and storage infrastructure that will still have 

many of the same challenges presented in the previous page. 

The UCS helps with these underlying challenges of the physical infrastructure through a 

number of features incorporated to the UCSM: 



 
 

 

1-9   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 Network and compute managed as a single system 

 Unified fabric reduction of redundant network infrastructures 

 10 GbE connectivity  

 Service Profiles for hardware personality abstraction 

 Creating of resource pools, profile for components and services, policies for 
compliance and control 

 Easy integration to the UCSM XML API for custom management, monitoring, 
and control 

Specifically in this lesson we will focus on the Pools, Policies, and Templates (PPT), and 

how these are consumed by service profiles to give the physical infrastructure the agility 

and flexibility it needs for a cloud based architecture. 

  



 
 

 

© Cisco Systems, Inc.  Overview of Pools, Policies, and Templates in UCS1-10 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 9

Describe Benefits of  Service Profiles

Server, Storage & Network admin group:
 Pre-configure 100s of servers up-front using “server 

profiles” 
– Firmware bundle
– BIOS and adapter settings
– Boot order and parameters
– LAN connectivity
– SAN connectivity

 Deploy physical servers as needed over time

 Plan and pre-configure once
– Collaborative server, storage & network planning and configuration

 Enables “pay-as-you-grow” incremental deployment
– Server admin can deploy servers any time in any increments 
– Incremental deployment is non-disruptive

 Server replacement - simply replace the physical blade

 

Describe benefits of Service Profiles 

In order to understand how the UCS utilizes pools, policies, and templates it helps to 

understand what consumes them and why. The service profile is ultimately what 

consumer of pools, policies, and templates. 

The service profile is the identity, network configuration, and behavior characteristics of 

the server abstracted from the hardware and stored in UCSM on the fabric interconnects. 

This information, called a service profile, is applied to a physical blade through the 

process called “Associating”. During this process the blade does an initial boot where 
through the use of PXE and TFTP a small bootable image called the UUOS (UCS Utility 

Operating System) is booted on the blade, and with the use of the CIMC and an agent it 

configures the blade based on the information in the service profile defining its identity, 

networks, and behavior characteristics. Once this completes the service profile is then 

booted on the blade as a normal server would boot. 

The results of this abstraction are some very important facts: 

 You can clone and make service profiles easily and quickly. 

 As long as a physical blade has the correct resources for a service profile, that 

profile can associate with it no matter what chassis it is in. 

 Recovery from a failure, the reuse of compute resources, and the ability to rapidly 
deploy new profiles and associate them is key principle to cloud, and UCS service 

profiles are the heart of this capability.  



 
 

 

1-11   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 10

Explain the Contents of the Service Profile

Default

Templated

Manual

Identity

(MAC Address, 

WWN, Etc.)

Behavior

(Firmware, 

QoS, Etc.)

Connectivity

(vNICs, 

vHBAs,)

Configuration 

Methods
Service Profile Physical 

Blade

 

Explain the contents of the service profile 

Service profiles and the contents of them can be broken down into 3 categories: 

 Identity – Items like, MACs, WWNs, UUIDs,  

 Network – Adapters types, number of adapters , and connectivity characteristics 
of these adapters 

 Behavioral – The type of BIOS, firmware packages, various policies (i.e. QoS 
policy for specific adapters. 

These items are placed in the service profile at the time of its creation. By this point you 

have likely used UCSM and have created a service profile. It is a very straight forward 

step by step process that most people in the server world would feel comfortable with. 

For a single service profile this is not hard to do and takes little time, however in a cloud 

based architecture this needs to be done rapidly and on-demand. So entering these 

individually would not be practical or possible. 

To overcome this, the UCS utilizes a series structures which to organize resources: 

 Pools: These are used typically a resource that is linked to either a specific 
identity characteristic or physical commodity. Like blades as an example or 

UUIDs 

 Policies: These are typically used to enforce specific behaviors like CoS 
parameters on one dynamic vEth versus another. 



 
 

 

© Cisco Systems, Inc.  Overview of Pools, Policies, and Templates in UCS1-12 

 Templates: Used to simplify creation of a service profile or virtual adapters by 

defining common characteristic shared amongst service profiles. An example of 

this would be a dynamic vNIC template.   



 
 

 

1-13   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 11

Describe How Pools Work with Service Profiles

blade pool 
policies

qualifications blade pools blades

P1

P3

C1S1

C1S1

C2S3

C3S4

C1S1

C4S8

adapters 

memory

storage

adapters

CPU

memory

P2

 

Describe how pools work with service profiles 

Pools are containers of shared resources for a service profile. This container is created by 

the appropriate user with permissions in the given area (Servers, Network, and Storage). 

For example you can have a user with the role of a storage admin, and as such storage 

related pools would be an item they would be engaged with creating. 

Service profiles consume resources from pools by the pool being assigned to the profile 

in place of a specific item. By referencing the pool for the resource, the service profile at 

the time of instantiation will go to the assigned pool or hierarchy of pools to claim a 

given resource. The resource, once claimed, cannot be assigned to any other service 

profile. The resource can however be reclaimed if the service profile is assigned another 

resource or if the service profile is deleted. Resources are claimed from pools in reverse 

lexi-graphical order meaning by the least common characteristic first. Once a resource is 

released it goes back into the pool and is available to another service profile. 

A great example of this and on that is easy to understand is blades. Blades can be placed 

into pools and those pools assigned to service profiles. At the time of instantiation a blade 

will be claimed from the pool. One it is owned the server can be booted and rebooted 

over and over again as it owns the blade now exclusively. When the service profile is 

disassociated from the blade, the blade returns to the pool and is available for the next 

service profile to claim it. 

Pools can also be used to segment resources in that you can have different pools of 

different names to better organize resources. 



 
 

 

© Cisco Systems, Inc.  Overview of Pools, Policies, and Templates in UCS1-14 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 12

Describe How Policies Work with Service 
Profiles

Ethernet Adapter Policy

Tx- queues
Rx – queues
Completion queues

BIOS Policy

Quiet boot
Hyper-threading
VT-technologies

Characteristics:
• Consumed at instantiation 

of Service Profile (SP)
• Linked to specific 

components of SP
• Are usable through 

multiple Organizations
• Allow update of policy to 

apply to those SP that 
consume it

 

Describe how policies work with service profiles 

Policies typically describe behaviors for items in the UCS. The idea is that if you have a 

particular server in mind, for example a vmware ESX host, it is likely that you have 

configurations in the service profile to best define how the ESX will be configured for the 

network. For example you could create 2 adapter policies for the vEths, one for 

production traffic based on criteria needed for the solution, and the other for non 

production traffic like management. Each may have different QoS and attachment 

characteristics. By putting these into a policy it can be applied over and over again to 

other adapters, or easily modified when needed.  

Policies can be consumed by service profiles or other profile types in UCSM.      

  



 
 

 

1-15   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 13

Describe How Templates Work with Service 
Profiles

Service Profile 
Template: 
OracleServer

• UUID: OracleUUPool
• Boot Order: OrcBootPolicy
• Host Firmware: 

OrcFWPolicy
• SOL: SOLPolicy
• WWNN: OrcWWNNPool

Adapter Policy: Eth0
VLAN: Oracle
Fabric: A
MAC: OrcMacPool

Adapter Policy: fc0
VSAN: Oracle
Fabric: A
WWPN: OrcWWPNPool

Service Profile:ORC10gRAC-1

Service Profile:ORC10gRAC-4

• UUID: 10:02:03:04:05
• Boot Order: VM / SAN 

Target 50:00:00:34:FA
• Host Firmware: 

9.0.03.146
• WWNN: 20:00:00:00:10
• WWPN: 20:00:00:00:20
• MAC: 20:03:CA:00:05

• UUID: 10:02:03:04:F3
• Boot Order: VM / SAN 

Target 50:00:00:34:FA
• Host Firmware: 

9.0.03.146
• WWNN: 20:00:00:00:50
• WWPN: 20:00:00:00:40
• MAC: 20:03:CA:00:FA

 

Describe how templates work with service profiles 

Templates help in eliminating the need to create items in UCSM over and over again as a 

manual process. By taking the elements that make up a given object, a server for 

example, you construct them as part of a service profile template such that you can 

instantiate a version of the template without having to go into any of the parts of service 

profile creation you would if you were to do this manually. 

Once the template is created, all you do is tell UCSM how many of the object you wish to 

create and what will the naming prefix be for it. In the above example with service 

profiles, you could create a template specific for ESX4U1 such that any time you needed 

an ESX host, you simply would instantiate it from the same template used for your other 

hosts. 

Template in the case of service profiles can be one of 2 types: 

 Updating – If you make changes to the template, that change will propagate down 

to all service profiles still bound to the template. 

 Initial – A template used to instantiate a service profile but changes to the 
template do not get reflected down to any of the service profiles instantiated from 

the template. 

Service profiles are bound to templates they are created from. To modify the service 

profile, it must be unbound from the template. 



 
 

 

© Cisco Systems, Inc.  Overview of Pools, Policies, and Templates in UCS1-16 

Note: If you unbind a service profile from an updating template, modify 

the service profile, and then rebind it to the template all changes to the 

service profile will be lost as the template will make the service profile 

adhere to how it is configured in the template.  

  



 
 

 

1-17   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 14

Explain Who Creates Resources UCSM

SAN Team LAN Team Server Team

•VSANs
•WWPN
•WWNN
•Pin Groups

• vHBA adapt. 
Policy

• Threshold 
policies

•VLANs
•MAC Pools
•Port Channel
•Pin Groups

• vETH adapt. 
Policy

• Threshold 
policies

•Service 
Prof.
•UUID
•FW Policy
•Bios Policy

• Server
• Threshold 

policies

 

Explain who creates resources UCSM 

Resources in terms of PPT are created by administrative level users in UCSM. Admin as 

a user and a role gives the permission to create these in any of the areas of server, 

network, and storage. This however does not typically fit the current data center model of 

having these be very distinct groups with distinct roles and privileges. Because of this 

UCSM is designed to give permissions in each area to specific roles. This means you can 

have your storage people have a login and specific role that allows them to manage and 

control storage resources in UCSM like WWNs and VSANs. Network people can 

manage MAC pools, VLANs, pin groups, and port channeling by having a network role 

with UCSM.  Finally, server people can have a role that allows them to manage the 

blades, UUID, policies, and the consumption of network and storage resources.  

By doing this we preserve the same structure as most customers would have today. This 

also allows each individual group the ability to plan, provision,  and manage their 

resources in advance or dynamically through the use of category specific (Server, 

Network, Storage) pools policies and templates.   

  



 
 

 

© Cisco Systems, Inc.  Overview of Pools, Policies, and Templates in UCS1-18 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 15

Summarize UCS model organizational 
model

root (/)

SWDev

SWgrpA SWgrpB IntTest

QA

 

Summarize UCS model organizational model  

Part of how resources are consumed can be determined by how they are organized. 

UCSM provides a multi organizational model that allows for a root to have hierarchical 

branches, creating grandparents, parents, children organizations.  

Resources can be segmented from one another through the use of organizations. The UCS 

has a multi-organizational model for segmenting resources where in a resource, like a 

MAC address pool, can be only usable by service profiles belonging to the same 

organization. Combined with a hierarchical approach, where in resources belonging to 

parents and grandparents, are available to the children and grand children. The 

grandparent to all organizations is the organization “root”. So this means any resource 

pools created in the root organization would be available to any child or grandchild 

organization under root. You could then have a pool in each child organization and an 

over flow pool in root if they needed more resources during a peak time for example. 

In root and each organization you put underneath it you will find a default pools already 

created for a variety of resources. These pools are usable but contain no resources despite 

just existing. This is important to know in terms of how resources are consumed. 

A pool resource is consumed first at the level it is specified (typically this would be a 

child organization). If the pool at that level does not have any more of that resource then 

the resource will be looked for in the parent organization that has a pool of the same 

name. If it does not find any in pools of the same name all the way up to root, then it goes 

back to the child organization and looks for the resource in the default pool for that type. 



 
 

 

1-19   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

If it does not find it there it will search in the default pool for that object at the parents 

and grandparents level all the way up to root.  

  



 
 

 

© Cisco Systems, Inc.  Overview of Pools, Policies, and Templates in UCS1-20 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 16

Explain How Resources are Consumed and 
Returned

Resources
Pools / Policies

Instantiation:
•Consumes resources
•Consumes Policies
•Templates for fast deployments

Modifying or Deleting or Disassociating:
•Changes where resources are consumed
•Releases Resource back to pool
•Updating Templates

 

Explain how they are consumed and returned 

In general a resource is consumed at instantiation and is released by deletion of the object 

that consumed it, or possibly if the object that consumed the resource is modified to 

relinquish it. In the pools discussion an example of claiming a blade from a pool and 

release it was described that exemplifies this. 

Remember however that if you use multi organizational mode you can control who has 

access to specific resources. 

  



 
 

 

1-21   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—18

Describe Uses of 
the UCS in a Utility 
Computing 
Infrastructure

In this final section students will learn:

• How service profile help with HA
• How they help with scalability
• How they help with server operations

 

Describe uses of the UCS in a utility computing 
infrastructure 

In this final section students will learn: 

 How service profile help with HA 

 How they help with scalability 

 How they help with server operations 

  



 
 

 

© Cisco Systems, Inc.  Overview of Pools, Policies, and Templates in UCS1-22 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 18

Describe UCS Service Profiles and HA

Blade

Blade

Blade

Web

Blade

Blade

Blade

Oracle

Blade

Blade

Blade

VMware

Blade

Blade

With Server Profiles:

–Resources provisioned as 
needed

– Same availability with fewer 
spares

 Export & import profiles on a periodic or ad-hoc basis

 Periodic DR tests at remote site

 Hardware at DR site can be repurposed during normal operations
– Servers can be deployed for test/dev/QA at DR site

– During outage, disassociate existing profiles and associate imported production 
profiles

Enhancing High Availability

Enhancing Disaster Recovery – Ensuring Server Compatibility

 

Describe UCS service profiles and HA 

Service profiles are ideal for HA scenarios for many reasons. 

In a typical loss of a physical server, from a CPU failure as an example, the replacement 

of that server would take a considerable amount of time. This is for many reasons from 

identity issues, to behavioral like firmware or BIOS types. What would happen in this 

scenario is that the people replacing this server would have to make sure all of the 

characteristics where identical to the failed server. While it can be automated to some 

degree, this still is a challenge to manage and orchestrate as it is made up of many layers 

of software. This can take hours to days to replace, forcing most companies to over 

provision as a solution so as to not have a loss of performance during the failure. 

By abstracting all the characteristics into a service profile, a replacement can be done in 

minutes by simply re-associating the service profile with a different blade. The server can 

be up and booting in a matter of minutes hours/days. 

  



 
 

 

1-23   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 19

Describe UCS Service Profiles in Compute 
Scalability

Server Name: web-server-01
UUID: 56 4d cd 3f 59 5b 61…
MAC : 08:00:69:02:01:FC
WWN: 5080020000075740
Boot Order: SAN, LAN
Firmware: xx.yy.zz

Server Name: app-server-01
UUID: 65 d4 cd f3 59 5b 16…
MAC : 08:00:69:02:01:16
WWN: 5080020000076789
Boot Order: SAN, LAN
Firmware: xx.yy.zz

Profiles for Web Servers Profiles for App Servers

 Apply appropriate profile to provision a specific server type

 Same hardware can dynamically be deployed as different server types

 No need to purchase custom configured servers for specific applications

 Maximize server hardware

 

Describe UCS service profiles in compute scalability 

Service profile is also useful in terms of scalability. Because it can get it resources from 

pools for example, that means if you need more servers of a given type you can simply 

instantiate more service profiles to consume more resources from the pools. This is ideal 

for a server farm (clustering) where during peak times the cluster may need to grow, 

adding identical servers.  

This also works for repurposing resources as would be needed in cloud. Through 

templates you could instantiate the needed numbers of a server type, use them, and 

disassociate them from their resources when you were done, thus returning them to pools 

for others to use. 

  



 
 

 

© Cisco Systems, Inc.  Overview of Pools, Policies, and Templates in UCS1-24 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 20

Describe UCS Service Profiles work with 
Server Operations

Server Name: finance-01
UUID: 56 4d cd 3f 59 5b 61…
MAC : 08:00:69:02:01:FC
WWN: 5080020000075740
Boot Order: SAN, LAN
Firmware: xx.yy.zz

 Disassociate server profile from existing server

 Associate server profile to new server

 Existing server can be retired or re-purposed by simply creating or 
associating an appropriate profile

Existing Server New Server

 

Describe how UCS service profiles help with server operations 

For basic server operations they can be used as well. For example, the need to upgrade a 

server one with more memory can be as simple as scheduling a down time, shutting down 

the server, re-associating it with a new blade, and rebooting the server. Now keep in mind 

you did not have to do any re-cabling, flashing, or re-identifying components, this was all 

done through the service profile and the associating of it to a new blade. 

This could of course be automated by integrating management software with the UCS 

XML API. 

This combined with virtualization business continuity features makes the most high agile 

and flexible compute infrastructure. 



 
Lesson 2 

Managing Pools in UCS 

Overview 

In this lesson you will learn how to configure and manage server and identity pools in 

UCS. 

Objectives 

The specific objectives of this lesson are to enable you to perform the following tasks: 

 Manage management IP address pools 

 Manage UUID pools 

 Manage MAC address pools 

 Manage WWNN pools and WWPN pools 

 Manage server pools 
  



 
 

 

2-1   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Describe how IP addresses get used

Configure IP address pools

Discuss special considerations with IP pools

IP Pools

 

IP Pools 

In this section, we discuss how IP addresses are pooled and used in UCS. 

  



 
 

 

© Cisco Systems, Inc.  Managing Pools in UCS 2-2 

© 2008 Cisco, Inc. All rights reserved.

Management IP Address Overview

mgmt0

cut-through: KVM, IPMI, SoL

to the FI: SSH, HTTP/S

192.168.1.4

192.168.1.5

192.168.1.6

192.168.1.7

eth0:0

eth0:1

eth0:2

eth0:3

eth0:4

eth0:5

Server 1/1

Server 1/2

Server 1/3

Server 1/4

FI-A 

UCSM

192.168.1.2

192.168.1.3

 

IP Address Consumption 

UCSM assigns IP addresses from the management IP pool to the CIMCs of each blade.   

If there are fewer IP addresses than blades, then UCSM will use up all the addresses and 

leave some of the CIMCs without IP addresses. 

The IP address assignment is static.  This is to say, once an IP address is assigned to a 

blade, it will always be assigned to that blade until you either remove (decommission) the 

blade from the chassis or you remove the IP address from the pool. 

 

The consumers of the IP address are the UCSM cut-through interfaces (so named because 

such client connections cut straight through to the blade and are not processed by 

UCSM).  These interfaces include Serial Over LAN (SOL), Intelligent Platform 

Management Interface (IPMI), and Remote Keyboard Video Mouse (KVM). 

 

  



 
 

 

2-3   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Configure IP Address Pools

 

Configure IP Address Pools 

A management IP address pool is a set of one or more blocks (or ranges) of IP addresses.  

The screen shot above depicts creating a block of IP addresses.  You must specify a 

starting IP address, a number or size for the block, the subnet mask for the IPs, and the 

default gateway for that subnet. 

 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Pools in UCS 2-4 

© 2008 Cisco, Inc. All rights reserved.

Configure IP Address Pools (cont)

 

Configure IP Address Pools (cont) 

Once you create a block of IP addresses in the management IP pool, UCSM will assign 

those IP addresses to blades (in fact, to the CIMC on each blade).  The screen shot above 

depicts a management IP pool that contains more IP addresses than the number of blades 

in the chassis.  We could add four more blades to this UCS pod and they would each get 

assigned one of those remaining IP addresses. 

 

  



 
 

 

2-5   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Special Considerations With 
Management IP Addresses

• Number of hosts in subnet / number of blades

• Must be same VLAN (native) as UCSM OOB

• Can be same or different subnet (with UCSM OOB
interface)  need default gateways in same VLAN as 
OOB interface

• CIMC IP associated with 

• physical blade (1.3)

• Service profile (1.4) (but needs 2 per blade)
 

Special Considerations with IP Addresses 

One thing to consider when adding IP blocks into the management IP pool is the number 

of servers you have in your UCS pod compared to the number of available IP addresses 

in the subnet.  While you may be able to accommodate all the blades in your pod today, 

consider how your environment may grow in the future.  For example, you might add 

more blades to your UCS pod, or you might add more UCS pods to the same subnet. 

 

Another thing to consider is that, as far as UCSM is concerned, you don‟t need to put 

your CIMCs in the same subnet as your UCSM OOB addresses.  You can specify a 

different subnet for your CIMC addresses as long as the cut-through interface clients can 

reach that subnet.  However, the UCSM OOB address and all the management IP 

addresses must be in the default VLAN. 

 

Finally, consider the fact that the IP address is assigned to the CIMC (blade) and not to 

the service profile.  The implication is when you migrate a service profile from one 

physical blade to another, your cut-through interfaces must access the new blade CIMC 

IP address. 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Pools in UCS 2-6 

© 2008 Cisco, Inc. All rights reserved.

Describe how UUID addresses get used

Configure UUID address pools

Discuss special considerations with UUID addresses

UUID  Pools

 
 

UUID Pools 
 

In this section, we discuss how UUID‟s  are pooled and consumed in UCS. 

 

 

 
 

  



 
 

 

2-7   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

UUID Overview

• 16-byte (128-bit) number   3x10^38 different values

• Stored in BIOS

• Consumed by some software vendors (e.g. MS, Vmware)

 

 

UUID Overview 
 

The intent of UUIDs is to enable distributed systems to uniquely identify information 

without significant central coordination. Thus, anyone can create a UUID and use it to 

identify something with reasonable confidence that the identifier will never be 

unintentionally used by anyone for anything else. Information labeled with UUIDs can 

therefore be later combined into a single database without needing to resolve name 

conflicts. 

 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Pools in UCS 2-8 

© 2008 Cisco, Inc. All rights reserved.

Configuring UUID Pools

 
 

 

Configuring UUID Pools 

 

A UUID suffix pool is a collection of SMBIOS UUIDs that are available to be assigned 

to servers. The first number of digits that constitute the prefix of the UUID are fixed. The 

remaining digits, the UUID suffix, are variable. A UUID suffix pool ensures that these 

variable values are unique for each server associated with a service profile which uses 

that particular pool to avoid conflicts. If you use UUID suffix pools in service profiles, 

you do not have to manually configure the UUID of the server associated with the service 

profile. 

 

As in previous pool construction methods, Object naming is the first attribute defined. 

The description is optional but a best practice may be to indicate which Applications or 

service profile templates this is intended for use on. Prefix can be derived (default) or can 

be specified by choosing “other”.  
The completion of the wizard is done by specifying a block of suffixes. Additionally 

multiple blocks of suffix rages can be added to a single prefix. 
  



 
 

 

2-9   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Examining UUID Pools

 

Examining UUID Pools 

You can see to which service profiles each UUID is (and was previously) assigned, as 

shown in the screenshot above. 

  



 
 

 

© Cisco Systems, Inc.  Managing Pools in UCS 2-10 

© 2008 Cisco, Inc. All rights reserved.

Special Considerations With UUIDs
• UUIDs (as used by ESX) need only be unique within 

ESX “datacenter” (unlike MACs, WWNs, and IPs)

• It is impossible to assign the same UUID to 2 different 
UCS servers via UCSM

• Can have overlapping pools

• Pool resolution from current org up to root – if no 
UUIDs found, search default pool from current org up 
to root

 

Special Considerations With UUIDs 

The slide above describes special considerations when managing UUIDs in a UCS 

environment. 

  



 
 

 

2-11   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 
 

© 2008 Cisco, Inc. All rights reserved.

Describe how MAC addresses get used

Configure MAC address pools

Discuss special considerations with MAC addresses

MAC Pools

 

MAC Pools 

In this section, we discuss how MAC addresses are pooled and consumed in UCS. 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Pools in UCS 2-12 

© 2008 Cisco, Inc. All rights reserved.

MAC Address Overview

• One MAC per vNIC

• MAC address assignment: 

• Hardware-derived MAC 

• Manually create and assign MAC

• Assign address from a MAC pool 

 

MAC Address Overview 

When you configure service profiles, you must assign a unique MAC address to each 

vNIC you create.  You can use the hardware-derived MAC address for all non-virtualized 

interfaces.  You can also manually create and assign a MAC address for each vNIC you 

create.  Finally, and perhaps most easily, you can associate a vNIC to a pool of MAC 

addresses and let UCSM assign one of the unused addresses to your vNIC. 

MAC address pools are resolved by name from the organization of the service profile 

upwards to the root organization.  If no MAC address pool by that specified name has 

any available addresses to assign, then UCSM will use the „default‟ pools from that 
organization upwards.  If no default MAC pool has any available addresses to assign, 

then UCSM will create a fault in the system that there are insufficient resources for the 

vNIC.  

We call the resolution “hierarchical policy resolution” and we do resolve in the scope of 

the parent. 

 

  



 
 

 

2-13   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Configuring MAC Address Pools

 

Configuring MAC Address Pools 

A MAC address pool is a set of one or more MAC address blocks.  The screen shot above 

depicts creating a MAC address block by specifying a starting MAC address and a size.     

 

  



 
 

 

© Cisco Systems, Inc.  Managing Pools in UCS 2-14 

© 2008 Cisco, Inc. All rights reserved.

Configuring MAC Address Pools (cont)

 

Configuring MAC Address Pools (cont) 

The screen shot above depicts all the MAC address pools for a given UCS pod.  Note that 

the macsForRAC pool contains two MAC address blocks.  Also note that there are 3 

addresses from that pool that are currently assigned to vNICS – all the other pools are, as 
yet, unused. 

 

  



 
 

 

2-15   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Special Considerations With MACs

• Can have overlapping pools

• UCSM performs consistency checking within UCS
pod

• UCSM does not perform consistency checking with 
upstream LAN

• Should use 00:25:B5 as vendor OUI

• Pool resolution from current org up to root – if no 
MACs found, search default pool from current org up 
to root

 

Special Considerations With MAC Addresses 

One thing to consider when configuring your MAC address pools is that they can have 

overlapping blocks within and between the pools.  However, once a MAC address is 

assigned to a vNIC, it is no longer available in any of the pools of which it is a member.  

 

Another thing to consider is that while UCSM guarantees uniqueness of MAC address 

assignments to vNICs within a UCS pod, it does not guarantee uniqueness between UCS 

pods nor across your data center.   

 

It is recommended to use Cisco‟s OUI prefix (00:25:B5) for all your MAC addresses.  

The subsequent fields can be used to identify other elements of your data center (such as 

site, building, floor, pod, … etc). While this does not guarantee uniqueness it will provide 
a mechanism to identify elements of UCS systems. 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Pools in UCS 2-16 

© 2008 Cisco, Inc. All rights reserved.

Describe how WWNs get used

Configure WWNN pools

Configure WWPN pools

Discuss special considerations with WWN pools

WWN Pools

 

WWN Pools 

In this section, we discuss how WWNs (port names and node names) are pooled and 

consumed in UCS. 

 

  



 
 

 

2-17   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

WWN Consumption

• One WWNN per service profile

• One WWPN per vHBA

• WWN assignment:

• Use hardware-derived WWN

• Manually create and assign WWN

• Assign WWNN pool to profile/template

• Assign WWPN pool to vHBA

 

WWN Consumption 

World-Wide Names (port names and node names) are used to identify nodes in a Fibre 

Channel network.  There is one World-Wide Node Name per host (and therefore per 

service profile) and one World-Wide Port Name per port (and therefore per vHBA).   

As with MAC addresses, you can either use hardware-derived identities for the non-

virtualized interfaces or you can assign “synthetic” identities.  For assignment, you can 
manually create and assign a WWN or you can associate the object with a WWN pool.  

In the case of service profiles, you can assign it to a WWNN pool and in the case of 

vHBAs, you can assign them to a WWPN pool. 

WWN pools are resolved by name from the organization of the service profile upwards to 

the root organization.  If no WWN pool by that specified name has any available 

addresses to assign, then UCSM will use the „default‟ pools from that organization 

upwards.  If no default WWN pool has any available addresses to assign, then UCSM 

will create a fault in the system that there are insufficient resources for the vHBA. 

 

 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Pools in UCS 2-18 

© 2008 Cisco, Inc. All rights reserved.

Configuring WWNN Pools

 

Configuring WWNN Pools 

Like MAC address pools, a WWNN pool is a set of one or more WWN blocks.  To create 

a WWN block, you specify a starting address and a size. 

The screen shot above depicts all the WWNN pools for a given UCS pod.  Note that the 

wwnnsForRAC pool contains two WWN blocks.  Also note that there are 3 addresses 

from that pool that are currently assigned to service profiles – all the other pools are, as 
yet, unused. 

 

 

  



 
 

 

2-19   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Configuring WWPN Pools

 

Configuring WWPN Pools 

Like WWNN pools, a WWPN pool is a set of one or more WWPN blocks.  To create a 

WWPN block, you specify a starting address and a size. 

The screen shot above depicts all the WWPN pools for a given UCS pod.  Note that the 

wwpnsForRAC pool contains two WWPN blocks.  Also note that there are 3 addresses 

from that pool that are currently assigned to vHBAs – all the other pools are, as yet, 
unused. 

 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Pools in UCS 2-20 

© 2008 Cisco, Inc. All rights reserved.

Special Considerations With WWNs
• Can have overlapping pools

• UCSM performs consistency checking within UCS
pod

• UCSM does not perform consistency checking with 
upstream SAN

• Must use 50, 20, or 21 in first byte

• Pool resolution from current org up to root – if no 
WWNs found, search default pool from current org up 
to root

 

Special Considerations with WWNs 

One thing to consider when configuring your WWN pools is that they can have 

overlapping blocks within and between the pools.  However, once a WWN is assigned to 

a vHBA, it is no longer available in any of the pools of which it is a member. 

Another thing to consider is that while UCSM guarantees uniqueness of WWN 

assignments to vHBAs within a UCS pod, it does not guarantee uniqueness between UCS 

pods nor across your data center.   

You are required to use 50, 20, or 21 in the first byte of your WWNs. You can configure 

all other bytes in the WWN any way you like.   As with MAC addresses, it is 

recommended to use some logic in your addressing scheme so that you can both 

guarantee uniqueness as well as easily identify WWNs in your SAN. 

 

 

  



 
 

 

2-21   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Describe how server pools get populated and used

Configure server pool policy qualifications

Create server pools

Discuss special considerations with server pools

Server Pools

 

Server Pools 

In this section, we discuss how servers are pooled and consumed in UCS. 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Pools in UCS 2-22 

© 2008 Cisco, Inc. All rights reserved.

Server Pool Consumption

• One server per service profile

• Assign server pool to service profile or template

 

Server Consumption 

A single service profile can be associated to one blade at a time.  When you create a 

service profile or a service profile template, you can assign that profile or template to a 

server pool.  When you instantiate that profile, UCSM will select an available (unused) 

server from the server pool and associate the profile to that blade. 

As with other pools, server pools are resolved by name from the organization of the 

service profile upwards to the root organization.  If no server pool by that specified name 

has any available servers to assign, then UCSM will use the „default‟ pools from that 

organization upwards.  If no default server pool has any available addresses to assign, 

then UCSM will create a fault in the system that there are insufficient resources for the 

service profile. 

 

We call the resolution “hierarchical policy resolution” and we do resolve in the scope of 

the parent. 

 

 

  



 
 

 

2-23   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Configuring Server Pool Policy Qualifications

 

Configuring Server Pool Policy Qualifications 

One of the qualifying criteria for server pool policies is the type of adapter on the blade.  

There are several types of adapters offered in a UCS environment including Ethernet, 

converged network adapters, and virtualized interface cards.   

Another qualifying criterion is the physical location of the blade.  You can specify chassis 

ids, ranges of chassis ids, blade slots, and ranges of blade slots within a chassis. 

 

You can also select the adapters model number via RegEx 

 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Pools in UCS 2-24 

© 2008 Cisco, Inc. All rights reserved.

Configuring Server Pool Policy Qualifications 
(cont)

 

Configuring Server Pool Policy Qualifications (cont) 

You can qualify server membership in a pool based on its memory configuration.  

Specifically, you can qualify the clock (in MHz), latency (in ns), minimum and maximum 

capacities (in MB), as well as the width. 

You can also qualify server membership in a pool based on its processor configuration.  

Specifically, you can qualify the architecture and model, minimum and maximum 

number of cores, minimum and maximum number of threads, speed (in MHz), and CPU 

stepping. 

 

  



 
 

 

2-25   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Configuring Server Pool Policy 
Qualifications (cont)

 

Configuring Server Pool Policy Qualifications (cont) 

Another  type of server pool qualification is the local disk configuration.  Here you can 

specify the number of blocks, block size (in bytes), minimum and maximum capacity (in 

MB), and individual disk capacity (in GB). 

We also have Server Model Qualifications as a pool policy qualification. 

 

 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Pools in UCS 2-26 

© 2008 Cisco, Inc. All rights reserved.

Configuring Server Pool Policies

 

Configuring Server Pool Policies 

In order to associate a server pool qualification with a server pool, you must configure a 

server pool policy.  This policy contains a reference to both the target pool as well as the 

qualification and acts as a sort of “glue” between them.  You can associate the same 
qualification with multiple pools, and you can associate multiple qualifications with the 

same pool (by using multiple policies). 

 

  



 
 

 

2-27   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Creating Server Pools (by hand)

 

Creating Server Pools (by hand) 

Instead of automatically populating pools as previously discussed, you can also manually 

populate pools.  This would be particularly useful in small-scale deployments, in 

homogeneous server deployments, and in UCS pods that have already discovered all their 

blades. 

The screen shot above depicts manually populating server pools.  The interface gives you 

some information about the server resources, including the product ID, the adapter type, 

and the physical location by chassis and slot id. 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Pools in UCS 2-28 

© 2008 Cisco, Inc. All rights reserved.

Special Considerations With Server 
Pools

• Can have overlapping pools

• Server pool policy qualifications 

• not re-evaluated after initial blade discovery (1.3)

• Evaluated any time (1.4)

• 2 servers in an HA cluster could be part of same chassis

• Can use hierarchical pool resolution to satisfy SLAs

• Pools resolved from current org up to root – if no servers found, 
then search default pool from current org up to root

 

Special Considerations with Server Pools 

Just as with identity pools, servers can belong to multiple pools.  Of course, once a server 

is associated with a service profile, it is unavailable in all the pools of which it is a 

member.   

Of special concern is the fact that server pool policy qualifications are only evaluated 

when a blade is discovered (i.e. when you first insert the blade or if you reacknowledge a 

slot).  This means that you cannot autopopulate pools except at discovery time.  

Furthermore, a pool qualification is not re-evaluated.  This implies that if a server 

resource (such as a CPU, memory slot, or disk) fails, that server will still belong to that 

pool even though it may be in violation of the pool policy that was used to populate the 

pool. 

Another consideration with server pools is that, through service profile migrations, two 

servers that should not otherwise be a part of the same cluster might end up together.  You 

can construct your pools so that this never happens (i.e. you only select one blade from 

each chassis to belong to a pool). 

Note: this will change in the next software release(1.4.1) to evaluate server pool 

qualifications upon creation and subsequent assignment to a server pool. 

 



 
Lesson 3 

Managing Policies in UCS 

Overview 

In this lesson you will learn how to configure and manage system, network, server, and 

statistics-related policies in UCS. 

Objectives 

The specific objectives of this lesson are to enable you to perform the following tasks: 

 Manage system policies 

 Manage network policies 

 Manage server policies 

 Manage fault and statistics-related policies 
  



 
 

 

3-1   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Configuring global policies

Configuring auto-config policies

Configuring server inheritance policies

Configuring server discovery policies

Configuring SEL policies

Managing System 
Policies

 

Managing System Policies 

In this section, we will discuss policies that impact the entire system (not specific 

servers). 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-2 

© 2008 Cisco, Inc. All rights reserved.

Global Policies

 
 

Global Policies 

Global policies are those that impact the entire UCS pod.  These policies are not 

configurable per service profile, for example, or per organization.  These policies include 

chassis discovery, power, and MAC aging. 

 

Chassis Discovery Policy 

This discovery policy determines how the system reacts when you add a new chassis. 

Cisco UCS Manager uses the settings in the chassis discovery policy to determine the 

minimum threshold for the number of links between the chassis and the fabric 

interconnect. However, the configuration in the chassis discovery policy does not prevent 

you from connecting multiple chassis to the fabric interconnects in a Cisco UCS instance 

and wiring those chassis with a different number of links. 

 

If you have a Cisco UCS instance that has some chassis wired with 1 link, some with 2 

links, and some with 4 links, we recommend that you configure the chassis discovery 

policy for the minimum number links in the instance so that Cisco UCS Manager can 

discover all chassis. After the initial discovery, you must re-acknowledge the chassis that 

are wired for a greater number of links and Cisco UCS Manager configures the chassis to 

use all available links.  



 
 

 

3-3   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 

Cisco UCS Manager will not discover any chassis that is wired for fewer links than are 

configured in the chassis discovery policy. For example, if the chassis discovery policy is 

configured for 4 links, Cisco UCS Manager will not t discover any chassis that is wired 

for 1 link or 2 links. Re-acknowledgement of the chassis does not resolve this issue. 

 

Once discovered, you can change actual number of physical links and re-acknowledge 

the chassis (you don’t need to change the discovery policy either).  The following 
commands would be useful to see current state of the system: 

 

scope chassis <ch-id> 

scope iom <id> 

scope port-group fabric 

show fabric-if 

 

The “Acknowledgement” column tells you which links are indeed used by UCSM and 

“Discovery” will tell you the operational state of the link. 

 

 

 

Power Policy 
 

The power policy is a global policy that specifies the redundancy for power supplies in 

all chassis in the Cisco UCS instance. This policy is also known as the PSU policy. 

 

• non-redundant—All installed power supplies are turned on and the load is evenly 
balanced. Only smaller configurations (requiring less than 2500W) can be powered by a 

single power supply. 

 

• n+1—The total number of power supplies to satisfy non-redundancy, plus one 
additional power supply for redundancy, are turned on and equally share the power load 

for the chassis. If any additional power supplies are installed, Cisco UCS Manager sets 

them to a "turned-off" state. 

 

• grid—Two power sources are turned on, or the chassis requires greater than N+1 
redundancy. If one source fails (which causes a loss of power to one or two power 

supplies), the surviving power supplies on the other power circuit continue to provide 

power to the chassis. 

 

Aging Time for the MAC Address Table 

 



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-4 

To efficiently switch packets between ports, the fabric interconnect maintains a MAC 

address table. It dynamically builds the MAC address table by using the MAC source 

address from the packets received and the associated port on which the packets were 

learned. The fabric interconnect uses an aging mechanism, defined by a configurable 

aging timer, to determine how long an entry remains in the MAC address table. If  

an address remains inactive for a specified number of seconds, it is removed from the 

MAC address table. 

 

You can configure the amount of time (age) that a MAC address entry (MAC address and 

associated port) remains in the MAC address table.  



 
 

 

3-5   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 

© 2008 Cisco, Inc. All rights reserved.

Server Inheritance Policies

 
 

Server Inheritance Policy 
 

This policy is invoked during the server discovery process to create a service profile for 

the server. All service profiles created from this policy use the values burned into the 

blade at manufacture. The policy performs the following: 

 

• Analyzes the inventory of the server 

 

• If configured, assigns the server to the selected organization 
 

• Creates a service profile for the server with the identity burned into the server at 
manufacture 

 

You cannot migrate a service profile created with this policy to another server.  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-6 

 

© 2008 Cisco, Inc. All rights reserved.

Autoconfiguration Policies

 

Server Autoconfiguration Policy 
 

Cisco UCS Manager uses this policy to determine how to configure a new server. If you 

create a server autoconfiguration policy, the following occurs when a new server starts: 

 
1. The qualification in the server autoconfiguration policy is executed against the server. 

2. If the server meets the required qualifications, the server is associated with a service 

profile created from the service profile template configured in the server 

autoconfiguration policy. The name of that service profile is based on the name given to 

the server by Cisco UCS Manager. 

3. The service profile is assigned to the organization configured in the server 

autoconfiguration policy.  



 
 

 

3-7   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 

© 2008 Cisco, Inc. All rights reserved.

Server Discovery Policies

 
 

Server Discovery Policy 
 

This discovery policy determines how the system reacts when you add a new server. If 

you create a server discovery policy, you can control whether the system conducts a deep 

discovery when a server is added to a chassis, or whether a user must first acknowledge 

the new server. By default, the system conducts a full discovery. 

 

If you create a server discovery policy, the following occurs when a new server starts: 

 
1. The qualification in the server discovery policy is executed against the server. 

2. If the server meets the required qualifications, Cisco UCS Manager applies the following 

to the server: 

• Depending upon the option selected for the action, either discovers the new 
server immediately or waits for a user to acknowledge the new server 

• Applies the scrub policy to the server  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-8 

 

© 2008 Cisco, Inc. All rights reserved.

SEL Policies

 
 

System Event Log Policy 

 

The system event log (SEL) resides on the CIMC in NVRAM. It records most server-

related events, such as over and under voltage, temperature events, fan events, events 

from BIOS, etc. The SEL is mainly used for troubleshooting purposes. SEL file is 

approximately 40KB in size, and no further events can be recorded when it is full. It must 

be cleared before additional events can be recorded. 

 

You can use the SEL policy to backup the SEL to a remote server, and optionally clear 

the SEL after a backup operation occurs. Backup operations can be triggered based on 

specific actions, or they can occur at regular intervals. You can also manually backup or 

clear the SEL. 

 

The backup file is automatically generated. The filename format is 

sel-SystemName-ChassisID-ServerID-ServerSerialNum-Timestamp; 

for example, 
sel-UCS-A-ch01-serv01-QCI12522939-20091121160736. 

  



 
 

 

3-9   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Configure adapter policies 
Configure BIOS policies
Configure boot policies
Configure firmware policies
Configure local disk configuration policies
Configure scrub policies
Configure SOL policies
Configure server pool policies
Configure threshold policies
Configure placement policies

Managing Server 
Policies

 

Managing Server Policies 

In this section, we discuss how to configure policies that impact servers and their 

components.  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-10 

 

 

© 2008 Cisco, Inc. All rights reserved.

Ethernet Adapter Policies

 
 

 

Ethernet Adapter Policies 
 

These policies govern the host-side behavior of the adapter, including how the adapter 

handles traffic. For example, you can use these policies to change default settings for the 

following: 

 

• Queues 
 

• Interrupt handling 

 

• Performance enhancement 
 

• RSS hash 
 

• Failover in an HA configuration with two fabric interconnects  



 
 

 

3-11   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Fibre Channel Adapter Policies

 
 

 

Fibre Channel Adapter Policies 

 

By default, Cisco UCS provides a set of Fibre Channel adapter policies. These policies 

include the recommended settings for each supported server operating system. Operating 

systems are sensitive to the settings in these policies. Storage vendors typically require 

non-default adapter settings. You can find the details of these required settings on the 

support list provided by those vendors. 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-12 

 

© 2008 Cisco, Inc. All rights reserved.

Bios Policies

 
 

Server BIOS Settings 
 

Cisco UCS provides two methods for making global modifications to the BIOS settings 

on servers in an instance. You can create one or more BIOS policies that include a 

specific grouping of BIOS settings that match the needs of a server or set of servers, or 

you can use the default BIOS settings for a specific server platform. 

 

NOTE  

 

Cisco UCS Manager pushes BIOS configuration changes through a BIOS policy or 

default BIOS settings to the CIMC buffer. These changes remain in the buffer until the 

server is rebooted. If you change a BIOS policy, you must reboot any servers associated 

with service profiles that include the policy for the changes to take effect. 

If you change the default BIOS settings, those changes are applied to servers upon 

association with service profiles that do not include a BIOS policy or when the server is 

rebooted. Changes to the default BIOS settings do not affect servers that are already 

associated with service profiles.  



 
 

 

3-13   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 

© 2008 Cisco, Inc. All rights reserved.

BIOS Policies (cont)

 
 

BIOS Policies (cont) 

As shown in the screen shots above, you can also configure Intel virtualization settings 

and memory configuration via the BIOS policy. 

  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-14 

© 2008 Cisco, Inc. All rights reserved.

BIOS Policies (cont)

 

BIOS Policies (cont) 

As shown in the screen shot above, you can also configure console redirection in the 

BIOS policy. 

  



 
 

 

3-15   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Boot Policies

 

Boot Policy 
 

The boot policy determines the following: 

 

• Configuration of the boot device 
• Location from which the server boots 

• Order in which boot devices are invoked 
 

For example, you can choose to have associated servers boot from a local device, such as 

a local disk or CD-ROM (VMedia), or you can select a SAN boot or a LAN (PXE) boot. 

You must include this policy in a service profile, and that service profile must be 

associated with a server for it to take effect. If you do not include a boot policy in a 

service profile, the server uses the default settings in the BIOS to determine the boot 

order. 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-16 

© 2008 Cisco, Inc. All rights reserved.

Firmware Policies

 

Host Firmware Policy 
 

This policy enables you to specify a set of firmware versions that make up the host 

firmware package (also known as the host firmware pack).  The policy enables a 

customer to guarantee that the server runs all tested firmware if moving the SP to another 

blade. 

 

The host firmware includes the following firmware for server and adapter endpoints: 

adapter, storage controller, Fibre Channel adapter, BIOS,  HBA option ROM, board 

controller. 

 

You can include more than one type of firmware in the same host firmware package. For 

example, a host firmware package can include both BIOS firmware and storage controller 

firmware or adapter firmware for two different models of adapters. However, you can 

only have one firmware version with the same type, vendor, and model number. The 

system recognizes which firmware version is required for an endpoint and ignores all 

other firmware versions  



 
 

 

3-17   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 

 

 

© 2008 Cisco, Inc. All rights reserved.

Management FW Package

 

 

Management Firmware Policy 
 

This policy enables you to specify a set of firmware versions that make up the 

management firmware package (also known as a management firmware pack). The 

management firmware package includes the Cisco Integrated Management Controller 

(CIMC) on the server. You do not need to use this package if you upgrade the CIMC 

directly. The firmware package is pushed to all servers associated with service profiles 

that include this policy. This policy ensures that the CIMC firmware is identical on all 

servers associated with service profiles which use the same policy. Therefore, if you 

move the service profile from one server to another, the firmware versions are 

maintained. You must include this policy in a service profile, and that service profile 

must be associated with a server for it to take effect. This policy is not dependent upon 

any other policies. However, you must ensure that the appropriate firmware has been 

downloaded to the fabric interconnect. 

  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-18 

 

© 2008 Cisco, Inc. All rights reserved.

Local Disk Configuration Policies

 

Local Disk Configuration Policy 
 

This policy configures any optional SAS local drives that have been installed on a server 

through the onboard RAID controller of the local drive. This policy enables you to set a 

local disk mode for all servers that are associated with a service profile that includes the 

local disk configuration policy. The local disk modes include the following: 

 

• Any Configuration—server configuration carries forward the local disk configuration 

without any changes. 

• No Local Storage—For a diskless server or a SAN only configuration. you cannot 
associate any service profile which uses this policy with a server that has a local disk. 

• No RAID—For a server configuration that removes the RAID and leaves the disk MBR 
and payload unaltered. 

• RAID 1 Mirrored—Data is written to two disks, providing complete data redundancy 

if one disk fails.  

• RAID10  Mirrored and Striped— RAID 10 uses mirrored pairs of disks  
• RAID 0 Stripes—Data is striped across all disks in the array, no data redundancy 

• RAID 6 Stripes Dual Parity—Data is striped across all disks in the array and two 
parity disks are used to provide protection against the failure of up to two physical disks.  

• RAID 5 Striped Parity—Data is striped across all disks in the array. Part of the 

capacity of each disk stores parity information that can be used to reconstruct data if a 



 
 

 

3-19   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

disk fails. RAID 5 provides good data throughput for applications with high read request 

rates. 

 

You must include this policy in a service profile, and that service profile must be 

associated with a server for the policy to take effect. 

  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-20 

 

 

© 2008 Cisco, Inc. All rights reserved.

Scrub Policies

Bios Settings now an option on scrub policies

 
 

Scrub Policy 
 

This policy determines what happens to local data and to the BIOS settings on a server 

during the discovery process and when the server is disassociated from a service profile. 

Depending upon how you configure a scrub policy, the following can occur at those 

times: 

 

Disk Scrub One of the following occurs to the data on any local drives on disassociation: 

 

• If enabled, destroys all data access on any local drives (actual data removal is 
limited to the first 512MB which effective removes access to remaining data 

except for the use of forensic data tools) 

 

• If disabled, preserves all data on any local drives, including local storage 
configuration 

 

BIOS Settings Scrub One of the following occurs to the BIOS settings when a service 

profile containing the scrub policy is disassociated from a server: 

 



 
 

 

3-21   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

• If enabled, erases all BIOS settings for the server and and resets them to the 
BIOS defaults for that server type and vendor 

 

• If disabled, preserves the existing BIOS settings on the server 
 

  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-22 

 

 

© 2008 Cisco, Inc. All rights reserved.

Serial Over LAN Policies

 
 

Serial over LAN Policy 
 

This policy sets the configuration for the serial over LAN connection for all servers 

associated with service profiles that use the policy. By default, the serial over LAN 

connection is disabled. 

 

If you implement a serial over LAN policy, we recommend that you also create an IPMI 

profile. 

  

You must include this policy in a service profile and that service profile must be 

associated with a server for it to take effect.  



 
 

 

3-23   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 

 

© 2008 Cisco, Inc. All rights reserved.

Server Pool Policy

 

 

Server Pool Policy 
 

This policy is invoked during the server discovery process. It determines what happens if 

server pool policy qualifications match a server to the target pool specified in the policy. 

 

If a server qualifies for more than one pool and those pools have server pool policies, the 

server is added to all those pools. 

 

This policy requires that one or more of the following resources already exist in the 

system: 

 

• A minimum of one server pool 
 

• Server pool policy qualifications, if you choose to have servers automatically 
added to pools  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-24 

 

© 2008 Cisco, Inc. All rights reserved.

Server Pool Policy Qualification

 
 

Server Pool Policy Qualifications 
 

This policy qualifies servers based on the inventory of a server conducted during the 

discovery process. The qualifications are individual rules that you configure in the policy 

to determine whether a server meets the selection criteria. For example, you can create a 

rule that specifies the minimum memory capacity for servers in a data center pool. 

Qualifications are used in other policies to place servers, not just by the server pool 

policies. For example, if a server meets the criteria in a qualification policy, it can be 

added to one or more server pools or have a service profile automatically associated with 

it. 

You can use the server pool policy qualifications to qualify servers according to the 

following criteria: 

 

• Adapter type 
 

• Chassis location 

 

• Memory type and configuration 
 

• CPU cores, type, and configuration 



 
 

 

3-25   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 

• Storage configuration and capacity 

 

• Server model  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-26 

 

© 2008 Cisco, Inc. All rights reserved.

Threshold Policies

 

 

Statistics Threshold Policy 
 

A statistics threshold policy monitors statistics about certain aspects of the system and 

generates an event if the threshold is crossed. You can set both minimum and maximum 

thresholds. For example, you can configure the policy to raise an alarm if the CPU 

temperature exceeds a certain value, or if a server is overutilized or underutilized. 

These threshold policies do not control the hardware or device-level thresholds enforced 

by endpoints, such as the CIMC. Those thresholds are burned in to the hardware 

components at manufacture. Cisco UCS enables you to configure statistics threshold 

policies for the following components: 

 

• Servers and server components 
• Uplink Ethernet ports 
• Ethernet server ports, chassis, and fabric interconnects 

• Fibre Channel port 
 

You cannot create or delete a statistics threshold policy for Ethernet server ports, uplink 

Ethernet ports, or uplink Fibre Channel ports. You can only configure the existing default 

policy.  

 



 
 

 

3-27   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

Note:These are OPTIONAL, and do not need to be configured for FAULT monitoring. All 

of these are additional “soft monitoring options” that an administrator may use… but 

they are not needed for fault monitoring of UCS.  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-28 

 

© 2008 Cisco, Inc. All rights reserved.

vNIC/vHBA Placement Policies

 

vNIC/vHBA Placement Policies 
 

vNIC/vHBA placement policies are used to assign vNICs or vHBAs to the physical 

adapters on a server. Each vNIC/vHBA placement policy contains two virtual network 

interface connections (vCons) that are virtual representations of the physical adapters. 

When a vNIC/vHBA placement policy is assigned to a service profile, and the service 

profile is associated to a server, the vCons in the vNIC/vHBA placement policy are 

assigned to the physical adapters. For servers with only one adapter, both vCons are 

assigned to the adapter; for servers with two adapters, one vCon is assigned to each 

adapter. You can assign vNICs or vHBAs to either of the two vCons, and they are then 

assigned to the physical adapters based on the vCon assignment during server 

association. Additionally, vCons use the following selection preference criteria to assign 

vHBAs and vNICs:  

All  The vCon is used for vNICs or vHBAs assigned to it, vNICs or vHBAs not 

assigned to either vCon, and dynamic vNICs or vHBAs. 

 

Assigned-Only The vCon is reserved for only vNICs or vHBAs assigned to it. 

 

Exclude-Dynamic The vCon is not used for dynamic vNICs or vHBAs. 

 



 
 

 

3-29   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

Exclude-Unassigned The vCon is not used for vNICs or vHBAs not assigned to the 

vCon. The vCon is used for dynamic vNICs and vHBAs. 

 

For servers with two adapters, if you do not include a vNIC/vHBA placement policy in a 

service profile, or you do not configure vCons for a service profile, Cisco UCS equally 

distributes the vNICs and vHBAs between the two adapters.  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-30 

 

© 2008 Cisco, Inc. All rights reserved.

Configure dynamic vnic policies

Configure flow control policies

Configure network control policies

Configure QoS policies

Managing 
Network Policies

 

Managing Network Policies 

In this section, we discuss how to configure network-related policies in UCSM. 

  



 
 

 

3-31   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 

© 2008 Cisco, Inc. All rights reserved.

Dynamic VNIC Policies

 
 

Dynamic vNIC Connection Policy 
 

This policy determines how the VN-link connectivity between VMs and dynamic vNICs 

is configured. This policy is required for Cisco UCS instances that include servers with 

virtual interface card adapters on which you have installed VMs and configured dynamic 

vNICs. 

 

Each Dynamic vNIC connection policy must include an adapter policy and designate the 

number of vNICs that can be configured for any server associated with a service profile 

that includes the policy. 

  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-32 

 

© 2008 Cisco, Inc. All rights reserved.

Flow Control Policies

 

Flow Control Policy 
 

Flow control policies determine whether the uplink Ethernet ports in a Cisco UCS 

instance send and receive IEEE 802.3x pause frames when the receive buffer for a port 

fills. These pause frames request that the transmitting port stop sending data for a few 

milliseconds until the buffer clears. 

 

For flow control to work between a LAN port and an uplink Ethernet port, you must 

enable the corresponding receive and send flow control parameters for both ports. For 

Cisco UCS, the flow control policies configure these parameters. 

 

When you enable the send function, the uplink Ethernet port sends a pause request to the 

network port if the incoming packet rate becomes too high. The pause remains in effect 

for a few milliseconds before traffic is reset to normal levels. If you enable the receive 

function, the uplink Ethernet port honors all pause requests from the network port. All 

traffic is halted on that uplink port until the network port cancels the pause request. 

 

Because you assign the flow control policy to the port, changes to the policy have an 

immediate effect on how the port reacts to a pause frame or a full receive buffer. 

  



 
 

 

3-33   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 

© 2008 Cisco, Inc. All rights reserved.

Network Control Policies

 
 

Network Control Policy 
 

This policy configures the network control settings for the Cisco UCS instance, including 

the following: 

 

• Whether the Cisco Discovery Protocol (CDP) is enabled or disabled 
 

• How the VIF behaves if no uplink port is available in end-host mode 
 

• Whether the server can use different MAC addresses when sending packets to 

the fabric interconnect 



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-34 

© 2008 Cisco, Inc. All rights reserved.

QoS systems Classes

 
 

System Classes 

Cisco UCS uses Data Center Ethernet (DCE) to handle all traffic inside a Cisco UCS 

instance. This industry standard enhancement to Ethernet divides the bandwidth of the 

Ethernet pipe into eight virtual lanes. Two virtual lanes are reserved for internal system 

and management traffic. You can configure quality of service for the other six virtual 

lanes. System classes determine how the DCE bandwidth in these six virtual lanes is 

allocated across the entire Cisco UCS instance. Each system class reserves a specific 

segment of the bandwidth for a specific type of traffic. This provides a level of traffic 

management, even in an oversubscribed system. For example, you can configure the 

Fibre Channel Priority system class to determine the percentage of DCE bandwidth 

allocated to FCoE traffic. 

 
The following table describes the system classes that you can configure: 
 
System Class                                                                       Description. 

 
Platinum 

Gold 

Silver 

Bronze 

A configurable set of system classes that you can include in the QoS 
policy for a service profile. Each system class manages one lane of traffic. 
All properties of these system classes are available for you to assign 
custom settings and policies. 



 
 

 

3-35   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 
Best Effort 

A system class that sets the quality of service for the lane reserved for Basic 

Ethernet traffic. Some properties of this system class are preset and cannot be 

modified. For example, this class has a drop policy that allows it to drop data 

packets if required. You cannot disable this system class. 

 
Fibre Channel 

A system class that sets the quality of service for the lane reserved for Fibre 
Channel over Ethernet traffic. Some properties of this system class are preset and 

cannot be modified. For example, this class has a no-drop policy that ensures it 

never drops data packets. You cannot disable this system class. 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-36 

 

 

© 2008 Cisco, Inc. All rights reserved.

QoS Policies

 
 

 

Quality of Service Policy 
 

A quality of service (QoS) policy assigns a system class to the outgoing traffic for a vNIC 

or vHBA. This system class determines the quality of service for that traffic. For certain 

adapters you can also specify additional controls on the outgoing traffic, such as burst 

and rate. You must include a QoS policy in a vNIC policy or vHBA policy and then 

include that policy in a service profile to configure the vNIC or vHBA. 

  



 
 

 

3-37   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Configure the fault policy
Describe the soaking interval
Configure threshold policies
Configure statistics collection and reporting intervals 

Managing Fault 
andStatistics-
related Policies

 

Managing Fault and Statistics-related Policies 

In this section, we discuss managing policies that impact how statistical and fault 

information is collected and managed by UCSM. 

  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-38 

© 2008 Cisco, Inc. All rights reserved.

Fault Policy

 

Fault Policy 

The fault policy allows you to configure the flapping interval (discussed later in this 

module) as well as what to do with cleared faults (either retain or delete them).  If you 

choose to retain them, you can additionally specify a length of time to keep those cleared 

faults in the fault log prior to removing them.  

You can automate the exporting of any core files that are generated on the fabric 

interconnects to an external TFTP server. 

  



 
 

 

3-39   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Soaking Interval

soaking interval

Escalating value

Deescalating value

LC = flapping 
(fault persists)

LC = none (fault 
cleared)

LC = soaking-clear

statistic

 

Soaking Interval 

Some anomalies may occur in a system wherein a component statistic goes up and down 

very frequently (known as “flapping”).  Each time the statistic goes up and down, UCSM 
is compelled to either set a new fault or clear an existing one.  This can be “expensive” in 

terms of UCSM processing as well as fault log storage.   

The soaking interval can be used to alleviate some of this expense by either marking a 

statistical value as “flapping” or to clear it.  Once marked flapping, UCSM no longer 
needs to track the statistic or manage the related fault.  The soaking interval determines 

the amount of time during which a statistic is put under scrutiny.   

First, to be considered for flapping, a statistic must go over a threshold and then go under 

a threshold (i.e. it is potentially flapping).  If the statistic goes down and stays down 

within this interval, then the fault is cleared.  If the statistic goes up again and stays up 

within this interval, then the fault is marked “flapping”.   

 

 



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-40 

© 2008 Cisco, Inc. All rights reserved.

Threshold Policies

 
 

Threshold Policy 
 

A statistics threshold policy monitors statistics about certain aspects of the system and 

generates an event if the threshold is crossed. You can set both minimum and maximum 

thresholds. For example, you can configure the policy to raise an alarm if the CPU 

temperature exceeds a certain value, or if a server is overutilized or underutilized. 

These threshold policies do not control the hardware or device-level thresholds enforced 

by endpoints, such as the CIMC. Those thresholds are burned in to the hardware 

components at manufacture. Cisco UCS enables you to configure statistics threshold 

policies for the following components: 

 

• Servers and server components 
 

• Uplink Ethernet ports 

 

• Ethernet server ports, chassis, and fabric interconnects 
 

• Fibre Channel port 
 



 
 

 

3-41   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

You cannot create or delete a statistics threshold policy for Ethernet server ports, uplink 

Ethernet ports, or uplink Fibre Channel ports. You can only configure the existing default 

policy.  



 
 

 

© Cisco Systems, Inc.  Managing Policies in UCS 3-42 

 

 

 

© 2008 Cisco, Inc. All rights reserved.

Statistics Collection and Reporting 
Interval

 
 

 

Statistics Collection and Reporting Policy 
 

A statistics collection policy defines how frequently statistics are to be collected 

(collection interval) and how frequently the statistics are to be reported (reporting 

interval). Reporting intervals are longer than collection intervals so that multiple 

statistical data points can be collected during the reporting interval, which provides 

Cisco UCS Manager with sufficient data to calculate and report minimum, maximum, 

and average values. 

For NIC statistics, Cisco UCS Manager displays the average, minimum, and maximum of 

the change since the last collection of statistics. If the values are 0, there has been no 

change since the last collection. Statistics can be collected and reported for the following 

five functional areas of the Cisco UCS system: 

 

• Adapter—statistics related to the adapters 
• Chassis—statistics related to the blade chassis 
• Host—this policy is a placeholder for future support 



 
 

 

3-43   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

• Port—statistics related to the ports, including server ports, uplink Ethernet ports, and 
uplink Fibre Channel ports 

• Server—statistics related to servers 
 

Cisco UCS Manager has one default statistics collection policy for each of the five 

functional areas. You cannot create additional statistics collection policies and you cannot 

delete the existing default policies. 

You can only modify the default policies. 



 
Lesson 4 

Managing Templates in 

UCSM 

Overview 

In this lesson you will learn how to configure and manage UCS templates in UCS. 

Objectives 

The specific objectives of this lesson are to enable you to perform the following tasks: 

 Manage vNIC templates 

 Manage VHBA templates 

 Manage service profile templates 
  



 
 

 

4-1   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Create vNIC Template

 

 

Create vNIC Template 
 

This policy defines how a vNIC on a server connects to the LAN. You need to include 

this policy in a service profile for it to take effect. 

 

This policy requires that one or more of the following resources already exist in the 

system: 

 

• Named VLAN 
 

• MAC pool 
 

• QoS policy 

 

• LAN pin group 

• Statistics threshold policy 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Templates in UCS 4-2 

 

© 2008 Cisco, Inc. All rights reserved.

Create vHBA Template

 

 

Create vHBA Template 
 
This template defines how a vHBA on a server connects to the SAN. You need to include 

this policy in a service profile for it to take effect. 

 

This policy requires that one or more of the following resources already exist in the 

system: 

 

• Named VSAN 

 

• WWPN pool 
 

• SAN pin group 

• Statistics threshold policy 

 

 

  



 
 

 

4-3   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 

© 2008 Cisco, Inc. All rights reserved.

Create Service Profile Template

 

Create Service Profile Template 
 

With a service profile template, you can quickly create several service profiles with the 

same basic parameters, such as the number of vNICs and vHBAs, and with identity 

information drawn from the same pools.  

 

If you need only one service profile with similar values to an existing service profile, you 

can clone a service profile in the Cisco UCS Manager GUI. 

 

For example, if you need several service profiles with similar values to configure servers 

to host database software, you can create a service profile template, either manually or 

from an existing service profile. You then use the template to create the service profiles. 

Cisco UCS supports the following types of service profile templates: 

 

Initial template Service profiles created from an initial template inherit all the 

properties of the template. However, after you create the profile, it 

is no longer connected to the template. If you need to make 

changes to one or more profiles created from this template, you 

must change each profile individually. 

 



 
 

 

© Cisco Systems, Inc.  Managing Templates in UCS 4-4 

Updating template Service profiles created from an updating template inherit all the 

properties of the template and remain connected to the template. 

Any changes to the template automatically update the service 

profiles created from the template. 

  



 
 

 

4-5   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 

 

© 2008 Cisco, Inc. All rights reserved.

Configure the Storage

 
 

Configure the Storage 

The storage configuration of a service profile dictates local storage configuration (on the 

local disks) as well as the server’s SAN connectivity. 
 

  



 
 

 

© Cisco Systems, Inc.  Managing Templates in UCS 4-6 

© 2008 Cisco, Inc. All rights reserved.

Configure Networking

 
 

 

Configure Networking  

You can configure how a server connects to the upstream LAN by configuring one or 

more vNICs in the service profile or template. 

 

  



 
 

 

4-7   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 

 

© 2008 Cisco, Inc. All rights reserved.

Configure vNIC/vHBA Placement

 

Configure vNIC/vHBA Placement 

On a half-width blade, there is only one adapter on the board.  Any vNICs or vHBAs you 

configure will necessarily be “placed” on that single adapter.  However, on a full-width 
blade, there are two adapter slots on the board.  When you configure your vNICs and 

vHBAs for a full-width blade, you must define how you want them “placed” on these two 

adapters. 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Templates in UCS 4-8 

© 2008 Cisco, Inc. All rights reserved.

Configure the Boot Order

 

Configure the Boot Order 

The boot order defines the ordered list of bootable devices that the server will attempt to 

boot from.  These devices include the local disks, virtual CDROMs, vNICs, and/or 

vHBAs. 

 

 

  



 
 

 

4-9   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco, Inc. All rights reserved.

Configure Server Assignment 

 

Configure Server Assignment 

Service profiles are associated with physical blades.  In the service profile template, you 

can define the pool of servers from which UCSM will assign blades to the instantiated 

profiles.  In this same screen of the wizard, you can also define a host firmware and 

management firmware policy that contains the firmware you wish to be running on that 

server after association. 

 

  



 
 

 

© Cisco Systems, Inc.  Managing Templates in UCS 4-10 

© 2008 Cisco, Inc. All rights reserved.

Configure Operational Policies

 

Configure Operational Policies 

Operational policies include such things as IPMI configuration, threshold policies, BIOS 

policies, and scrub policies. 

 



 
 

 

 

 

Module 3: UCS 1.4 Feature 

Update 



 
Lesson 3 

Fibre Channel 

Enhancements in UCSM 

1.4 

Overview 

In this lesson you will learn about the new Fibre Channel features in UCSM 1.4. 

Objectives 

The specific objectives of this lesson are to enable you to perform the following tasks: 

 UCS 6100 Fibre Channel operating modes 

 Direct-attached Fibre Channel storage 

 VSAN trunking 

 Fibre Channel port channels 
  



 
 

 

3-1   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—2

Fibre Channel Operating 
Modes

• NPV mode versus FC switch mode

• Port types versus operating mode

• Functional role of ports outside UCS

• Expansion ports

• Putting a FI into FC switch mode

 

Fibre Channel Operating Modes 

In this section, we discuss the differences between Fibre Channel switch and NPV modes. 

  



 
 

 

© Cisco Systems, Inc.  Fibre Channel Enhancements in UCSM 1.4 3-2 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 3

UCS 6100 FC Operating Modes 

 External SAN sees UCS 6100 as end-

host with multiple adapters

 Upstream port(s) are F/FX ports

 Upstream switch requires NPV mode

 No direct FC storage support

 Trunking supported in UCSM 1.4

 Port channels supported in UCSM 1.4

 Higher scalability (domain IDs less 

than 238)

 UCS 6100 acts like a traditional Fibre

Channel switch

 Upstream port(s) are E/TE ports

 No NPV mode upstream

 Direct FC storage support

 Trunking supported

 Port channels supported 

 Lower scalability

NPV Switch

 

UCS 6100 Fibre Channel Operating Modes 

The primary purpose of enabling Fibre Channel switch mode on a UCS 6100 fabric 

interconnect is so that you can directly connect Fibre Channel storage arrays to the 6100.  

Other than that, all the other features (e.g. VSAN trunking, port channels) are available in 

NPV mode.   

The primary purpose of enabling Fibre Channel NPV (or end-host) mode on a UCS 6100 

fabric interconnect is so that your Fibre Channel fabric can scale beyond 238 initiators 

and targets.  This limitation is due to the maximum number of domain IDs that a single 

Fibre Channel fabric can concurrently support. 

 

 

 

 

 

  



 
 

 

3-3   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 4

Port Types vs. FI Operating Mode 

 

Port Types Versus FI Operating Mode 

The table above describes which port types can be enabled in  the two modes of the 6100 

for Ethernet and Fibre Channel.  Of interest to us in this section are the Fibre Channel 

ports (uplink, storage, FCoE).  Of these, you must enable FC switching mode in order to 

enable and configure Fibre Channel and/or FCoE storage ports.  

 

Note that the Ethernet and Fibre Channel operating modes for the fabric interconnect are 

completely independent of each other. 

 

 

 

  



 
 

 

© Cisco Systems, Inc.  Fibre Channel Enhancements in UCSM 1.4 3-4 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 5

Functional Role of Ports 
(External View)

 

Functional Role of Ports 

The table above identifies the role and mode of the various configurable ports for both 

Ethernet and Fibre Channel when in FC switching mode and EHM mode.  Note that this 

combination of FI operating modes is just one of four possible combinations. 

Of interest here is the “Uplink FC Port”.  Note that such a port will run as an E port with 

trunking enabled (i.e. a TE port) when the FI is in switch mode.  Also note that the 

“FCoE Storage Port” will run as an F port with trunking enabled when the FI is in switch 

mode.  When the FI is in NPV mode, neither of these two port types are configurable. 

 

  



 
 

 

3-5   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 6

Expansion Ports 

E_Ports: used to “expand” a FC fabric by connecting multiple Fibre
Channel switches together

TE_Ports: “trunking” E_ports
which transport multiple 
VSANs over the same ISL

VE_Ports: used to “expand” a FCoE fabric by connecting multiple 
Fibre Channel over Ethernet switches together

 Note VE_Port not supported in UCS (no FCoE multihop)

E_Port E_Port
Fabric 
Switch

TE_Port
Fabric 
Switch TE_Port

VE_Port VE_Port
FCF 

Switch

 

Expansion Ports 

The slide above describes the 3 different types of expansion ports that establish 

interswitch links (ISLs) between Fibre Channel fabric switches.  E ports and TE ports are 

both for “native” ISL connections while the VE ports is used for connecting Fibre 

Channel forwarders participating in a multi-hop FCoE deployment.  

VE ports are included in this discussion only to say that they are not supported in a UCS 

6100.  You can, however, have E and TE ports configured on the UCS 6100 when 

running in Fibre Channel switch mode. 

 

 

  



 
 

 

© Cisco Systems, Inc.  Fibre Channel Enhancements in UCSM 1.4 3-6 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 7

Putting FIs in FC Switching Mode

 

Putting the FI into FC Switching Mode 

In order to run your UCS 6100s in Fibre Channel switch mode, you can select either 

fabric A or fabric B.  After clicking the “Yes” button in the popup dialog, both of your 
fabric interconnects will reboot into switch mode.  For this reason, you must find a 

maintenance window during which all of the servers running in your UCS deployment 

will be offline.  In addition to this configuration in UCSM, you must also configure your 

upstream fabric switch ports as E and/or TE ports to connect to the 6100.  In NPV mode, 

those upstream ports are configured as F/FX ports. 

 



 
 

 

3-7   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—8

Direct-Attached Fibre
Channel Storage

•FC connectivity in UCSM 1.3
• Direct-attach FC storage in UCSM 1.4
•Direct-attach only topology
•Hybrid direct attach with SAN topology
•Unsupported topologies
•Configuring an FC storage port
•Enabling default zoning
•Configuring default VSAN on storage port
•Considerations with merging zonesets

 

Direct-Attached Fibre Channel Storage 

In this section, we discuss the new feature of connecting directly-attached Fibre Channel 

storage arrays to the UCS 6100 in UCSM 1.4. 

  



 
 

 

© Cisco Systems, Inc.  Fibre Channel Enhancements in UCSM 1.4 3-8 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 9

FC Storage Connectivity in UCSM 1.3

SAN Switch

FC STORAGE

NPV/End Host Mode

SAN Switch

 

FC Storage Connectivity in UCSM 1.3 

In UCSM 1.3 and earlier, you must attach your UCS 6100 Fibre Channel uplinks to a 

supported director-class fabric switch (e.g. MDS or Nexus 5000).  Furthermore, you 

cannot configure port channels or VSAN trunks using your Fibre Channel uplinks. 

In UCSM 1.3 and earlier, you could only run the UCS 6100 in NPV (or end-host) mode. 

 
 

  



 
 

 

3-9   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 10

FC Storage

Directly-attached FC Storage in UCSM 1.4

UCS 6100 UCS 6100

Nexus 2248Nexus 2248

 

 

Directly-Attached FC Storage in UCSM 1.4 

In UCSM 1.4, you can bypass a fabric switch and directly connect your Fibre Channel 

storage array to your UCS 6100.  This provides a lower cost entry point for small and/or 

non-production deployments of UCS that don‟t need Fibre Channel services such as 
zoning. 

Note that you cannot manage your upstream Fibre Channel storage arrays using UCSM.  

 
  

 
  



 
 

 

© Cisco Systems, Inc.  Fibre Channel Enhancements in UCSM 1.4 3-10 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 11

Direct Storage Only Topology

FCoE Storage FC Storage

Security

–ONLY via LUN masking

– iGroup for NetApp

– storage group for EMC

No FC zoning

No domain ID config

UCS 6100 UCS 6100

Nexus 2248Nexus 2248

 

Direct Storage Only Topology 

In this topology (one without an upstream fabric switch), there are no zones/zonesets 

configured.  As a result, the only security mechanism to block initiators from seeing 

LUNs not intended for them is through the use of LUN masking.   

 

On the NetApp array, LUN masking is achieved via an iGroup.  On the EMC array, LUN 

masking is achieved via storage groups. 

 

There is no need to configure a domain ID on the fabric interconnects while in Fibre 

Channel switch mode since there is no fabric. 



 
 

 

3-11   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 12

Hybrid Topology with direct-attach and  SAN

FCoE Storage
FC Storage

Core

Fabric A Fabric B

SAN Fabric Storage Arrays

SAN Edge A SAN Edge B

Direct Attach

 Security via zoneset merge

or

 Security via LUN masking

UCS 6100 UCS 6100

Nexus 2248Nexus 2248

 

Hybrid Topology with Direct Attach and SAN 

In this hybrid topology (i.e. one with an upstream fabric switch), you can achieve secure 

your initiator-target visibility using zonesets and/or LUN masking.  This is the suggested 

deployment for those customers who need security beyond simple LUN masking.   

Note that you can mix both fabric-attached and direct-attached Fibre Channel storage in 

this hybrid topology.  You can also configure direct-attached FCoE target arrays to the 

UCS 6100. 

 No FC zoning without connection to MDS/N5K  

– Ensure customer is okay only using LUN mapping 

– Useful for smaller homogeneous (OS) deployments 

– LUN masking usually not sole security measure 

– External SAN management software  

– N5K MIBs are all exposed but READ ONLY 

– 6100 can be added to Fabric Manager but manageability through FM is 
limited (Q: what functionality is/isn’t available?) 

The primary use cases for Fibre Channel direct connect storage includes commercial 

segment, test/development environments, flat architectures, and FC-to-FCoE storage 

migrations. 



 
 

 

© Cisco Systems, Inc.  Fibre Channel Enhancements in UCSM 1.4 3-12 

In the initial release of UCSM 1.4, Cisco will only support NetApp and EMC storage 

arrays for directly connected Fibre Channel arrays.  Subsequent support will be based on 

business cases. 

 

Consult the URLs below for more information:  

• http://www.cisco.com/en/US/prod/ps10265/at_work_promo.
html#~si 

• http://www.cisco.com/en/US/products/ps10477/prod_techn
ical_reference_list.html  

 

  







 
 

 

3-13   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 13

Unsupported FC Connectivity in UCS 1.4

FC connections between the two Fis

FC connectivity from fabric to just one FI and 
not the other

FC connectivity from C-series to array or fabric

 

Unsupported Fibre Channel Connectivity in UCSM 1.4 

The slides identifies some connectivity configurations which are not supported in UCSM 

1.4.   

  



 
 

 

© Cisco Systems, Inc.  Fibre Channel Enhancements in UCSM 1.4 3-14 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 14

Configuring an FC Storage Port

 

Configuring an FC Storage Port 

The screenshot above shows configuring an FC uplink directly attached to a FC array.  

Note that if you wish to merge zonesets from a fabric switch upstream, you‟ll need to 

configure one or more FC uplinks as “normal” uplink ports.  Further, you‟ll need to 
configure the corresponding ports on the upstream fabric switches as E/TE ports.  

Depending on the type of upstream fabric switch, there may be a limitation for which 

ports can be configured as E/TE ports. 

 

Internal to the UCS 6100, the FC storage port is configured as follows: 

 as an F_Port  

 as an access port 

 the speed is auto-negotiated 

The user is also allowed to select one and only one named VSAN for that port. 

 

  



 
 

 

3-15   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 15

Enabling Default Zoning 

SJ2-151-B26-A# scope fc-storage

SJ2-151-B26-A /fc-storage # scope vsan default

SJ2-151-B26-A /fc-storage/vsan # set default-zoning enabled

SJ2-151-B26-A /fc-storage/vsan # commit-buffer

 

Enabling Default Zoning 

If you are not using an upstream fabric switch but you still wish to directly connect Fibre 

Channel storage arrays, then you must enable default zoning on the VSAN(s) that are 

assigned to the FC storage port(s).  You can perform this operation via the command line 

or the GUI, as shown in the graphic above. 

  



 
 

 

© Cisco Systems, Inc.  Fibre Channel Enhancements in UCSM 1.4 3-16 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 16

Configuring a VSAN on a FC Port

 

Configuring a VSAN on an FC Port 

First create a named VSAN  object under the Storage cloud . Note that the VSAN ID and 

FCoE VLAN ID need to be same as the one is created under SAN cloud (though the 

VSAN name could be different). 

  

  



 
 

 

3-17   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 17

Considerations With Merging Zonesets

What are the differences between enhanced 
and basic zone merging?

What happens if upstream MDS is not 
connected when you activate a changed/new 
zoneset?

What happens if you hook up a new upstream 
MDS/5K? 

 

Considerations With Merging Zonesets 

If Enhanced zoning is enabled on the upstream SAN switch, the zoning will merge 

successfully with FI but we can not configure/enable enhanced zoning or any FC services 

on FI.  If device-alias mode is basic then zoning is enforced using the WWPNs of the 

device-alias.  If the device-alias mode is enhanced then the actual device-alias is used. 

Enhanced mode will cause errors on UCS FI and failure of merge 

MDS/N5K to FI zone set merging happens automatically via the FC protocol standard. 

No user action required to initiate or enable in UCSM. 

Zone set merge results in most restrictive taking effect between upstream switch and FI in 

terms of the default zoning enabled.  For example, if either the MDS or the FI has default 

zoning disabled before the merge, default zoning will necessarily be disabled on both 

after the merge.   

If you disconnect the MDS,  there is no way to modify the last state of the zoning on the 

FI.  New upstream fabric switches follow the same rules as the first upstream fabric 

switch. 

 

 

 
 



 
 

 

© Cisco Systems, Inc.  Fibre Channel Enhancements in UCSM 1.4 3-18 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—18

Fibre Channel 
VSAN Trunking

• Fibre Channel trunking in UCSM 1.3
• FC trunking in NPV mode
• Implementation notes
• Enabling trunking
• SAN cloud versus Storage cloud
• Port VSANs versus external VSANs

 

Fibre Channel VSAN Trunking 

In this section, we discuss the ability to trunk multiple VSANs over the same Fibre 

Channel uplink in UCSM 1.4. 

 

  



 
 

 

3-19   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

SAN A SAN B

vFCs

VSAN A

VSAN B

VSAN C

VSAN D

FC Port Trunking in UCSM 1.3

Each VSAN
requires its own 
dedicated FC 
uplink

 

FC Port Trunking in UCSM 1.3 

In UCSM 1.3, each Fibre Channel uplink must have exactly one VSAN configured on it.  

If you wish to isolate storage traffic over multiple VSANs in your UCS, then you must 

configure multiple Fibre Channel uplinks – one per VSAN.  Also note that you‟d need to 
make sure that your vHBA pinning matches up with the VSAN configurations on your 

uplinks. 

 

  



 
 

 

© Cisco Systems, Inc.  Fibre Channel Enhancements in UCSM 1.4 3-20 

fNICs (of vHBAs) can be on different VSANs

Uplink FC ports will be in NPV mode (N-Port)

All VSANs trunked on every uplink FC port

Subset of VSANs for certain uplinks not supported

Scalability: max 32 VSANs per UCS system

FC trunking supported in FC switch mode as well

 Isolate SAN traffic over same physical FC link

 Help consolidate FC infrastructure

Customer benefits

Feature details

SAN A SAN B

vFCs

VSAN A

VSAN B

VSAN C

VSAN D

FC Port Trunking in FC NPV Mode

 

FC Port Trunking in FC NPV Mode 

In UCSM 1.4, you can trunk multiple VSANs over the same Fibre Channel uplink, 

regardless of whether your fabric interconnects are in switch mode or NPV mode.  Note 

that the maximum number of VSANs you can configure in UCS is 32.  Also note that, 

just as with VLANs on Ethernet uplinks, you cannot “prune” or “filter” VSANs.  All 
VSANs that you configure are trunked over all FC uplinks.  

 

  



 
 

 

3-21   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

By default VSAN trunking is disabled

 VSAN trunking is enabled/disabled  per FI

 All VSANs allowed on all FC uplinks in NPV 
and switch mode

 Enabling trunking will flap the ports

 Not supported for FC storage ports

FC Port Trunking Implementation Notes

 

FC Port Trunking Implementation Notes 

The slide above captures some of the considerations when implementing FC port 

trunking in UCS.   

 

  



 
 

 

© Cisco Systems, Inc.  Fibre Channel Enhancements in UCSM 1.4 3-22 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 22

Enabling FC Trunking

 

Enabling FC Trunking 

The screenshot above depicts a UCS system with FC trunking enabled on fabric A.  Note 

that VSAN trunking is enabled per fabric interconnect, so you could potentially run one 

fabric with trunking and one without.  The default setting for VSAN trunking is 

„disabled‟. 
  



 
 

 

3-23   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 23

SAN Cloud vs. Storage Cloud
(Different Scopes)

SAN Cloud has same meaning and objects as 
prior releases

Storage Cloud is specific to FC and FCoE
direct connect storage ports and associated 
VSANs

 

SAN Cloud versus Storage Cloud 

UCSM 1.4 introduces the concept of a “storage cloud” in addition to the “SAN cloud” 
which has always been available in UCS.  The storage cloud contains fabric interconnect 

and VSAN objects which only pertain to directly-attached FC storage devices (i.e. FC 

and FCoE targets). 

  



 
 

 

© Cisco Systems, Inc.  Fibre Channel Enhancements in UCSM 1.4 3-24 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 24

Port VSANs vs. External VSANs

 

Port VSANs versus External VSANs 

A port VSAN provides some level of security by preventing other UCS hosts on a 

different VSAN from accessing that storage.  Port VSAN configurations are required for 

the initial negotiation between the upstream port and the FI FC port and are thereafter 

only used within the UCS system to isolate SAN traffic.  The port VSAN configured on 

the port is used by the switch – storage arrays do not “understand” VSANs. 

 

 

 

  



 
 

 

3-25   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—25

Fibre Channel 
Port Channels

• FC port channels

• Configuring FC port channels

• Displaying FC port channels

• Implementation notes 

 

Fibre Channel Port Channels 

In this section, we discuss the ability to configure Fibre Channel port channels in UCSM 

1.4. 

 

  



 
 

 

© Cisco Systems, Inc.  Fibre Channel Enhancements in UCSM 1.4 3-26 

Up to 16 FC ports per port channel

 Different combination of FC ports from different 
expansion modules on the FI can be placed on 

the same port channel 

 Port channel forces port speed to highest 
commonly supported speeds among uplinks

 VSANs can be trunked over the port channel 

 Port channels in either NPV or switch mode

 FC port channeling is not available for direct 
connect  FC storage port types

 Aggregate and maximize available 
bandwidth while maintaining isolation

 Increases resiliency and guard against 
port failures

Customer benefits

Feature details

SAN A SAN B

vFCs

VSAN A

VSAN B

VSAN C

VSAN D

ISL port 
channel

FC Port Channels

 

Fibre Channel Port Channels  

A Fibre Channel port channel has the following functionality:  

 Provides a point-to-point connection over ISL (E ports) or EISL (TE ports) 

 Up to 16 links can be combined into a port channel 

 Increases the aggregate bandwidth on an ISL by distributing traffic among all 
functional links in the channel 

A port channel load balances across multiple links and maintains optimum bandwidth 

utilization. Load balancing is based on the source ID, destination ID, and exchange ID 

(OX ID).  

A port channel rovides high availability on an ISL. If one link fails, traffic previously 

carried on this link is switched to the remaining links. If a link goes down in a p ort 

channel, the upper protocol is not aware of it. To the upper protocol, the link is still there, 

although the bandwidth is diminished. The routing tables are not affected by link failure.  

The FC uplink members of a port channel may belong to different expansion modules on 

the same UCS 6140 fabric interconnect. 

 



 
 

 

3-27   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 27

Creating an FC Port Channel

 

Creating an FC Port Channel 

The slide above depicts configuring a port channel in UCSM 1.4.  Note that after 

configuring the port channel, you must enable the port channel to bring it up.  Also note 

that you must configure the corresponding ports on the upstream fabric switch to also be 

a port channel.   

 

  



 
 

 

© Cisco Systems, Inc.  Fibre Channel Enhancements in UCSM 1.4 3-28 

 

 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 27

Displaying FC Port Channels

 

Creating FC Port Channels 

The screenshot above depicts a configure port channel in UCS.  There are 3 member 

interfaces on this particular port channel with a negotiated speed of 2 Gbps. 

Here is what a port channel in UCS looks like from the command line.  Note that the port 

channel in the screenshot is taken from a different system as the one below. 

celery-A(nxos)# show interface san-port-channel 1 

san-port-channel 1 is trunking 

    Hardware is Fibre Channel 

    Port WWN is 24:01:00:0d:ec:b4:35:80 

    Admin port mode is E, trunk mode is on 

    snmp link state traps are enabled 

    Port mode is TE 



 
 

 

3-29   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

    Port vsan is 1 

    Speed is 4 Gbps 

    Trunk vsans (admin allowed and active) (1,100) 

    Trunk vsans (up)                       (1,100) 

    Trunk vsans (isolated)                 () 

    Trunk vsans (initializing)             () 

    5 minute input rate 96 bits/sec, 12 bytes/sec, 0 frames/sec 

    5 minute output rate 88 bits/sec, 11 bytes/sec, 0 frames/sec 

      236637 frames input, 116766368 bytes 

        0 discards, 0 errors 

        0 CRC,  0 unknown class 

        0 too long, 0 too short 

      185638 frames output, 40582652 bytes 

        0 discards, 0 errors 

      0 input OLS, 2 LRR, 0 NOS, 0 loop inits 

      2 output OLS, 2 LRR, 0 NOS, 0 loop inits 

    Member[1] : fc2/1 

    Member[2] : fc2/2 

    Interface last changed at Wed Feb  9 09:58:02 2011 

 

Here is what the port channel looks like from the upstream fabric switch: 

 

mds9120-1# show interface port-channel 1 

port-channel 1 is trunking 

    Hardware is Fibre Channel 

    Port WWN is 24:01:00:0e:d7:99:98:00 

    Admin port mode is E, trunk mode is on 

    snmp link state traps are enabled 

    Port mode is TE 

    Port vsan is 1 

    Speed is 4 Gbps 

    Trunk vsans (admin allowed and active) (1,100) 

    Trunk vsans (up)                       (1,100) 



 
 

 

© Cisco Systems, Inc.  Fibre Channel Enhancements in UCSM 1.4 3-30 

    Trunk vsans (isolated)                 () 

    Trunk vsans (initializing)             () 

    5 minutes input rate 112 bits/sec, 14 bytes/sec, 0 frames/sec 

    5 minutes output rate 80 bits/sec, 10 bytes/sec, 0 frames/sec 

      5546201785 frames input, 4788950303692 bytes 

        0 discards, 0 errors 

        0 CRC,  0 unknown class 

        0 too long, 0 too short 

      69486665904 frames output, 140414165469476 bytes 

        32 discards, 0 errors 

      25 input OLS, 14 LRR, 17 NOS, 153 loop inits 

      84 output OLS, 61 LRR, 29 NOS, 60 loop inits 

    Member[1] : fc1/1 

    Member[2] : fc1/2 

    Interface last changed at Wed Feb  9 17:29:18 2011 

 

  



 
 

 

3-31   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 29

FC Port Channeling Implementation 
Notes

Can work in NPV or FC switch mode

MDS and N5K only

Load Balancing algorithm same as N5K

Storage FC ports cannot be channeled or 
trunked

 

FC Port Channel Implementation Notes 

The slide above defines the rules about FC port channels in UCSM 1.4. 

 

 

 

 

 



 
Lesson 4 

UCSM 1.4 Ethernet 

Enhancements 

Overview 

In this lesson you will learn about the new Ethernet enhancements in UCSM 1.4. 

Objectives 

The specific objectives of this lesson are to enable you to perform the following tasks: 

 Define the types of Ethernet ports in UCSM 1.4 

 Describe the new Ethernet features in UCSM 1.4: 

o Direct-connect Ethernet appliance 

o Direct-connect FCoE 

o SPAN 

o PVLAN 

o FabricSync 

o Higer scalability 

  



 
 

 

4-1   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—2

Ethernet Port 
Types in UCSM 1.4

• UCS 6100 operating modes

• Describe UCSM 1.4 Ethernet connectivity

• UCS Manager view of Ethernet ports

• Port types versus operating modes

• Functional role of ports
 

Ethernet Port Types in UCSM 1.4 

In this section, we define the different types of ports configurable in UCSM 1.4. 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-2 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 3

UCS 6100 Operating Modes 

 External LAN sees UCS 6100 as an 

end-host with multiple adapters (no STP)

 Active/Active use of uplinks by 

pinning 

 Single upstream L2 domain

 More scalable than switch mode 

(control plane is not stressed)

 External LAN sees UCS 6100 as a 

traditional Ethernet switch (STP = PVST+)

 Some uplinks blocked by STP (no 

pinning)

 Single or disjoint L2 domains

 MAC learning on uplink/server 

interfaces

End Host Switch

 

UCS 6100 Operating Modes 

The slide above identifies the major differences between Ethernet modes (end-host and 

switch) in UCS.  

 

 

  



 
 

 

4-3   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

appliance

monitor

LAN
IP Storage FCoE Storage

Describe UCSM 1.4 Ethernet Connectivity

UCS 6100 UCS 6100

Nexus 2248Nexus 2248

storage targetuplinks

 

Describe UCSM 1.4 Ethernet Connectivity 

The graphic above depicts the different types of connectivity you can configure based on 

the different types of Ethernet ports available in UCSM 1.4 (which include monitor, 

appliance, and FCoE storage target). 

 

 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-4 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 5

UCS Manager View of New Port Types

 

UCS Manager View of Ethernet Port Types 

The UCSM 1.4 screenshot of the unconfigured Ethernet ports shows the different links 

you can click to enable different types of functionality.    Note that you do not configure 

monitor ports directly as such.  Rather, you create a monitoring session and specify the 

destination port as a monitor port.   

 

  



 
 

 

4-5   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 6

Port Types vs. FI Operating Mode 

 

Port Types Versus FI Operating Mode 

The table above indicates how each type of Ethernet port behaves in either end-host or 

switch mode.  Included in the table are the FC ports as well – these are discussed in a 
different lesson. 

Of note here is the fact that you cannot configure an appliance port in Ethernet switch 

mode.  If your fabric interconnects are in Ethernet switch mode, then you configure those 

uplinks attached to the Ethernet appliance as uplink ports. 

 



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-6 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 7

Functional Role of Ports 

 

Functional Role of Ethernet Port Types 

The table above identifies the functional role (S, U) and port mode (Server, fabric) of 

each of the Ethernet port types.  The FC port types are discussed in another lesson. 

Note that you cannot configure VSAN trunk to FC storage ports, but you can configure 

VSAN trunks (with corresponding FCoE VLANs) to FCoE storage ports.  Also note in 

Ethernet end-host mode, you can not only trunk VLANs to appliance ports, you can also 

specify which specific VLANs you wish to allow. 

 

 

  



 
 

 

4-7   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—8

Direct-Attached 
Ethernet Appliance

• What is an Ethernet appliance?

• UCS appliance connectivity

• Configuring appliance ports

 
 

Direct-Attached Ethernet Appliances 
 

In this section, we discuss directly connecting Ethernet appliances to the UCS 6100. 

 

 

 
 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-8 

What is an Ethernet Appliance?

• Specialized device on Ethernet network

• Behaves like an end-host (no STP)

• Examples include:
• iSCSI target
• NAS filer
• Security appliance
• Nexus 1010

 

 

What is an Ethernet Appliance? 

An Ethernet appliance is a specialized device that typically runs in layer 3.  In other 

words, they are typically accessed using an IP address and may be on the other side of a 

router.   Ethernet appliances don‟t run as switches – they behave as Ethernet end-hosts 
(e.g. they don‟t run STP). Examples of Ethernet appliances are included in the slide 
above. 

 

 

 

  



 
 

 

4-9   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

UCSM 1.4UCSM 1.3

UCS Appliance Connectivity

Ethernet Appliance Ethernet Appliance

Port type – uplink only

No VLAN filtering

No QoS

Port type – appliance

VLAN filtering available

QOS available

Switch Mode

All trunked VLANs

End  Host Mode

Appliance port Trunk or access port

UCSM 1.4 -- End host mode is recommended

Uplink port 

 
 

 

Ethernet Appliance Connectivity in UCS 

The slide above depicts the differences between running the fabric interconnects in 

Ethernet switch mode versus end-host mode. 

In switch mode, there is no fabric failover, no link state signaling, no traffic engineering, 

and no STP avoidance.  You must trunk all VLANs configured in  UCSM to the 

appliance. 

In end-host mode, UCS supports fabric failover (for adapters that include the 

functionality), link state signaling (though no beaconing between team members), traffic 

engineering, and there‟s no STP processing on the UCS. 

For these reasons, Ethernet end-host mode is recommended in UCSM 1.4. 

 

 
 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-10 

UCSM 1.4 Appliance Connectivity

 Any fixed 10G or 1G

 Any expansion port

Ethernet Appliance

* Port channel Single  port

* (non-VPC) NIC teaming required on appliance

Expansion  
Ports

Fixed Ports
UCS 6100 UCS 6100

Nexus 2248Nexus 2248

 

Ethernet Appliance Connectivity in UCSM 1.4 

In UCSM 1.4, the port channel configured on aggregated appliance ports uses static 

pinning.  There is no support for LACP-based port channels in this release (though it is 

targeted for a subsequent release). 

  

 



 
 

 

4-11   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 12

Configuring Appliance Ports

 

Configuring Appliance Ports 

You can use any unused licensed Ethernet port directly attached to an Ethernet appliance 

as an appliance port.  The UCS 6100 must be running in Ethernet end-host mode in order 

to use appliance ports. 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-12 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 13

Configuring Appliance Ports (cont)

 QoS per port

 pin group

 admin speed

 VLAN(s)

 destination MAC
OR

MAC learning

 

Configuring Appliance Ports (cont) 

Appliance ports act like server ports. Just like with vNIC configurations, you can define 

one or more VLANs to be trunked on the interface (as well as optionally specifying the 

native VLAN for the trunk).  You can optionally configure QoS and speed on the 

interface.  You can assign border pin groups or allow default dynamic pinning.  Defining 

a MAC address for the appliance puts a static entry in the MAC address table of the 

fabric interconnect. 

 

  



 
 

 

4-13   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 14

VLANs and Appliance Ports

VLAN scopes:

LAN Cloud

–Per fabric and global

– Internal and external

Appliance Cloud

–Per fabric and global

–External only

 

VLANs and Appliance Ports 

Just as there is a “SAN cloud” and “Storage cloud” for Fibre Channel configuration in 

UCSM 1.4, there is a “LAN cloud” and an “Appliance cloud” for Ethernet configuration.   

Here, “internal” VLANs are those that are used by UCSM and not usable externally.  You 

can see internal VLANs in the NXOS subshell of the UCSM CLI (run „show vlan 

internal usage‟). 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-14 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 15

Connecting Ethernet Appliance to 6100

Port Channels 

– Appliance port channels active/active static only, not 
LACP in this release (targeted for 1.4 maintenance 
release)

– Implication: NetApp dynamic multi-mode VIF is not 
possible (use static multi-mode VIF)

 Fabric failover considerations (i.e what if IOM-
to-FI link fails but FI-to-appliance still good?)

MACs learnt on appliance ports (like server 
port)

–MACs from uplink ports are not learnt in EHM (thus 
this feature)

– You can optionally specify the MAC destination 
Connecting Ethernet Appliances to the UCS 6100 

LACP (802.3ad) and NetApp multi-mode use the same algorithm for determining load-

balancing.   There are two types of NetApp multi-mode: static and dynamic.  The static 

Etherchannel is a pre-802.3ad implementation and the dynamic Etherchannel uses 

802.3ad. 

In Ethernet end-host mode, MAC addresses are learned on appliance ports (just as with 

server ports).  Note that for other (non-appliance) Ethernet uplinks, MAC addresses are 

not learned.  Regardless, in UCSM 1.4, you can statically configure the appliance MAC 

address.  



 
 

 

4-15   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 
 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—16

FCoE
Connectivity

• FCoE connectivity in UCSM 1.4

• Configuring FCoE storage ports

 

FCoE Connectivity 

In this section, we discuss how to directly connect FCoE target storage devices to the 

UCS 6100. 

 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-16 

FCoE Connectivity in UCSM 1.4

SAN

Storage port

LAN

FCOE Storage

Storage port

UCS 6100 UCS 6100

Nexus 2248Nexus 2248

 

FCoE Connectivity in UCSM 1.4 

FCoE storage ports are Ethernet port bound to vfcs.  There are no additional controls 

provided in UCSM beyond configuring the VSAN and FCoE VLAN along with upstream 

or default zoning.  Note there is no FCoE multi-hop support in UCSM 1.4 (this is planned 

for a later release).  

 

In this particular topology (one without an upstream fabric switch), there is no zoning to 

inherit.  For this reason, the only protection you have between initiators and targets is in 

the LUN masking feature of the target FCoE array. 

 

 

  



 
 

 

4-17   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 18

Hybrid Topology with direct-attach and  SAN

FCoE Storage
FC Storage

Core

Fabric A Fabric B

SAN Fabric Storage Arrays

SAN Edge A SAN Edge B

Direct Attach

 Security via zoneset merge 
and/or LUN masking

 No fabric failover for FCoE
storage ports

UCS 6100 UCS 6100

Nexus 2248Nexus 2248

 

Hybrid Topology With Direct-Attach FCoE and SAN 

In this hybrid topology, we have both directly-attached FCoE/FC arrays as well as an 

upstream fabric to which both UCS 6100s connect.  Using those upstream fabric 

switches, you can disable „default zoning‟ and inherit (merge) the zonesets that are active.  

In this way, you can protect initiators and targets from each other using both LUN 

masking and zoning. 

 

 



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-18 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 19

Configuring FCoE Storage Ports

 

Configuring FCoE Storage Ports 

An FCoE storage port is any unused licensed Ethernet port on either the fixed or 

expansion modules of the UCS 6100.  

  



 
 

 

4-19   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 20

Configuring FCoE Storage Ports (cont)

 

Configuring FCoE Storage Ports (cont) 

The FCoE storage port can trunk multiple VLANs (but like the FC storage port, it can 

only carry a single VSAN).  You must configure the native VLAN for the trunk, and the 

FCoE VLAN cannot be the native VLAN.  By default, VLAN 4048 was arbitrarily 

chosen as the default native FCoE VLAN for all FCoE storage ports unless otherwise 

specified (as shown in the screenshot above). 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-20 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 21

Configuring FCoE Storage Ports (cont)

 

Configuring FCoE Storage Ports (cont) 

In the screenshot above, the user is selecting the VSAN to assign to the FCoE storage 

port.  No upstream configuration is required for this VSAN. 

 

  



 
 

 

4-21   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—22

Unified Monitoring 
(SPAN)

•Describe UCS traffic monitoring

•Describe UCSM 1.4 unified monitoring

•Configure SPAN in UCSM 1.4

 

SPAN 

In this section, we discuss how use SPAN to monitor both Ethernet and Fibre Channel 

traffic in UCSM 1.4. 

 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-22 

UCSM 1.4UCSM 1.3

UCS 6100

LAN
SAN

Eth 
Analyzer

FC
Analyzer

vHBAvNIC 1

Port 0

UCS server A

 Requires a dedicated FC analyzer

 Separate analyzers for FC and Eth

 Requires specialized in-line TAP

 Monitor FC and Eth traffic using Eth analyzer

 Single analyzer to monitor FC and Eth 

 Eliminates expensive FC analyzer 

UCS 6100

vHBAvNIC 1

Port 0

UCS server A

Eth 
Analyzer

Monitor FC and Ethernet traffic with a single analyzer

UCS Traffic Monitoring

 

UCS Traffic Monitoring 

The differences in monitoring FC and Ethernet traffic between UCSM versions 1.3 and 

1.4 are described in the slide above. 

 

 

 

  



 
 

 

4-23   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 Complex connectivity
 Inability to monitor specific VM traffic
 Lack of visibility (bulk capture)

 Simple connectivity
 Ability to monitor specific VM traffic
 Granular visibility

vNIC level monitoring and troubleshooting capability

vNIC MonitoringTraditional SPAN

SPAN int vNIC2
saw only vNIC 2

VM-FEX mode

UCS 6100

vNIC3vNIC2

VM VM

SPAN- Int Eth1/1
Needs only vNIC 2 
but saw vNIC 1 & 3

M81KR
VIC

Eth  Analyzer

Nexus 5000

vNIC1

VM

Port 0

UCS 6100

vNIC3vNIC2

VM VM

M81KR
VIC

vNIC1

VM

Port 0

Eth1/1

Eth  Analyzer

UCSM 1.4 vNIC /vHBA Monitoring 
(aka Unified Monitoring)

 

UCSM 1.4 vNIC/vHBA Monitoring 

Besides unifying FC and Ethernet monitoring onto a single port and analyzer, you also 

have granular visibility to a specific virtual machine interface for monitoring.  In UCSM 

1.3, you were obliged to SPAN all traffic (bulk capture) over a physical port and then 

filter for the specific virtual machine interface traffic.  In UCSM 1.4, you can specify 

(among many other sources of traffic) a PTS-in-hardware virtual machine interface as a 

source of traffic to monitor. 

 

 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-24 

 Maximum 4 SPAN sessions per UCS system (2 on each UCS 6100)

 vNIC & vHBA level monitoring with VIC for bare metal and FC traffic

 Traffic monitoring for Bare metal

Cluster Link

Troubleshooting
Tool

Eth Analyzer Troubleshooting
Tool

FC Analyzer

UCS 6100 A UCS 6100 BUnused licensed ports

 Configure identical monitoring sessions in both fabrics for failover and load-
balanced traffic flows

 vHBA is available to be monitored in both FC and Eth monitoring configurations

 Monitoring session of a VM using PTS not persistent after a vMotion (VIF is 
changed)  -- future enhancement

Things to remember :  

UCSM 1.4 Traffic Monitoring Summary

 

UCSM 1.4 Traffic Monitoring Summary 

A summary of traffic monitoring configuration notes is given in the slide above. 

 

  



 
 

 

4-25   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 26

UCSM 1.4 SPAN Configuration

SPAN destination can be any unused licensed port

 

UCSM 1.4 SPAN Configuration 

To configure an Ethernet monitoring port, you first create a SPAN monitoring session and 

then specify the destination Ethernet port as the monitoring port. 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-26 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 27

UCSM 1.4 SPAN Configuration (cont)

Support for various Eth and FC monitoring sources 

 

UCSM 1.4 SPAN Configuration (cont) 

The sources of traffic for a SPAN session are pretty much everything in UCS that 

generates traffic, including all the Ethernet and Fibre Channel port and interface types. 

 

 

  



 
 

 

4-27   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—28

PVLAN

•Describe VLANs in UCSM 1.3

•Describe PVLANs in UCSM 1.4

• Identify PVLAN design considerations

•Describe PVLANs with Nexus 1000v in UCSM 1.3

•Describe PVLANs with Nexus 1000v in UCSM 1.4

•Configure PVLANs in UCSM 1.4

 

PVLAN 

In this section, we discuss using private VLANs in UCS. 

 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-28 

VLAN Deployment  L2 separation with VLANs

 One VLAN or more per 

tenant/application/function

 VLAN scalability on various platforms is a 

deciding factor of NW scale

vNIC 1 vNIC 2vNIC 1

Port 1Port 0 Port 1Port 0

VM VM

Tenant A Tenant B Tenant C

Bare metal

# of VLANs used = 3

VLAN A

VLAN B

VLAN C

VLANs in UCSM 1.3

VLANs are finite … One per tenant/application is expensive 

 

VLANs in UCSM 1.3 

Deploying 1 VLAN per application/tenant/etc does not scale well in any environment, 

UCS or otherwise.  In the example above, isolating tenants A, B, and C from each other 

would require 3 VLANs minimally. 

 

 

  



 
 

 

4-29   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 L2 Separation with isolated PVLAN

 Single isolated VLAN for all tenants/apps

 Provides same level of isolation as with 

VLAN

 VLAN limits is no longer scalability limiting 

factor

UCS 6100

vNIC 1 vNIC 2vNIC 1

Port 1Port 0 Port 1Port 0

UCS 6100

VM VM

Tenant A Tenant B Tenant C

Bare metal

# of VLANs used = 1

Isolated VLAN A

Single Isolated PVLAN to provide v NIC level layer 2 separation  

M81
KR
VIC

PVLAN Deployment

PVLANs in UCSM 1.4

 

PVLANs in UCSM 1.4 

UCSM 1.4 solves the VLAN scalability problem by supporting private VLANs.  

PVLANs provide the same level of L2 isolation as “normal” VLANs do, but by using 
many fewer VLANs.  In fact, a single isolated VLAN can be used to isolate traffic 

between tenants A, B, and C in the slide above. 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-30 

Only PVLAN isolated access is supported

Community PVLAN is not supported

Promiscuous port is not supported

 One isolated VLAN per primary VLAN

Cannot carry PVLAN and regular VLANs on same vNIC

PVLAN Design Considerations

 

PVLAN Design Considerations 

A private VLAN (PVLAN) partitions the Ethernet broadcast domain of a VLAN into 

subdomains and allows you to isolate some ports. Each subdomain in a PVLAN includes 

a primary VLAN and one or more secondary VLANs. All secondary VLANs in a 

PVLAN must share the same primary VLAN. The secondary VLAN ID differentiates 

one subdomain from another.  

All secondary VLANs in a Cisco UCS instance must be isolated VLANs. Cisco UCS 

does not support community VLANs.  Communications on an isolated VLAN can only 

use the associated port in the primary VLAN. These ports are isolated ports and are not 

configurable in Cisco UCS Manager. If the primary VLAN includes multiple secondary 

VLANs, those isolated VLANs cannot communicate directly with each other. 

An isolated port is a host port that belongs to an isolated secondary VLAN. This port has 

complete isolation from other ports within the same private VLAN domain. PVLANs 

block all traffic to isolated ports except traffic from promiscuous ports. Traffic received 

from an isolated port is forwarded only to promiscuous ports. You can have more than 

one isolated port in a specified isolated VLAN. Each port is completely isolated from all 

other ports in the isolated VLAN. 

When you create PVLANs, be aware of the following guidelines: 



 
 

 

4-31   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

 

 

 The uplink Ethernet port channel cannot be in promiscuous mode. 

 Each primary VLAN can have only one isolated VLAN. 

 VIFs on VNTAG adapters can have only one isolated VLAN. 

 

 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-32 

Promiscuous on the Nexus 1000v

VM1 VM2

Cat6500 – L3

vNICvNIC

VM3

vNICs are promiscuous trunks, 
terminate PVLAN on the 
Nexus 1000v . Only supported 
config with UCS in Aptos+

No special PVLAN configuration is 
required, UCS treats primary VLAN
like any regular VLAN.

For more details check Nexus 1000v PVLAN guide

Nexus 1000v

Promiscuous 
Port

PVLANs With Nexus 1000v in UCSM 1.3

 

PVLANs With Nexus 1000v in UCSM 1.3 

PVLANs are an end-to-end feature (where the server network interface is one terminus 

and the promiscuous port upstream is the other terminus).   

In the Nexus 1000V deployment, the uplinks on the ESX servers are configured as 

promiscuous trunks (and are therefore the endpoints of the PVLAN domain).  No special 

configuration is required upstream of the Nexus 1000V (other than to support 802.1Q). 

 

 

  



 
 

 

4-33   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

Adapter

Promiscuous outside of the Nexus 1000v

VM1 VM2

Cat6500 – L3

vNICvNIC

VM3

Nexus 1000v

Backup
Promiscuous Port

Trunk carrying regular VLANs: 
service console, vMotion and 
control

Requires minimum of 2 vNICs

Fabric failover recommended with 
PVLAN for HA assuming 2 vNIC
configuration

Isolated PVLAN

For more details check PVLAN tech note - http://savbu.cisco.com/attachments/PVLANs-UCS.pdf

Enable PVLAN Isolated Access

PVLANs with Nexus 1000v in UCSM 1.4

 

PVLANs with Nexus 1000v in UCSM 1.4 

Starting in UCSM 1.4, you can configure the UCS 6100s to participate in one or more 

PVLANs.  Each PVLAN has a primary VLAN and one or more secondary (isolated) 

VLANs associated with it.   

Since you cannot carry both isolated and primary VLANs on the same uplink, you must 

dedicate one to be isolated and the other for non-isolated traffic.  Typically, the isolated 

traffic is the data traffic that the virtual machines carry and the non-isolated traffic 

includes traffic such as vMotion, service console, control, and packet VLANs. 

Since this implies the need for at least 2 interfaces, using the Cisco VIC adapter is 

recommended here.   

 

 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-34 

Isolated PVLAN shared between Nexus 1000v and bare metal 

VM1 VM2

Cat6500 – L3

vNICvNIC

VM3
Bare metalBare metal

vNIC
vNIC

Nexus 1000v

Backup
Promiscuous Port

Choose vNIC for isolated PVLAN
on bare metal and 1000v
Assign VLAN 101

All vlans on uplink port
are allowed

switchport mode trunk

switchport trunk allowed 

vlan 100,101

Isolated VLAN 101

Adapter Adapter

Adapter

PVLANs With Nexus 1000v in UCSM 1.4 (cont)

 

PVLANs with Nexus 1000v in UCSM 1.4 (cont) 

The same isolated VLAN can be used to isolate L2 traffic between virtual machines 

(sitting behind the Nexus 1000V) and bare metal servers deployed in a UCS environment.   

 

  



 
 

 

4-35   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

One Isolated PVLAN is supported with 
M71KR adapter 

VIC is recommended for traffic load-sharing 
and HA

VMware DVS does not support native VLAN
on the trunk hence Isolated PVLAN on the 
UCS does not work with Vmware DVS.

UCSM 1.4 PVLAN Summary

 

UCSM 1.4 PVLAN Summary 

Using PVLANs in UCSM 1.4 requires at least 2 interfaces (one carrying the non-isolated 

VLAN(s) and one carrying the isolated VLAN), so using the M81KR is recommended.  

However, if you use the M71KR adapter instead, it is recommended to enable fabric 

failover on those 2 interfaces. 

PVLANs in a bare metal environment do not require any special configuration or support 

on the part of the bare metal operating system.  Bare metal OSes are totally unaware of 

the distinction between primary and isolated VLANs. 

PVLANs in a virtualized environment require support on the part of the hypervisor 

because there is a virtual/soft switch in the hypervisor that is in the path of the end-to-end 

PVLAN.  As of the writing of this document, PVLAN only works with PTS and Nexus 

1000V in ESX virtualized environments. 

 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-36 

Primary and Secondary VLANs and  their mapping using UCSM

Configuring PVLAN in UCSM 1.4

 

Configuring PVLAN in UCSM 1.4 

Configuring the primary and secondary (isolated) VLANs in the UCSM GUI is shown in 

the screenshot above.  Note that only isolated (non-community) PVLANs are supported 

in UCSM 1.4. 

  



 
 

 

4-37   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—37

FabricSync

• Describe fabric failover in UCSM 1.3

• Describe the silent VM problem

• Describe UCSM 1.4 FabricSync

•Discuss link redundancy in Microsoft Hyper-V

•Discuss design considerations with FabricSync

 

FabricSync 

In this section, we discuss the FabricSync feature of UCSM 1.4 which enhances network 

redundancy for virtual machines running in UCS. 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-38 

 Redundant path for each vNIC (a+b)

 HW based active/standby failover 
mechanism for Eth traffic

 Host OS un-aware of failure and recovery

 Unlike OS NIC Teaming, redundancy 
provided with single interface

 After failover FI will
 Transmit gARP
 Multicast Group reRegistration

Enable fabric failover in vNIC creation

UCSM 1.3 Fabric Failover

 

UCSM 1.3 Fabric Failover 

Fabric failover is a feature that has been with UCS since it first released.  It is enabled on 

a per-vNIC basis, as shown in the screenshot above. 

After a failure is detected on a fabric, all server interfaces configured with fabric failover 

will be “ready” on the failover fabric.  The UCSM will transmit a gARP and re-register 

multicast groups for the interface. 

  



 
 

 

4-39   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

VM

vSwitch

Eth 0 Eth 1

Silent VM

Traffic black 
hole

MAC A     Ten1/1

 Silent VM describes a VM receiving but not sending 
traffic (one way communication)

 Rare in production networks

 Fabric failover enables standby path upon active path 
failure

 Does not provide path update for VM’s behind the 
hypervisor

 Upstream switch continues to use old path until VM
starts talking

Ten1/1
Ten1/2

MAC A

UCS Server 

Silent VMs in UCSM 1.3

 

Silent VMs in UCSM 1.3 

In UCSM 1.3, the gARP and IGMP multicast re-registration was not performed for 

virtual machine interfaces sitting behind a hypervisor in UCS.  If such virtual machines 

were actively sending packets prior to and during the fabric failure, then they would be 

immediately visible on the failover fabric.  However, if these virtual machines were 

“silent” (i.e. not sending any packets), then any packets sent to them after the fabric 
failure would “black hole” to the failed fabric. 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-40 

UCS Server 

Eth 0 Eth 1

Return traffic for MAC 

MAC A

MAC  C 
Ten 1/1

Ten 1/1 Ten 1/2

MAC C 
Ten 1/2

MAC B

MAC D

gARP
MAC D

 Keeps mac address table synchronized 
between FI’s

 6100 updates path changes to 
upstream switches via gARP not only 
vNIC MACs but also VM MACs behind a 
vSwitch upon active link failure

 Always enabled 

VM

MAC C

UCSM 1.4 FabricSync

 

UCSM 1.4 FabricSync 

UCSM 1.4 has a new feature called FabricSync which solves the silent virtual machine 

problem.  In essence, the feature synchronizes the MAC address tables of both fabric 

interconnects with each other and will perform the gARP and IGMP re-registration for 

both physical server vNICs as well as virtual machine interfaces. 

  



 
 

 

4-41   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

VM

vSwitch

Eth 0 Eth 1

Silent VM

 FabricSync along with Fabric failover  solves silent 
VM issues

 FabricSync tracks the remote mac-addresses  and 
triggers gARPs upon their active path failure

 Path changes are updated immediately, provides 
faster recovery

Ten1/1

Ten1/2

Mac-sync

gARP VM
MAC A

MAC A     Ten1/2

UCS Server 

MAC A

FabricFailover with FabricSync resolves Silent VM issue

Silent VMs in UCSM 1.4

 

Silent VMsin UCSM 1.4 

Now the virtual machine can either be “silent” or actively sending packets up to and 

during a fabric failure, and their respective interfaces will still failover to the other fabric.  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-42 

VM

Server

Switch 1  Can only connect a single NIC to a virtual switch in 

Hyper-V

 Single point of failure

Hyper V
vSwitch

No redundancy for Hyper-V Link 

Hyper-V Link Redundancy in UCSM 1.3

 

Hyper-V Link Redudnancy in UCSM 1.3 

Microsoft Hyper-V only supports a single vNIC attached to their virtual switch.  This is a 

single point of failure from a network perspective. 

  



 
 

 

4-43   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

Server

 Hyper-V does not support NIC teaming or bonding

 Requires 3rd party intermediate NIC teaming driver 

software to provide network link HA

 Officially not supported by Microsoft technical 

support

VM

Switch 1

Hyper V
vSwitch

Switch 2

Virtual Machines LAN NIC team adapter

LAN  Primary NIC LAN  Secondary NIC 

Server

Hyper-V Link redundancy with NIC teaming

Hyper-V Link Redundancy in UCSM 1.3 (cont)

 

Hyper-V Link Redundancy in UCSM 1.3 (cont) 

Source Microsoft support website http://support.microsoft.com/kb/968703 date 09/22/10  

“Since Network Adapter Teaming is only provided by Hardware Vendors, Microsoft does 

not provide any support for this technology thru Microsoft Product Support Services. As 

a result, Microsoft may ask that you temporarily disable or remove Network Adapter 

Teaming software when troubleshooting issues where the teaming software is suspect.”  

 

  




 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-44 

VM

Hyper V
vSwitch

Eth 0

 Fabric  failover provides hardware based redundancy 

and failover

 Microsoft fully supports fabric failover based 

configuration

 Eliminates need for un-supported software teaming 

drivers

 Predictable and faster failover 

Redundant 
path

Eth 1

UCS Server 

Enhanced Hyper-V Link Redundancy in UCSM 1.3

 

Enhanced Hyper-V Link Redundancy in UCSM 1.3 

Microsoft Hyper-V does support fabric failover in UCS, so using an M71KR or M81KR 

adapter can provide redundancy and eliminate the single point of failure inherent in a 

supported Hyper-V deployment. 

  



 
 

 

4-45   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

For bare metals – YES

For VM-FEX aka VN-link in hardware aka PTS – YES

For ESX hosts – NO as the general recommendation

Hyper-V – YES

Other Hypervisor based OS’es like XEN, KVM etc – NO

Design Considerations With FabricSync

 

Design Considerations With FabricSync 

VMware DVS and the Nexus 1000v now support queuing at the soft switch level. For 

better queuing, it is essential for it to see what all links are available i.e not down. With 

FF vNICs, the vNICs always stay up.  

The failover to the other fabric involves border port repining and then gARP‟s being sent 

out by the FI. This is a software driven process. For hundred of VM‟s this gARP process 
if done by the FI is CPU intesive and time consuming. If FF is not chosen, the gARP‟s for 
the VM‟s becomes a distributed process amongst the various ESX hosts and the FI will 

pass on the packets in hardware. So it will be relatively (depends on the scale) quicker.  

Hyper-V – YES. Without Fabric failover, UCS cannot provide predictable redundancy for 

Hyper-V environments in End-Host-Mode of operation as teaming is not part of the 

Hyper-V soft switch 

Other Hypervisor based OS‟es like XEN, KVM etc – NO. Same reasoning  as ESX 

above. Both XEN and KVM do support teaming at the soft switch level and it works with 

non FF vNICs right now. 

Nexus 1000v has not gone through scalability testing with the Fabric Failover settings on 

UCS. Basic functionality testing has been done. For Nexus1000v with Menlo adapter 

with 1 isolated VLAN – Enable Fabric Failover as that‟s the only way redundancy can be 
provided. 



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-46 

 

 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—46

Management 
Interface Monitoring 
and Failover

•Describe management interface failover in UCSM 1.3

•Describe management interface failover in UCSM 1.4

•Configure management interface failover in UCSM 1.4

 

Management Interface Monitoring and Failover 

In this section, we discuss the ability to monitor and failover management interfaces in 

UCSM 1.4. 

  



 
 

 

4-47   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

Management Interface Failover in UCSM 1.3

Cluster Link

MGMT

6100-A Primary 6100-B Secondary

 VIP does not failover to UCS 6100 secondary

 Recover access by manual failover using CLI of the UCS 6100 secondary

 KVM/IPMI/SSH IP does not failover 

 

Management Interface Failover in UCSM 1.3 

In UCSM 1.3, the failure of a management interface (MGMT0) on the UCS 6100 did not 

trigger any reaction in UCSM.  As a result, the primary/secondary relationship did not 

change, nor did the balance of CIMC IP addresses that are normally split 50/50 across the 

two 6100s. 

If the management does fail in UCSM 1.3, then it is a manual process to change the 

primary role to the other 6100 (if the interface that failed was on the primary).  Also, the 

CIMC IP addresses that were configured on the 6100 with the failed management 

interface could not be failed over. 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-48 

Management Interface Failover in UCSM 1.4

Cluster Link

MGMT

6100-A Primary 6100-B Secondary

With management interface monitoring policy :
 VIP failover to UCS 6100 secondary upon active MGMT port failure

 KVM/IPMI/SSH IP fails over to the available fabric

 Failover delay is 90 sec to limit CPU churn due to continues interface flaps

 Managing instance not stateful (re-login required for VIP and KVM/IPMI/SSH IP)

 

Management Interface Failover in UCSM 1.4 

UCSM 1.4 has a new feature to monitor the OOB management interfaces of the UCS 

6100s.  After a failure is detected on a management interface, the IP addresses (VIP and 

CIMC addresses) fail over to the other 6100 without any manual intervention.   

Note that the TCP/IP state of the network connections is not replicated between the 

6100s, so all existing connections (i.e. to UCSM or CIMCs) must be reconnected by the 

end user. 

 

  



 
 

 

4-49   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

Management Interface Monitoring Policy

Recommendation:
Always enable/disabled by 
default

 

Management Interface Monitoring Policy 

Note that there are 3 different monitoring mechanisms you can use: MII status, ARP ping 

targets, and gateway ping target.  Note that the default gateway configured in UCSM will 

be used in that mechanism. 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-50 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—50

Higher Scalability

•Describe scalability in UCS

•Describe VLAN scalability in UCSM 1.4

•Define UCS virtual ports

•Define UCS virtual interfaces

•Compare and contrast scalability in UCSM 1.3 and 1.4

 

Higher Scalability 

In this section, we discuss how UCSM 1.4 provides a higher degree of scalability for 

server and network deployments in UCS. 

  



 
 

 

4-51   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

Feature Name Aptos+ Balboa

VLANs per FI 512 1024

STP logical ports 3800 6000

VIFs 1000 2000

Number of chassis 14 20

Scalability in UCS

 

Scalability in UCS 

The scalability factors in UCS in UCSM 1.3 (Aptos) and UCSM 1.4 (Balboa) are given 

in the slide above.  Note that the network factors roughly doubled. 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-52 

UCSM 1.4 VLAN Scalability

Feature Name
Aptos+
June 2010

Balboa

VLANs supported 512 1024

VLANs available 498 948

76 VLANs reserved (948 available)

 12 Reserved including UCS default VLAN and VSAN

 32 Reserved for VSANs within UCSM

 32 Reserved for FCoE VLANs (to map to VSANs)

Need for increasing VLAN support …

 VLAN everywhere/larger Layer 2 domains

 Hosting providers implementing VLAN = a customer  

 

UCSM 1.4 VLAN Scalability 

Of the 1024 VLANs that are available in UCSM 1.4, only 948 are actually usable.  The 

other 72 VLANs are reserved as described in the slide above. 

  



 
 

 

4-53   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 53

V
L

A
N

10

V
L

A
N

20

V
L

A
N

30

V
L

A
N

40

V
L

A
N

50

Logical ports = sum of All VLANs on ALL trunks
of every port in the system + access ports

UCS Virtual Ports

 

UCS Virtual Ports 

Virtual ports are representations for a physical interface‟s aggregate VLAN membership. 

These are represented to the system as a particular {Port, VLAN} instance. In simplest 

terms, for a given physical interface, each VLAN represents a separate VLAN-port. 

VLAN-port maintains various L2 interface state/information. VLAN-port scalability 

limitation is still applied even if STP is disabled or UCS 6100 is running in EHM. 

 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-54 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 54

Virtual Interfaces in UCS

VNIC VNIC

VETH VETH

 Interface descriptor on fabric interconnect

 Maps through VN-Link to vNIC on a IOM, server, or VM

 Endpoint of the VNtag

 Finite number supported
 Memory for interface structure just like a physical adapter 

on any Cisco Switch
 Number of VNTags also limited (by hardware)

 

Virutal Interfaces in UCS 

All Ethernet and Fibre Channel interfaces configured inside a UCS require a virtual 

interface configuration on the UCS 6100.  These VIFs are endpoints of the VNTAG 

which defines all “north-south” communication in UCS.  There are only a finite number 

of these that can run in UCS (they consume resources). 

  



 
 

 

4-55   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 55

Virtual Interface Count 

Virtual Interfaces

Count

Aptos+

June 2010
Balboa

6100 1000 2000

Oplin 2 2

Menlo 2 2

Emulex/Q-logic Gen 2 2 2

Cisco VIC 58 (56 usable) 58(56 usable)

 

Virtual Interface Count 

Note that the number of virtual interfaces supported in UCSM 1.4 only changes on the 

fabric interconnects.  No hardware changes are implied here for the adapter cards. 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-56 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 56

Scalability in UCSM 1.3

4 links each to 
fixed FI ports

VIC  Assumptions
 VLAN per tenant (498 tenants)
 General compute VMs(4 VMs per core)
 1 VIC per VM
 1 VIC per service console,MGMT,vMotion 

and vHBA
 VMs per blade 32
 No of VMs = 32 * 24 = 768
 No of VLANs=498
 No of tenants=498
 No of virtual interfaces= 768 + (24*4) = 864 

<1000
 No of logical ports= (2*498)+(24*32)=1764<3000
 vMotion everywhere is okay

3 chassis with VN-link in hardware

 

Scalability in UCSM 1.3 

Based on the assumptions given in the slide (e.g. VNLINK-in-hardware only), such a 

deployment could only scale to up to 3 chassis in UCSM 1.3. 

  



 
 

 

4-57   UCS and Data Center Virtualization  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 57

Scalability in UCSM 1.4

4 links each to 
fixed FI ports

VIC

5 chassis with VN-link in hardware

 Assumptions
 VLAN per tenant
 General compute VMs(4 VMs per core)
 1 VIC per VM
 1 VIC per service console,MGMT,vMotion 

and vHBA
 VMs per blade 32
 No of VMs = 32 * 40  = 1280
 No of VLANs=948
 No of tenants=948
 No of virtual interfaces= 1280 + (40*4) = 

1440<2000
 No of logical ports=(2*948)+(32*40)=3176
 vMotion everywhere is okay

 

Scalability in UCSM 1.4 

Based on the same assumptions (i.e. VNLINK-in-hardware only), the same deployment 

in UCSM 1.4 could scale to up to 5 chassis. 

  



 
 

 

© Cisco Systems, Inc.  Ethernet Enhancements in UCSM 1.4 4-58 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 58

Mix of Meno and PALO
2 Chassis with Menlo/Nexus 1000v
4 chassis with VN-link in hardware

 Assumptions
 VLAN per tenant 150 in Menlo sub-group

798 in VIC sub-group. No VMotion between 2 
sub-groups, but within is OK

 General compute VMs
 1 VIC per VM
 1 VIC per service console,MGMT,vMotion and 

vHBA
 VMs per blade 32
 No of VMs = 32 * 32  = 1536
 No of VLANs=948
 No of tenants=948
 No of virtual interfaces= 1024+ (32*4)+(2*16) = 

1184<2000
 No of logical 

ports=(2*798)+(32*32)+(300*16*2)=7420

4 Links each
to Fixed FI 

Ports

VIC

Menlo/N1k

 

Mix of Menlo and Palo 

Mixing M71KR and M81KR adapters in the sample deployment could scale to up to 6 

chassis in UCSM 1.4 (2 of those chassis with servers running the M71KR adapter and 4 

of those chassis with servers running the M81KR adapter). 

 

 

 



 
Lesson 5 

UCS 1.4.1 Release 

Compute Enhancements 

Overview 

In this lesson you will learn what compute enhancements new as of the release of UCSM 

version 1.4.1. 

Objectives 

The specific objectives of this lesson are to enable you to describe the following: 

 Describe the New UCS B230 Server Blade 

 Explain UCS Support of the UCS c-series Integration to UCSM 

 Summarize the New UCSM Power Capping Capability 

 Describe New Server and Adapter Software Packs. 
  



 
 

 

5-1   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—2

Describe the New 
UCS B230 Server 
Blade

Upon completion of this section you will:

• Describe Internal B230 Architecture
• Define Value Propositions for the B230
• Examine Competitor's  Products
• Summarize Power Requirements for the B230

 

Describe the New UCS B230 Server Blade 

In this section you will discuss the following content: 

 Describe Internal B230 Architecture 

 Define Value Propositions for the B230 

 Examine Competitor's  Products 

 Summarize Power Requirements for the B230 
  



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-2 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 3

Describe Internal B230 Architecture

Dual Port 
Converged I/O 
Adapter;  20 

MB/s

32 DIMM Slots; 
up to 512 GB* 

Memory

2 Intel Xeon 7500 
or 6500 

(Nehalem EX), 4, 
6, 8 cores*2 optional SSD 

(100GB*)

 

Describe Internal B230 Architecture 
 

The B230 has the following architecture specifics: 

 

 Form factor the same as B200 (single width) 

 2 socket, multicore CPU. It can use both 7500 series and 6500 series processors 

 32 DIMM slots, with 8GB DIMMS up to 256 GB RAM, with 16GB up to 512GB 
RAM 

 Dual port converged network adapter (M71 or M81) 
  



 
 

 

5-3   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 4

Explain Supported Network Cards

PID Description

N20-AC0002 UCS M81KR - Virtual Interface Card

N20-AE0002 Emulex TigerShark - CNA

N20-AI0002 Intel Niantic - Ethernet

N20-AB0002 Broadcomm Everest - Ethernet

N20-AQ0102 Qlogic Shultz - CNA

 

Explain Supported Network Cards 

The B230 will support Gen2 only Mezzanine cards. The B230 supports the following 

Mezzanine Cards: 

 UCS M81KR - Virtual Interface Card 

 Emulex TigerShark -  CNA 

 Intel Niantic - Ethernet 

 Broadcomm Everest - Ethernet 

 Qlogic Shultz - CNA 
  



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-4 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 4

Define Value Propositions for the B230

• B250 with 192GB RAM = 
110 W7 Desktop

• B250 is full width blade
• B200 Does not have 

memory capacity needed 
for DT VM Density

• Single Width B230 
doubles your DT VM 
footprint

• Processors cores up to 
8* and DIMMS up to 
16GB in size

BENEFITS

• Lower operating and licensing expenses

• Higher density

• Reduced foot-print

 

Define Value Propositions of B230 

IT departments are looking to lower costs. Virtualization has help reduce server sprawl 

successfully, however as more and more workloads are being virtualized, IT departments 

are looking to reduce licensing costs, and the number of physical servers running VMs. 

The B230 is designed for these specific benefits: 

 Lower operating and licensing expense - More cores still only 2 sockets means 
more CPU for memory bound applications or virtual workloads 

 Higher density -  with capacity up to 512 GB with 16GB DIMMs  you can put on 
larger virtual workloads, like desktop VMs for VDI. 

 Reduced foot print - At single width and nearly the same memory capacity, you 
can in effect swap out B250 for the smaller B230 without losing performance or 

memory capacity 

  

 

 

  



 
 

 

5-5   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 5

Examine Competitor's Products - HP

3 Mezz Slots 32 Dimm Slots 2 Nehalem EX

2 
SFF
SAS / 

SATA / SSD

Internal USB Dimm Slots

BL 620c G7 – FH / SW 2s Blade server

 

Examine Competitor's Products - HP 

HP blade comparison is with the 620 c. The HP 620 c has the following architecture: 

BL 620c G7 – FH / SW 2s Blade server 

 2 Hot-Plug SFF drives (SAS / SATA / SSD_ 

 32 DIMM Sockets (512 Gb Max using 16gb DIMMs) 

 Embedded CNA – act as NIC / HBA or iSCSI (all Flex-10) 

 Can pair with other blade – yields FH / DW 64 4s DIMM Blade – BL680c G7 
(expected but not officially announced) 

When comparing the B230 to HP we provide the following advantages: 

 Better density than BL620 (single wide versus double wide) 

 Same processor / core count in c7000 as UCS 5100 (but 6u vs. 10u) 

 Position Marin as better offering, all the features half the size 

 UCS story still should be the focus, including Flex fabric deficiencies 

 

 
  



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-6 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 6

Examine Competitor's Products - IBM

I

 

Examine Competitor's Products - IBM 

IBM blade comparison is with the HX5. The IBM HX5 has the following architecture: 

HX5 – FH / SW 2s (expandable to 4s)Blade server 

 No Hot-Plug SFF drives (1 or 2 internal SSDs) 

 16 DIMM Sockets (640gb Max with 4x wide blade) 

 Can add Max5 FH / SW memory expander – Adds 24 DIMMs 

 Can pair with other HX5 (and Max5) – yields 4s QW 80 DIMM Blade 
  



 
 

 

5-7   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 8

Examine Competitor's Products - Dell

Dell M910

 

Examine Competitor's Products - Dell 

The Dell M910 is a full height, single width, 4socket blade server. It has the following 

architecture: 

 32 DIMMs (512Gb Max) 

 2 Hot-Plug SFF drives (SAS / SATA / SSD) 

 With memory bridge can access all 32 memory DIMMs in 2S configuration 

 Dell gets 8 2S / 4S 32 DIMM blades per 10u chassis.   

 Cisco provides up to eight 2s blades with 32 DIMMs per server in a 6u chassis. 

 Memory bridge may handicap memory performance in 4 socket configuration 

  



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-8 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 10

Compare B-230 to B440

PID B230 B440

Chipset Boxboro IOH 

and ICH10R

Boxboro IOH and 

ICH10R

CPU Sockets 2 - EX 4 - EX

DIMM Sockets 32 (16/CPU) 32(8/CPU)

Mezzanine 

Slots

1 2

Form Factor Single Width Double Width

Power 

Consumption

650W/550W 1200W

Chassis 

Power Supply 

Policy

3+1 (8xB230) or 

2+2 (6x B230)

N/A

 

Compare B-230 to B440 

The B230 and B440 are both power house blades purpose built for large workloads. The 

obvious difference is that the B230 is a single width blade while the B440 is a double 

width. Both have 32 DIMM slots, making them able to handle the same amount of RAM, 

but the B440 has 2 additional CPU sockets. In other words the B230 is to the B440 what 

the B200 is to the B250. Other differences are listed above. 

 



 
 

 

5-9   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 9

Power Considerations for the B230

Required RequiredRedundant Redundant

B200s B230s

 

Power Considerations for the B230 

Because of the density of memory and CPU for the B230, the amount of power draw is 

significantly more than the B200. Considering a B250 could have as much as 384GB of 

RAM, the B230 somehow seems like it would require similar to slightly more power than 

a fully loaded B200 with 96GB of RAM. However when you consider that the B250 uses 

2 slots, that would be like 2 B200 each with 192 GB RAM to support. With the 2 x B230 

loaded with 256 GB of RAM, you are putting 515 GB RAM in the same physical space 

you did with a single B250 and 384GB. Also consider that with 16 GB DIMMs, the B230 

could potentially have up to 512 GB of RAM per B230. What this means is that a single 

PSU could power a chassis of 8 B200's, however with B230 you will need minimally 2 

PSU and for redundancy 4 PSUs. The good news is that the PSU we all complained was 

supplying too much power now does not need to be swapped out with a new PSU if your 

upgrade to B230's, instead you will need to add more. 

Supported Power Models are: 

 3+1 - 3 with single spare  - supports only 8 B230 (3PSU needed to power 8) 

 2+2 - Full redundancy - Supports up to 6 B230 (Only 6 can be powered at a time 
with 2 PSU) 

This also introduces the concept of power capping in the UCS which will be discussed 

later in this lesson. 

  



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-10 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—12

Explain UCS 
Support of the UCS 
c-series Integration 
to UCSM

Upon completion of this section you will:

• Describe Why Integrate with c-series with UCSM
• Examine the c-series Architecture with UCSM
• Explain how to Configure UCS C-Series for UCSM management
• Describe c-series with UCSM Integration Capabilities

 

Explain UCS Support of the UCS c-series Integration to 
UCSM 

In this section we will discuss how to add c-series rack mounted UCS to be managed to 

an existing UCSM instance. You will examine the following content: 

 Describe Why Integrate with c-series with UCSM 

 Examine the c-series Architecture with UCSM 

 Explain how to Configure UCS C-Series for UCSM management 

 Describe c-series with UCSM Integration Capabilities 
  



 
 

 

5-11   UCS Balboa Features  © Cisco Systems, Inc. 

 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 11

UCSM C-Series Integration

UCS
Manager

Managed by C-IMC only

 

Describe Integration with c-series and UCSM 

The UCS C-Series rack mount servers are managed currently as a standalone product. In 

order to provide similar capabilities to the rack mounts, as found on the B-series and 

UCSM, the C-series needed to integrate into the management domain of UCSM. 

Currently if you have C-Series servers you are initially configuring them using the Cisco 

Integrated Management Controller or C-IMC. This web based GUI is part of the C-IMC 

and is available for configuration as soon as power is plugged into the server. While this 

makes a easy to manage and configure standalone server, this also means that if you have 

a lot of c-series you likely will have to do redundant configuration to each of them. 

Multiply this across hundreds of servers and you have a challenge ahead of you. This of 

course can be augmented with third party tools to help in configuring and using t5he c-

series. 

The B-series on the other hand is managed complete by UCSM down to the most minor 

of detail like firmware. 

Customers who like the capabilities of UCSM but the form factor of the rack mount 

servers now have the option to integrate the rack mounts with their existing UCSM and 

manage both as a "Managed Platform" 



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-12 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 14

Management path via FEX, Data path directly connected 

Examine the C-Series Architecture with UCSM -
Clustered

6100 running UCSM 6100 running UCSM

CIMC

GE LOM PCIe Adapter

CPU Mem

OS or Hypervisor

C200, C210, or C250

Mix of B & C Series 
is supported

Nexus 2248 Nexus 2248

2 LOM ports 
exclusive CIMC 
connectivity

Adapter support:
Emulex CNA
Qlogic CNA
Intel 10g NIC
Broadcom 10g
NIC
Cisco VIC  

Mgmt Traffic

Data Traffic

 
 

Examine the C-Series Architecture with UCSM - Clustered 

In order to integrate the c-series with UCSM you need to first implement the following  

 Add 2 Nexus 2248 fabric extenders - These are required for the management path 
to the c-series. Management is across the 1GB LOMs on the c-series. Since the 

UCS has few 1GB ports, this addition will help in adding multiple c-series to the 

UCS 

 Change C-IMC modes - This is done by rebooting the c-series and during the 
startup screen hitting the F8 key. This will either take you into the IMC in which 

case you can switch modes or it will show a bios screen allowing you to change 

modes (in case you wish to go back to stand alone mode). There are 2 modes: 

o UCSM Mode - Sets the C-IMC to be managed by UCSM 

o Stand Alone Mode - Sets C-IMC to be managed as a standalone. 

 Once the c-series reboot they will be discovered like any blade in the UCS. They 
will be able to be used as a resource in pools or for individually assigned Service 

Profiles 

  



 
 

 

5-13   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 15

Management path via FEX, Data path directly connected 

Examine C-Series Architecture with UCSM -
Stand Alone

6100 running UCSM

CIMC

GE LOM PCIe Adapter

CPU Mem

OS or Hypervisor

C200, C210, or C250

Mix of B & C Series 
is supported

Nexus 2248

2 LOM ports 
exclusive CIMC 
connectivity

Adapter support:
Emulex CNA
Qlogic CNA
Intel 10g NIC
Broadcom 10g
NIC
Cisco VIC  

Mgmt Traffic

Data Traffic

 

Examine C-Series Architecture with UCSM - Stand Alone 

If you use the UCS without using the clustering of two 6100 series fabric interconnects, 

you still can connect the c-series in the same way and expect the same features. 

Obviously there is no fabric failover and you could potentially connect more data ports 

up to the 61X0 (assuming a single PCIe card with 2 physical ports). 

  



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-14 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 16

Explain c-series and UCSM Invalid Topologies

6100 running UCSM 6100 running UCSM

CIMC

GE LOM PCIe Adapter

CPU Mem

OS or Hypervisor

C200, C210, or C250

Nexus 2248

Mgmt Traffic

Data Traffic

Nexus 2248

 

Explain c-series and UCSM Invalid Topologies 

IF you do not have a deep understanding of UCS then it is possible that you would mis-

connect the C-Series when integrating to UCSM. 

In the previous diagrams we saw that the Nexus 2Ks were each connected to different 

6100s. Since they are Nexus 2K and a 6120 looks like a Nexus 5010, it is easy to assume 

some consumers will in turn assume any topology supported by 2K/5K will work for 

UCS. 

The fact is the Nexus 2K is functioning like a IOM. In the GUI it is called a FEX but the 

ports are uplinks for the servers attached to it. In a UCS an IOM can only be linked to one 

6100, not both. So the above topology will not work properly. 

Also we should note that the management path requires a single path per Nexus 2K. So 

having both going to one Nexus 2248 as depicted above will not work. 

 

  



 
 

 

5-15   UCS Balboa Features  © Cisco Systems, Inc. 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 17

Describe How C-Series Deals with HA Clustering in 
UCSM

6100 running UCSM 6100 running UCSM

CIMC

GE LOM PCIe Adapter

CPU Mem

OS or Hypervisor

C200, C210, or C250

Mgmt Traffic

Data Traffic

 

Describe How C-Series Deals with HA Clustering in UCSM 

When you have a cluster break in the UCS, the SEEPROMs on the chassis are used to 

determine who will be the primary node until the cluster is reestablished. So it is possible 

to have UCS system with no chassis only c-series, which begs the question how does it 

resolve a cluster break? 

If you have only C-series the C-IMC on the c-series will be used as a fake persistent 

SEEPROM. If you have both B and C series, then UCSM will use a combination of both 

fake SEEPROM and real chassis SEEPROM. 

 

  



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-16 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 13

C-Series servers connectivity
– Management connectivity through FEX to FI

– Data connectivity directly to Fabric Interconnect 

Stateless computing
– Service profiles extended to C-series

– Migration among compatible B & C series servers

All UCSM management services
– Automated discovery

– Fault and monitoring

– Firmware updates

Describe c-series with UCSM integration 
capabilities

 Unified Management across entire UCS portfolio

 Advanced capabilities extended to rack servers

Customer benefits

Feature details UCS 6100 UCS 6100

Nexus 2248Nexus 2248

UCS
Manager

Data Connection

Mgmt Connection

 

Describe C-Series with UCSM Integration Capabilities  

This new architecture provides a number of advantages: 

 You now manage all UCS products under one management roof 

o SNMP Monitoring 

o XML API 

o UCS Funtionality 

 With this integration you can: 

o Manage multiple C-series through the N2K 

o Data plane the same as b-series 

o SP can me placed on C-Series 

o SP can be migrated to c-series 

o Auto discovery and placement in pools 

o Monitoring like b-series down to the server 

o Firmware updates. 
  



 
 

 

5-17   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 19

Explain UCS C-Series Discovery Flow

6100 running UCSM 6100 running UCSM

CIMC

GE LOM PCIe Adapter

CPU Mem

OS or Hypervisor

C200, C210
Mgmt Traffic

Data Traffic

• Mark Ports as Server Ports 
for the ports used by the C-
Series PCI network card

• UCSM auto discover Adapter 
end points

• Rack discovery is based on 
DHCP protocol

 

Explain UCS C-Series Discovery Flow 

Once you have the c-series installed physically and know which ports are used for what, 

the general process for discovery is as follows: 

 Mark Ports as Server Ports on the FI for the ports used by 2K 

 Mark Ports as Server Ports for the ports used by the C-Series PCI network card 

 UCSM auto discover FEX and Adapter end points 

 Rack discovery is based on DHCP protocol 
Unlike blade servers, the adapter port is unknown to UCSM at the time you instantiate a 

profile. This means UUOS cannot use PXE and a new method, Vmedia, is used. 

 

Specifically what happens is this, we assume: 

 Server is in standalone mode 

 The FEX is pre-discovered 

IF this is the case the following happens: 

 C-IMC sends DHCP request on default VLAN 

 DHCP Request intercepted by 6100 

 6100 assigns IP 



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-18 

 UCSM is notified of DHCP request 

 UCSM validates end point 

 UCSM creates rack object and assigns rack ID 

 UCSM creates a host Entry in DHCP database to instruct C-IMC to change mode 

 C-IMC gets change-mode command in DHCP option 251 

 C-IMC reboots in UCSM Mode and sends a new DHCP request 

 UCSM get notification and collects C-IMC connectivity from DHCP option 82 

 UCSM initiates rack discovery in FSM 

o Remove Native VLAN from FEX ports 

o Assign C-IMC address by MAC 

o Collect inventory from C-IMC 

o Host vmedia on managed inst 

o Set Boot order (virtual, PXE, Local, etc.) 

o UUOS boots on server. 

o Host agent sends Inventory 

o Host send DHCP request on each adapter port 

o UCSM gets notification about DHCP and correlates adapter connectivity 
from DHCP option 82 

o Clean up 

o Shutdown - discover success 
  



 
 

 

5-19   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 20

Examine the c-series architecture with UCSM-
Clustered

6100 running UCSM

Mgmt Traffic

Data Traffic

• Mark Port on 6100 as 
Server port for Nexus 2248 
Uplinks

• UCSM marks port 
untrusted with trunk mode

• SDP exchange happens 
between UCSM, FI, and 
FEX

• UCSM becomes aware of 
MUX-Presence

• UCSM Changes the switch 
port to fex-fabric

 

Explain UCS N2248 Discovery Flow  

The FEX also goes through a discovery flow. The following occurs to allow the fex to be 

managed like a IOM: 

 Mark Port on 6100 as Server port for Nexus 2248 Uplinks 

 UCSM marks port untrusted with trunk mode 

 SDP exchange happens between UCSM, FI, and FEX 

 UCSM becomes aware of MUX-Presence 

 UCSM Changes the switch port to fex-fabric 

FEX discovery is similar for the most part to the Nexus 2248 discovery. 

  



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-20 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 14

Describe C-Series Servers in UCSM

 

Describe C-Series Servers in UCSM 

In the picture above we see multiple c-series setup and configured to be part of this 

UCSM domain. Note that they do not appear in a chassis. This will show as servers in the 

inventory with no chassis designation. Despite this they can be put in pools and service 

profiles just like normal blades. 

Firmware Management 

The rack mount servers also mean that you will need to make sure you have the firmware 

on UCSM that is used by the c-series. The FEX is managed automatically by UCSM. For 

this release and support there are 14 new images: 

 2 C-IMC Images 

 2 BIOS Images 

 5 Adapter Images 

 5 Storage Controllers Images  



 
 

 

5-21   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—15

Summarize the New 
UCSM Power Capping 
Capability

Upon completion of this section you will:

• Explain why we need power capping with UCSM
• Describe UCSM Default Power Modes
• Describe the Power Capping Requirements for the CMC
• Explain features of Power Capping
• Demonstrate How to Configure Power Capping

 

Summarize the New UCSM Power Capping Capability 

In this section we will discuss the new power capping Capabilities of the UCSM with 

release 1.4.1. You will examine the following: 

 Explain why we need power capping with UCSM 

 Describe UCSM Default Power Modes 

 Describe the Power Capping Requirements for the CMC 

 Explain features of Power Capping 

 Demonstrate How to Configure Power Capping 
 

 

 

 

 

  



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-22 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 16

Explain why we need power Capping with 
UCSM

NEW! B-Series

256GB

B-230
B-440

 

Explain Why We Need Power Capping 

Current UCS chassis is designed with 550W max per ½ slot power limit and 5000W max 

chassis power limit. Newer, denser blades require (i.e. B230) max power of 600-800W 

depending on the configuration of the newer blades. Therefore these newer blades break 

the existing PSU redundancy scheme. Due to higher power requirements for the newer 

blades, it also exceeds the bus-bar connector power limit. Therefore to support these 

newer blades we have to cap the power on the newer blades. Capping across OSes and 

hypervisors can be inconsistence. A better way is to have direct firmware support for 

capping enforcement, without reliance on the OS, to protect hardware and maintain 

desired PSU redundancy state. 

Power capping also is used to prevent failure of a power source. For example you have 

the UCS plugged into a 20 Amp circuit, and that circuit is being very heavily used to the 

point that if the UCS were to use more power than say a calculated number of 3750W 

(based on a power study not picked out of thin air), the circuit could trip and cause a 

fairly significant outage. Power capping will prevent this. 

Customers are interested in this feature for several reasons: 

 Electrical and Mechanical cost represent over 80 % of cap costs in DC 

 DC are tiered on reliability characteristics 



 
 

 

5-23   UCS Balboa Features  © Cisco Systems, Inc. 

 

o Tier II = $12,500/kW 

o Tier III = $23,000/kW 

o Tier III = $25,000/kW 

 Power Capping can be expensive 

o HP sells this capability as a licensed bolt on software. 

o Without Power cappin you are paying for power you are not using. 

 With Power Capping you get more servers potentially / circuit 

Rack Servers and Fabric Interconnects are not supported by power capping. 

  



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-24 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 24

Explain the New UCSM Capabilities Catalog

NEW! B-Series

 

Explain the New UCSM Capabilities Catalog 

This feature allows updating the UCS capability catalog to allow for new hardware to be 

introduced without requiring a complete upgrade of UCS. In the past this catalog was part 

of your UCSM bundle, now it can be updated separately. 

The B230 blades are a great example of this. Without the 1.4.1 capabilities catalog the 

B230 will show up as undiscoverable in UCSM. Additionally under the UCSM FSM tab 

for the blade you will see a "Server Hardware Not Supported" message. 

In order to make this discoverable a new catalog must be downloaded from Cisco and 

updated in UCSM.  



 
 

 

5-25   UCS Balboa Features  © Cisco Systems, Inc. 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 24

Explain why we need power Capping with 
UCSM

Blade Running Enterprise 
Application

Power 
Need 
Increasing

Power Cap

As Power Cannot Be Supplied HW is forced 
to do stepping in CPU

Bottom Line: PERFORMANCE 
DEGRADATION

 

Describe Impact of Power Capping on the Server 

Essentially the HW will only get the allotted power as you applied it in either the global 

power group or the individual slot assignment. So the question then is what happens to 

the application? 

The answer is that the HW will knowing it is not going to get anymore CPU or memory 

due to lack of power begin to use HW control stepping to manage the lack of resources 

required. The server in turn will begin to show a lack of performance due to insufficient 

resources. If the application or OS crashes that is considered the province of the coding of 

those applications. UCSM has no means to communicate to the OS or application that a 

desired power state is unachievable. 

 

  



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-26 

 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 26

Summarize Types of Power Capping

Type Details

Explicit Group 

Power Cap

• Single power cap for multiple 
chassis in UCS

• Set by Customer
• Policies for multi Chassis Cap 

Explicit Blade 

Power Cap Blade Level Power Cap

Implicit 

Chassis 

Power Cap

UCSM Automatically sets cap on 

blade/chassis

 

Summarize Types of Power Capping 

There are 3 types of power capping: 

 Explicit Group Power Cap - This is a power cap applied as a group through the 
use of policies. The purpose is to make sure you never draw more power than you 

have budgeted for. 

 Explicit Blade Power Cap - This is simply capping at the specific blade slot 

 Implicit Chassis Power Cap - This is the default power cap (basically max 
capacity) if no other power cap is defined. 

How you choose to use it is based on your goals. Using the Global power group is an 

easy way to power cap across many chassis while power capping can also be done on 

each individual blade for more defined control. 

There are a number of advantages to power capping in groups: 

 Scalable - Set globally you do not have to do this for every blade individually 

 Dynamic reallocation - chassis puts the power where it is needed 

 Safe Caps - UCSM will always make sure there is enough power for booting 



 
 

 

5-27   UCS Balboa Features  © Cisco Systems, Inc. 

 

 Policy driven means you can tie workload priorities to allocation of power 

There are a number of reasons to have an Implicit (default) power cap: 

 UCS Chassis total can handle 5000W with 550W per chassis 

 Newer blades (B440-B230) require 600-800 Watts 

 In order to support these blades in existing chassis we have to power cap 

 Power capping is done automatically when is discovers a blade that can exceed 
550W  

There are some reasons not to use per blade power capping: 

 It removes all other implicit or explicit power caps 

 Can lead to trouble and is not very scalable 

 More for niche like reasons  



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-28 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 17

Describe UCSM Default Power Modes

Redundancy 

mode

2 power 

supplies

3 power 

supplies

4 power 

supplies

Grid Not supported N/A 5000W

N+1 Not supported 5000W 5472W

Non-

redundant 

5000W 5472W 5472W

 

Describe UCSM Default Power Modes 

In this mode, power budget of a chassis is set to 5000W DC, this assumes it is configured 

N+N redundancy mode.  

In N+1 redundancy mode, max chassis power budget is set to 5472W DC, when we have 

4 power supplies available and it is set to 5000W DC when we have 3 power supplies 

available.  

In Non-redundant mode, max chassis power budget is set to 5000W when we have 2 

power supplies and it is set to 5472W when have 3 or 4 power supplies.  

UCSM calculates the max power budget from the catalog by summing up the max power 

for all hardware components on the blade. Peak power budget is calculated from 

available power for the chassis. If max power of a blade is less than 550W then peak 

power of the blade will be equal to max power.  

Explain Legacy Blades Integration 

There will be some old blade, which will have older firmware that is not compatible with 

our default mode (implicit power capping). Most of these blades are Goodings and 

Venturas. These blades take less power than maximum slot power, therefore these non-

capable blades needs to be allocated max power of that blade.  UCSM will let CMC 

know blade in given slot is has older firmware. 



 
 

 

5-29   UCS Balboa Features  © Cisco Systems, Inc. 

 

Describe the Power Capping Requirements for the CMC  

CMC’s implicit power capping module configures and manages the chassis level power 
consumption. 

The following are its main objectives: 

 Provide base chassis power budget to UCSM 

 Receive the Chassis power budget configuration information from UCSM 

 Balance power budget between blades. 

 Push blade power budget to BMC software. 

 Manage power supplies 

 Report non-compliance events, status and power consumption readings to UCSM. 

CMC pushes base chassis power budget to UCSM during chassis discovery. UCSM uses 

it to allocate the minimum power budget required by a chassis 

  



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-30 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 16

Explain features of Power Capping

Power capacity savings

with 

Chassis Power Capping

Power allocated with power capping

Power allocated without power capping

(faceplate)

Actual chassis power draw

Time

P
ow

er

 

Explain the Features of Power Capping 

As you can see, that this goes a long way to reducing unneeded power consumption. The 

above picture shows how Power capping save on energy consumption by placing a cap 

near to the max power usage of the chassis. 

This also allows you to cap multiple chassis within a single UCSM instance. 

Power Capping provides the following features: 

 Group Level Power cap 

o Set a single cap for multiple chassis that share a power feed 

o Automatic static distribution of power to chassis in group 

 Dynamic Intra-chassis power redistribution 

o Blade power allocation based on priority and blade configuration 

o High power blades can borrow power from low power blades 

o No performance impact under normal operation 

 Service Profile Priorities 

o Customer control of application performance 

o Ensures high priority workloads get more power when group/chassis cap 
is reached 



 
 

 

5-31   UCS Balboa Features  © Cisco Systems, Inc. 

 

Power Capping Limitation 

There are some limitation to chassis and blade power capping. The following are the 

limitations: 

 Minimum Cap - 3400 W, this is for the boot budget. Remember it includes the 
B230 and B440 now 

 Maximum Chassis Cap - 5472 W (requires 3 PSU) 

 Minimum Single Width Blade Cap - 350W 

 Maximum Single Width Blade Cap - 600 W (1200W for double width) 
  



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-32 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 18

Describe Configuring Power Capping 

 

Describe Configuring Power Capping  

Power Capping can be set as a global policy and this is found off the Equipment tab in 

the Nav Pane, followed by global policies in the content pane. 

From here you can set a cap manually for blades or as a policy driven group. To view the 

current caps, or to add your own caps per chassis, go to the Power Group tab in the 

content pane. 

By default "Policy Driven Chassis Group Cap" is used, however if you wish to set power 

capping per slot then select "Manual Blade Level Caps".  



 
 

 

5-33   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 20

Describe Configuring Power Capping - Cont.

 

Describe Configuring Power Capping - Cont. 

 

This is the content pane showing current power groups. There will always be a default 

group that bases the power to blades on a catalog contained on the UCS that tells UCSM 

the Mins and MAXs of the different blade types. 

By clicking on the "+" button you can add your own group. 

 

  



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-34 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 21

Describe Configuring Power Capping - Cont.

1

2

3

 

Describe Configuring Power Capping - Cont. 

When adding a group you need to supply: 

 Name of Group 

 Chassis on the UCS that will be part of this group 

 AC Power Capacity (Max is 5000W) 

 Dynamic Reallocation if enabled help UCS to balance the power in the group 
automatically based on the cap.  



 
 

 

5-35   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 22

Describe Configuring Power Capping - Cont.

 

Describe Configuring Power Capping - Cont. 

You can also create a power policy that can be applied in the UCSM to service profiles. If 

you do this policy all profiles that consume it will have a priority that you set in the cap 

to better help UCSM manage power for  more important blades. The priority system 

works as follows: 

 Each service profile can have a power control policy 

 The priority ranges from 1-10 (1 is lowest 10 is highest) 

 Default is 5 

 The higher priority the higher the budget allocation from the total allocation 

 Priorities do not guarantee absolute power allocation 

 Set No Cap if you have mission critical apps and will require the full pwer of the 
slot. 

  



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-36 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 32

Describe Configuring Power Capping - Cont.

 

Describe the Individual Blade Capping 

In individual blade capping you have to have the global power capping set to off 

(manual) or you will not be able to set this. Individual power capping has the following 

characteristics: 

 Blade Max - Max the blade will consume worst case 

 Determined by the Capability catalog compared to the amount of actual 
components (CPU, MEM, Disks, etc.) 

 Blade Peak - is the Cap Value 

To set this you need to go to the Equipment tab in the nav pane and  click on the blade 

you wish to cap. In the corresponding content pane the on the general tab you will find a 

content bar labeled "Power Budget". Click on the double down arrow and you can see it 

is not enabled. Enabling it allows you to set the cap Watts. 

  

  



 
 

 

5-37   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—23

Describe New Server 
and Adapter Software 
Packs

Upon completion of this section you will:

• Describe what software packs are
• Explain where to get software packs for UCS
• Demonstrate how to upload firmware packs to UCSM

 

Describe New Server and Adapter Software Packs 

In this section we will briefly discuss the addition of the server software packs to UCS. 

Upon completion students will be able to : 

 Describe Why The New Software Packs for UCSM Were Created 

 Describe What the New Software Packs Are  

 Explain Where to Get Software Packs for UCS 

 Demonstrate How to Upload Firmware Packs to UCSM 
  



 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-38 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 34

Describe Why The New Software Packs for 
UCSM Were Created

Unbundling of UCS software bundles

Server and adapter packs aimed at new server and 
adapter hardware

Off-cycle introduction of server and adapter packs 
in-sync with hardware releases

Next major software releases will incorporate 
previous modular server and adapter packs

Enables faster introduction of new server and 
adapters without waiting for next majow SW release

 HW support decoupled from major SW releases

 Quicker adoption of new server & adapter types

Customer benefits

Feature details

Adapter Pack:

• Adapter FW

• Catalog File

• UCSM Mgmt Extn.

Infrastructure Bundle:

• UCSM

• Fabric 
Interconnect (NX-
OS)

• Fabric Extender 
(IOM) Firmware

• Chassis Mgmt. 
Controller

Server Pack:

• CIMC

• BIOS

• RAID Controller 
FW 

• Catalog File

• UCSM Mgmt Extn.

UCS
Manager

 

Describe Why The New Software Packs for UCSM Were Created 

With UCS the software used for the blade servers is part of the bundle that you down load 

from cisco contain is not only the UCSM but also the various firmware packs you use for 

things like adapters and bios and HBA as an example. The trouble with this is that in 

order to get newer firmware packs you had to wait for the next release of UCSM. This 

could potentially cause frustration to a customer if their UCSM version will support 

newer firmware for components but due to internal policies they cannot upgrade the 

whole UCSM to be able to load the firmware pack. 

New in 1.4.1 is the ability for server and adapter hardware to get delivered software 

packs independent of support for the infrastructure components. This allows customers to 

add support for new server types without having to upgrade their Fabric Interconnect or 

UCS Manager software. 

  



 
 

 

5-39   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 25

Explain where to get software packs for 
UCS

 

Explain Where You Can Get Software Packs 

All software can be found by product on : 

http://www.cisco.com/cisco/web/support/index.html  

From there you simply select your product. Packs will be displayed for the specific 

product. For example the above picture shows getting the software bundles for a B230. 

Notice you can get the bundles for UCSM, driver and tools, and for the adapter card. 

 

Once you have made a choice you will be asked if you prefer Windows or Linux to 

download to. 

  




 
 

 

© Cisco Systems, Inc.  UCSM 1.4.1Compute Enhancement5-40 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 26

Describe How to Activate Independent 
Packs

 

Describe How to Activate Independent Packs 

Depending on the type of pack you may need to either load it on UCSM or on the OS of a 

given server. For example if you only want to update the driver for the M81 card  versus 

the entire firmware set. 

Firmware once installed on UCSM then can be updated to the servers through policies or 

manually for the given component. 



 
Lesson 6 

UCS 1.4.1 Service Profile 

Enhancements 

Overview 

In this lesson you will learn what service profile enhancements were made to UCS in the 

latest release, 1.4.1. 

Objectives 

The specific objectives of this lesson are to enable you to describe the following: 

 Describe the New C-IMC IP addressing 

 Demonstrate Migration Validation 

 Examine Impact Analysis of Service Profiles 

 Explain scheduling service profile changes 
  



 
 

 

6-1   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—2

Describe the New C-IMC 
IP Addressing

Upon completion of this section you will:

• Describe How UCSM Consumes IP addresses
• Examine How IP addresses can be pooled or Static
• Explain How to Configure a Static IP address for a Service 

Profile

 

Describe the New C-IMC IP Addressing 

In this section you will discuss the following content: 

 Describe How UCSM Consumes IP addresses 

 Examine How IP addresses can be pooled or Static 

 Explain How to Configure a Static IP address for a Service Profile  



 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Service Profile Enhancements 6-2 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 3

Describe How UCSM Consumes IP 
Addresses

10.10.10.10 -
10.10.10.200

IP Block in Pool

10.10.10.200

10.10.10.199

 

Describe How UCSM Consumes IP Addresses 

The UCS uses IP addresses to assign to the C-IMC of each blade a routable address so 

that the built in KVM functionality will work. In older version of UCSM you simply 

created a pool of IP addresses that are on a routable subnet off the management port of 

the 6120. If you do not create a pool of address, you will not be able to use features that 

require the C-IMC to have a IP address like SoL or KVM.  

Assigning an IP is easily done but creating a pool. For all discovered blades, 

automatically the IP will be assigned. This is where the troubles starts as in version 1.3 

and below you have no choice what IP address is assigned. You can only find this out 

after it is assigned to the blade. This creates some frustration in that the customer cannot 

manually assign an IP of their choice to a service profile. Therefore when the profile is 

moved to a different server its KVM and SoL access has changed because the IP address 

has changed. What is needed is a way to assign new IP addresses to the service profile 

such that no matter where you move the SP, the IP remains the same. 

In the end your server will have 2 IP addresses: 

 One automatically assigned by UCSM upon discovery 

 One assigned by the service profile that will follow the service profile. 
  



 
 

 

6-3   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 4

Explain Why UCSM Has IP Addresses 
Assigned in Service Profiles

10.10.10.200

11.11. 11.19

• IP assigned to slot
• If service profile 

moves IP for the 
new slot is applied

• Now IP can be 
assigned to SP

• IP follows SP 
migration 
between blades

11.11. 11. 20

• IP Consumption is doubled
• All address must be routable through management port

 

Explain Why UCSM Has IP Addresses Assigned in Service 
Profiles 

The picture above highlights the reason and effect of incorporating the IP address for 

server management into the service profile. 

When IP are assigned to a slot, it changes for a service profile if you migrate it to another 

blade. In the example above, moving from slot 4 to slot 3 changes the IP from 

11.11.11.19 to 11.11.11.20. If you were using that for SoL or IPMI connectivity you have 

in effect killed your connectivity because your IP has changed. 

However if you have an IP assigned to the service profile then no matte3r where the 

profile moves the IP remains the same. In the above picture the IP address 10.10.10.200 

is the same if the profile is on the blade in slot 4 or 3. 

The end result of course is that you will likely use a combination of both of these 

methods. If this is the case then you need an IP address block for the slot addressing, and 

then a block for the service profiles that need one assigned as well. The challenge here is 

to make sure that both IP types are routable through the management port. This means 

that the blocks can be non-contiguous IPs, but all addresses must be able to be routed to 

with the single management connection from the fabric interconnect. 

 

 

  



 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Service Profile Enhancements 6-4 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 4

Examine how IP addresses can be 
pooled or Static

 

Examine How IP Addresses can be Pooled or Static 

In the new UCSM, you can use 1 of 3 options for C-IMC IP assignment: 

 Pooled - You can create a pool of up to 1000 IP address. Address are assigned to 
each blade automatically if in the service profile you select pooled. Use this for 

KVM and SoL connectivity through UCSM. 

 Static - Allows you to assign an IP and a Static address to the service profile. 
Upon association UCSM changes the IP address to the on in the profile. Use for 

IPMI Tools 

 None - If you do not intend to use the IP address for the C-IMC  



 
 

 

6-5   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 5

Explain How to Configure a Static IP 
address for a Service Profile

 

Explain How to Configure a Static IP Address for a Service 
Profile 

Static IP addresses are assigned to the C-IMC when the service profile is associated. Prior 

to that during its creation you can set this IP. On the last screen, as depicted above, you 

can set the management IP based on the Criteria on the previous slide. 

IF you profile is associated with a blade, then on the general tab you will see a double 

down arrows in the content pane for "Management IP". By clicking on this you can alter 

how the address is assigned (Static Pooled None). 

 

 

 

  



 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Service Profile Enhancements 6-6 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—6

Demonstrate 
Migration Validation 
and Service Profile 
Change Validation

Upon completion of this section you will:

• Describe what Migration Validation  Is
• Demonstrate Migrating a SP from a one blade to another
• Demonstrate Service Profile change validation

 

Demonstrate Migration Validation and Service Profile 
Change Validation 

You will examine the following content: 

 Describe what Migration Validation  Is 

 Demonstrate Migrating a SP from a one blade to another 

 Demonstrate Service Profile change validation 
  



 
 

 

6-7   UCS Balboa Features  © Cisco Systems, Inc. 

 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 7

Describe what Migration Validation  Is

Service Profile migrations more consistent
– SP remembers the HW it was associated to

– If new HW has meaningful differences  warning 

Differences do exist at OS layer
– Windows, Linux, Vmware behave differently 

 Increased infrastructure availability for 
OS/app

 Increased utilization due to HW repurposing

Customer benefits

Feature details

Service Profile: CRM-App1

Network: Sales-VLAN
Network QoS:  High
MAC:  08:00:69:02:01:FC-E
WWN: 5080020000075740-3
BIOS:  Version 1.03
Boot Order: SAN, LAN

App
OS

Firmware

Network

 

Describe what Migration Validation Is 

One of the fantastic features of UCSM is that easily allows you implement servers on the 

UCS. By abstracting all the components of a server into a profile it makes it very easy to 

repurpose hardware or to migrate servers between different pieces of hardware. The 

challenge is when you have a heterogeneous mixture of blades. It is possible that you 

could migrate your profile to another blade or rack mount server that would not be 

suitable based on the profile that. After the change has been initiated is too late to find out 

that the new server will not be acceptable. 

In order to prevent possible outages due to migration issues you can now in the service 

profile enable migration restriction which will prevent the mov 

 

  



 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Service Profile Enhancements 6-8 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 8

Demonstrate Migrating a SP from a one blade 
to another

 

Demonstrate Migrating a SP from a one Blade to Another 

The above picture show the warning generated by this validation. The Profile was not 

moved due to the resulting discrepancies. While you may have scheduled down time for 

this move, this warning and in ability to move to a undesirable blade allow you to 

reevaluate and choose a more appropriate server. 

 

  



 
 

 

6-9   UCS Balboa Features  © Cisco Systems, Inc. 

 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 9

Demonstrate Service Profile change 
validation 

 

Demonstrate Service Profile Change Validation  

In addition to migration validation, changes to service profiles can produce similar results 

causing unintended outages potentially. 

New in UCSM is a profile change validation function. Upon completing service profile 

changes or creating a new profile, you will be given a summary of changes to implement 

before it gets implemented so that you may go back and make changes if something is not 

a valid change.  



 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Service Profile Enhancements 6-10 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—10

Explain Scheduling 
Service Profile 
Changes

Upon completion of this section you will:

• Define What Service Profile Change Scheduling Is
• Explain How to Configure a Schedule Change in UCS

 

Explain Scheduling Service Profile Changes 

In this section we will discuss the new power capping Capabilities of the UCSM with 

release 1.4.1. You will examine the following: 

 Define What Service Profile Change Scheduling Is 

 Explain How to Configure a Schedule Change in UCS 

 

 

 

 

 

 

  



 
 

 

6-11   UCS Balboa Features  © Cisco Systems, Inc. 

 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 11

Maintenance policies
– New policy contains schedule when SP can be changed

– Policy can be mapped to one or more SPs

Schedule disruptions

Resource reservation
– SP acquires required resources prior to deployment

– Resources are held until deployment

– Eliminates future resource contention

Define What Service Profile Change 
Scheduling Is

 Service Profile disruptions in maint. windows

 Plan ahead design changes for service 
profiles

Customer benefits

Feature details

UCS
Manager

Service Profile: CRM-App1

Network: Sales-VLAN
Network QoS:  High
MAC:  08:00:69:02:01:FC-E
WWN: 5080020000075740-3
BIOS:  Version 1.03
Boot Order: SAN, LAN

App
OS

Firmware

Network

Service Profile: CRM-App1

Network: Sales-VLAN
Network QoS:  High
MAC:  08:00:69:02:01:FC-E
WWN: 5080020000075740-3
BIOS:  Version 1.03
Boot Order: SAN, LAN

App
OS

Firmware

Network

Design

Deploy

 

Define What Service Profile Change Scheduling Is 

Service Profile Change Scheduling is a new feature with UCSM and part of its feature set 

that enable lights out management. 

When customers need to make changes to servers that are part of a solution, depending 

on how critical the server is to their business functions, they may choose to do this in off 

hours. The trouble then becomes on of making sure you have all the right people 

available during those off hours. 

You can use UCSM to make these changes in one of 3 ways: 

 Immediate - Just what it says, right now! 

 Timer - Timer can be one time use or recurring. 

 User Acknowledged - No changes happen unless there is a user interaction to 
acknowledge the change. 

Explain Scheduling Feature Scope 

This feature applies specifically to changes that would be disruptive to normal service 

profile operations. Below are some examples of changes that are useful in the scheduler: 



 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Service Profile Enhancements 6-12 

 Server Identities - UUID MAC, WWNs 

 Addition of VNICs 

 Modifying a Policy 

 Service Profile Migration 

The following changes do not get done by scheduler: 

 Non-disruptive changes - VLAN / VSAN addition 

 Association and disassociation of service profile 

 Deletion or final disassociation of a service profile 

 Re-acknowledgement, decommission, or resetting server 

 Upgrades to UCSM, FI, or IOM 

Describe Operational Model 

When changes are scheduled, they have the following operational characteristics: 

 Changes are applied to the model immediately 

 Changes are pushed to the hardware when the specific conditions are met (user-
ack, timer, immediate) 

 Implications: 

o Service Profile tab shows the new values 

o Server Tab shows the older values 

o Policies are resolved at configuration  time 

o User warned at configuration time of issues and errors 

o Scheduler only triggers the changes  

o Scheduler cannot track if a task is done or completed. 

This means there are a small number of limitations of the product: 

 No partial application of changes 

 Pending changes accumulate  

 No automatic undoing  of changes 

 Scheduler has granularity of 1 minute 

 No control of changes happening other service profiles at the same time  



 
 

 

6-13   UCS Balboa Features  © Cisco Systems, Inc. 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 13

Explain How to Configure a Schedule 
Change in UCS - Cont.

 

Explain How to Configure a Schedule Change in UCS - Cont. 

To set a scheduled task first you need to go to maintenance policies and create a new 

maintenance policy. You will be asked the following: 

 Name - Name of the policy 

 Description - What the Policy is for 

 Type : 

o User-ack  

o Immediate 

o Timer Automatic 

 If you select timer you can choose a timer policy or make a new one. 

Once you set the schedule you will be able to monitor and watch when the time comes 

and verify that it has initiated the change process. 

 

 

 

  



 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Service Profile Enhancements 6-14 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 14

Explain How to Configure a Schedule 
Change in UCS - Cont.

 

Explain How to Configure a Schedule Change in UCS - Cont. 

If you happen to choose the timer you can click on the "Schedule" hyper link to view 

existing schedules. Also from here you can modify existing schedules as well as create 

new ones. Once done you simply apply the policy to your SP. 

 



 
Lesson 7 

UCS 1.4.1 Management 

and Monitoring 

Enhancements 

Overview 

In this lesson you will learn what Management and Monitoring Enhancements were made 

to UCS in the latest release, 1.4.1. 

Objectives 

The specific objectives of this lesson are to enable you to describe the following: 

 Describe new SNMP functionality 

 Summarize New Licensing Enhancements 

 Explain New UCSM Authentication Capabilities 
  



 
 

 

7-1   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—2

Describe New SNMP 
Functionality

Upon completion of this section you will:

• Describe New Functionality of SNMP in UCSM
• Explain how SNMP works on UCSM
• Describe how to configure UCSM for SNMP monitoring

 

Describe New SNMP Functionality 

In this section you will discuss the following content: 

 Describe New Functionality of SNMP in UCSM 

 Explain how SNMP works on UCSM 

 Describe how to configure UCSM for SNMP monitoring 

 Describe how to configure UCSM for SNMP monitoring - Cont. 

 

  



 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Management and Monitoring Enhancements 7-2 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 3

Describe New Functionality of SNMP in 
UCSM

Release 1.3 provided SNMP trap support earlier

Access to full information model of UCS:

– Access same information as XML API

• Fabric interconnects & Fabric extenders

• Chassis

• Blades (B-Series)

• Rack servers (C-Series)

 58 new MIBs to be posted on Cisco.com

 Any additions/changes to model, automatically results in 
regeneration of MIBs

 SNMP access is read-only, no SNMP SET support planned

 Easy integration to 3rd party mgmt tools

 SNMP based corelation for trap information

Customer benefits

Feature details

UCS
Manager

Blade Servers

Chassis

Fabric 
Interconnects

Fabric 
Extender

Rack Servers

S
N

M
P

 T
ra

ps
 a

nd
 G

E
Ts

 

Describe New Functionality of SNMP in UCSM 

UCSM has supported SNMP from the beginning as it is the most used monitoring 

protocol. The challenge has been in the fact that what was monitorable by SNMP was a 

smaller subset of the whole. More simply the MIBs created for the UCS did not go any 

further than the fabric interconnects. This makes basic monitoring with SNMP impossible 

for blades. While there are many ways to monitor the health of the UCS other than 

SNMP, since it is so widely used it makes sense to support it in UCSM all the way down 

to the components on a blade. The following capabilities are now possible with SNMP 

and UCS: 

 Access same information now for full XML API 

o Chassis 

o Servers 

o Rack Servers 

 58 new MIBs on cisco.com 

 Any changes to the model automatically regenerates MIBs 

 GET access only not SET 
  



 
 

 

7-3   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 4

Explain how SNMP works on UCSM

Thresholds exceed, 
trigger is activated , 
fault | event noticed 
by UCSM

If defined UCSM 
send trap | inform 
to designated 
monitoring

Monitoring can 
GET information 
from UCSM

 

Explain Where to download MIBs for UCS 1.4.1 

Currently all the MIBs for UCSM 1.4.1 are located on a cisco FTP server in the following 

location: 

ftp://ftp.cisco.com/pub/mibs/supportlists/ucs/ucs-manager-supportlist.html 

There are a long list of MIBs and you can down load what you want to monitor based on 

ther description. Above is a sample of the FTP web page for downloading. 

Once down loaded you then need to import them into your SNMP Monitoring system. By 

doing this you will allow the SNMP monitoring system to use "GETs" to monitor the 

specific MIBs you imported. 

Additionally you can setup a SNMP Manager to receive traps generated by UCSM. This 

requires SNMP Manager configuration on UCS. 

 

  




 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Management and Monitoring Enhancements 7-4 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 5

Describe How to Configure UCSM for 
SNMP Monitoring

 

Describe How to Configure UCSM for SNMP Monitoring 

In the new UCSM you can setup the UCS to send trap notifications to a specific SNMP 

monitoring server. Assuming that the server exists and you have loaded the MIBs for the 

components you wish to monitor, you need to on the UCSM setup the details of where it 

is to send the trap. 

In order to send the trap you need to provide the following into the UCS form on the 

comunication services function of the Admin tab. 

By default SNMP is disabled. When you enable it the form will expand and you will be 

asked to supply: 

 Community / User name - Typically this is simply "private or public" for the 
login. The default is "public". This is the community or user name used when 

sending traps form UCSM. 

 System contact - who is responsible for the SNMP server 

 System Location - where this system is located 

Following these is the SNMP trap table 

  



 
 

 

7-5   UCS Balboa Features  © Cisco Systems, Inc. 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 6

Describe How to Configure UCSM for SNMP 
Monitoring- Cont.

 

Describe How to Configure UCSM for SNMP Monitoring- Cont. 

Following the enabling of SNMP you now will need to setup the traps in order for them 

to be sent to the SNMP server. To do this you simply click on the "+" sysmbol in the 

SNMP trap table (the one on the right). This will open a new window and you will need 

to provide the following: 

 Name of the server - The IP address of the host 

 Community and user name - Name included with sent traps 

 Port - Port used  to communicate specifically with the server 

 Version - version 1, 2, or 3 

 V3 Privileges - only used if you are using version 3 for enhanced security. You 
also have to set the priviledges associated with the trap: 

o Auth - Authentication but no encryption 

o Priv - Authentication and encryption 

o Noauth - No authentic and encryption. 



 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Management and Monitoring Enhancements 7-6 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 7

Describe How to Configure UCSM for SNMP 
Monitoring - SNMP Users

 

Describe How to Configure UCSM for SNMP Monitoring - SNMP Users 

This is where you can create authenticated and encrypted users if you are using version 3 

of SNMP. Typically in version 1 and 2 you use a community string making it either 

public (for gets) or private (for sets). 

UCSM only responds to gets and in version 3 of SNMP will require the user name and 

password for both global (public) and private. They can be the same, and remember we 

use this only for gets. 

 

 

  



 
 

 

7-7   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—8

Summarize New 
Licensing 
Enhancements

Upon completion of this section you will:

• Explain the New Licensing Functionality in UCSM
• Describe How to View and Manage Licensing on the UCS 

 

Summarize New Licensing Enhancements 

You will examine the following content: 

 Explain the New Licensing Functionality in UCSM 

 Describe How to View and Manage Licensing on the UCS  
  



 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Management and Monitoring Enhancements 7-8 

 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 9

Explain the New Licensing Functionality in 
UCSM

 

Explain the New Licensing Functionality in UCSM 

UCSM has always had licensing. The challenge was that it was not managed in UCSM. 

This could have made it frustrating for customers who wanted: 

 View their licensing information 

 View their licensing consumption 

 Move licensing around (device maintenance) 

In the release of 1.4.1, the developers have included a new licensing management feature 

to help resolve all these potential issues. The new licensing management system provides 

the following functionality: 

 UCSM Integration  

o License usage and information viewable through UCSM GUI 

o Licensees can easily be "Checked-in" | "Checked-out" 

 Licensed by Port Count  



 
 

 

7-9   UCS Balboa Features  © Cisco Systems, Inc. 

 

o No need to reassign licenses to specific ports, now you can use any of the 
fixed ports on the 6120 you want up to the total number you have licensed 

o Only fixed ports are licensed, expansion ports come with their licensing 

o First 8|16 ports are freely licensed for the 6120 | 6140 

o License required for port regardless of if you use it as 1Gb or 10Gb 

 Grace Period Functionality 

o Ports that get activated when there are no licenses free still activate and 
are usable for a short period of time 

o This grace period is 120 days and  its status is visible in UCSM 

o While port is used during grace period warnings will be generated as a 
"WARNING" level alert 

o Upon Expiration UCSM generates a "CRITICAL" alert but does not shut 
down the port. 

 

 

 

  



 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Management and Monitoring Enhancements 7-10 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 10

Describe How to View and Manage Licensing 
on the UCS

 

Describe How to View and Manage Licensing on the UCS 

Licensing can be found in the UCSM from the "Admin" tab on the nav pane. To find it 

quickly use the filter drop down box to sort the nav pane for "License Management". 

Once selected your content pane should now display the License Management 

configuration in the content pane. 

Note that Both fabric a and fabric b are represented. Since they both have ports for 

networking they both have to have licenses. 

From this screen you can do the following tasks: 

 View Licenses Installed - This shows all licensing you have installed as well as 
active 

 View license consumption - In the lower left side of the content pane is a small 
box labeled "Properties" this displays: 

o License Name 

o Scope - A or B 

o Absolute Quantity - Number of potentially licensable ports 

o Used - Number of used port licenses 



 
 

 

7-11   UCS Balboa Features  © Cisco Systems, Inc. 

 

o Default quantity - Number of free ports with 6120 | 6140 

o Operational State - Am I good? 

o Grace Period Days - If you have non licensed and active ports 

o Peer Status - Do the cluster pair have same licensing 

 Down Load License files  - for new licenses to be installed. 

 Down Load Tasks - Download Objects that can be reused 

 Faults - Fault monitoring of the license usage or lack thereof 
 

  



 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Management and Monitoring Enhancements 7-12 

 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 11

Explain How to Download Licensing

 

Explain How to Download and Install Licensing 

Licensing can be downloaded from Cisco. It is required that you have the following: 

 Host ID or serial number of the FI 

 Claim certificate or other proof of purchase 

On the claim certificate is a URL for downloading your licensing provided you have the 

above information. 

Once you have downloaded it from cisco you now have to get it onto the fabric 

interconnect. To do this you need to create a download task. A download task can be to 

download from your current system through a browse mechanism, or if you placed the 

license on a remote server, you can do a remote download that will require: 

 Protocol - SCP, FTP, TFTP, SFTP 

 Host address - IP address or domain name 

 File Name  

 Remote path to file 

 User name - If it is required 



 
 

 

7-13   UCS Balboa Features  © Cisco Systems, Inc. 

 

 Password - If it is required 

Downloaded licenses are stored on the fabric interconnects, and listed in the "Down 

Loaded Licenses " tab of the content pane. To install, simply select the license you wish 

to use and click on the "Install License" button in the content pane. 

  



 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Management and Monitoring Enhancements 7-14 

© 2008 Nuova, Inc. All rights reserved. ICNX5 v1.0—12

Explain New UCSM 
Authentication 
Capabilities

Upon completion of this section you will:

• Explain the New Licensing Functionality in UCSM
• Describe How to View and Manage Licensing on the UCS 

 

Explain New UCSM Authentication Capabilities 

In this lesson students will examine the new authentication capabilities of UCSM. Upon 

competition students will: 

 Describe previous authentication control in UCSM 

 Describe new UCSM authentication Capabilities 
  



 
 

 

7-15   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 13

UCSM

Describe Previous Authentication Control 
in UCSM

User can 
authenticate 
locally(By 
UCSM)  or via 
Authentication 
Server

LDAP | TACAS | Radius

 

Describe Previous Authentication Control in UCSM 

In the previous releases of UCSM (before 1.4.1), authentication of users logging into 

UCSM was either handled locally (by UCSM) -OR- remotely via a server like RADUIS 

or LDAP. The problem this presented to the customer is which of these methods should 

they use?: 

 If they choose to locally authenticate, this means they login to UCSM and are 
authenticated by UCSM. If they have multiple instances of UCSM (i.e . multiple 

UCS pods ), then the customer has to ensure that all users that must administer 

more than one instance would have to have a distinct login name configured on 

each UCSM individually. While this works it is a bit manual and not scalable at 

all. 

 If they choose to go remotely then they have to make sure each UCS pod as the 
correct authentication server configured. This is fine if all UCS pods use the same 

then it is easy to do, what is you have different authentication server types for 

different groups in your enterprise? 

These are a couple of challenges faced in the previous versions of UCSM. Typically a 

customer will stick with local authentication in terms of small installs of UCS (1-5 

systems) as it is not terrible to manage this. An example would be a development group 

with a lab in a DMZ, for example our training lab.  

As these systems grow in numbers and become part of the production infrastructure, they 

will have to be able to assimilate into the production networks authentication 



 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Management and Monitoring Enhancements 7-16 

infrastructure.  This means linking to corporate authentication servers. Despite this there 

will always be a small need for simple local authentication at times, customers honestly 

need more flexibility than we were providing. 

 

  



 
 

 

7-17   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 14

Explain Previous (Pre 1.4.1) Versions 
Authentication Flow 

UCSM

LDAP 1

LDAP 2

LDAP 3

Flow is to go from 
the first LDAP to 
last to find user 
finally resorting to 
locally

 

Explain Previous (Pre 1.4.1) Versions Authentication Flow  

As stated previously you can enable one authentication type at a time. This means you 

can enable local (done by UCSM) or remote (done by an authentication server). For those 

readers that are familiar with UCSM you may choose to argue this point as you were able 

to setup multiple authentication servers. While this may seem to be the case it did not 

work as one might think. In the case of multiple remote authentication servers, UCSM 

will authenticate a login first to the first server configured as an authentication server, not 

finding the user there; UCSM will go to the next authentication server in order until it 

finds the user on one of them. If it is unable to find the user on any of the authentication 

servers, then UCSM will check locally. 

There are a number of limitations as you can see in terms of how the software works. 

This however is a workable model where in you are able to have a string of 

authentication servers to check against a user's credentials, and can fall back to local if 

the main servers are down. This also means duplicate effort because the user would have 

to locally have the same user name and password as the authentication server you 

intended them to log into.  



 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Management and Monitoring Enhancements 7-18 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 15

Describe new UCSM Authentication 
Capabilities - Overview

UCSM 

LDAP 1

Radius 1

TACAS 1

Authentication is 
specified during 
user login and can 
be to any server 
type

User Specified

 

Describe new UCSM Authentication Capabilities - Overview 

The big change to the overall model of authentication is a new true multi-authentication 

system. In this new system UCSM can simultaneously link to and authenticate against 

multiple sources including locally. Users logging in now will notice in the login window 

a new drop down selector box. From this box you will select the domain you wish to 

authenticate against.   

  



 
 

 

7-19   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 16

Describe UCSM Authentication Realms 
and Servers

LDAP

Radius

TACAS

emp_auth1.myco emp_auth2.myco cont_auth1.myco cont_auth2.myco 

acct _auth2.myco acct _auth1.myco market _auth1.myco market _auth2.myco 

net _auth1.myco net _auth2.myco server _auth1.myco server _auth2.myco 

R
E
A
L
M
S

 

Describe UCSM Authentication Realms and Servers 

In the new authentication model we break down into 2 components, Realms and Servers.  

Realms are designed to specify how a user will be authenticated. In other words if you 

login you have 2 choices, remote authentication or local, and depending on which you 

choose, you will need to specify the type of authentication server you intend  to login to. 

Below are the scope of realms in the new UCSM 1.4.1 

 Local or None - This is the domain maintained by UCSM. Users are created in 
UCSM using UCSM roles and locales. 

 Radius | TACAS | LDAP - These three realms represent 3 distinct types of 
authentication servers.  Think of these realms as protocol realms for a specific 

type of authentication server. 

When we add authentication servers to UCSM we have to specify what protocol realm 

they will use. Within UCSM when a authentication server is linked to it, that server will 

appear in a global realm listing under its type (LDAP, Radius, or TACAS).  For example 

if you have 4 LDAP servers you use for authenticating, all 4 would appear in the global 

LDAP list of known LDAP servers. 

UCSM only knows the servers you configure to authenticate against. UCSM does not go 

out and discover these servers. 

  



 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Management and Monitoring Enhancements 7-20 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 17

Explain Authentication Server Groups

LDAP

Radius

TACAS

emp_auth1.myco emp_auth2.myco cont_auth1.myco cont_auth2.myco 

acct _auth2.myco acct _auth1.myco market _auth1.myco market _auth2.myco 

net _auth1.myco net _auth2.myco server _auth1.myco server _auth2.myco 

R
E
A
L
M
S

 

Explain Authentication Server Groups 

Within a realm of authentication servers (LDAP as an example), UCSM will allow you to 

create distinct groups of server. For example you have 4 LDAP servers configured to use 

for authentication. Two of them are used for your server teams, and 2 are for networking 

and SAN teams. In this scenario it is not necessary to check server personnel 

authentication against the network |SAN authentication servers. By putting them into 

server groups, we can specify which group of LDAP servers we need to authenticate 

against. 

  



 
 

 

7-21   UCS Balboa Features  © Cisco Systems, Inc. 

 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 18

Summarize Native Authentication

 

Summarize Native Authentication 

When configuring UCSM for authentication you will need to define the following: 

 Authentication domains - Domains for the various servers you wish to use with 
UCSM. These domains are defined by the specific servers you enter into UCSM. 

When configuring UCSM to use a specific server type (LDAP | Radius | 

TACAS+), you will have to put into it all the specific requirements (hostname, 

variables, etc.) so that UCSM will know what type of server it is and how to 

connect to it for authentication. For specific requirements always see 

configuration guides and release notes. 

 Native Authentication - This is the native login method used when logging into 
UCSM. There are 2 settings you can create, Default and Console: 

o Default - is the default authentication to use when a user logs in using 
Telnet | SSH | UCSM GUI |XML. You can simply specify LDAP in which 

case it will authenticate against all LDAP in the LDAP realm or you can 

specify a server group to go to a specific server(s) 

o Console - is for when users log in through the Console. Like default you 
can specify a realm and a server group within the realm. 

  



 
 

 

© Cisco Systems, Inc.  UCS 1.4.1 Management and Monitoring Enhancements 7-22 

© 2008 Cisco Systems Inc. All rights reserved. Course Title —Module Name 19

Describe User Login with UCSM

 

Describe User Login with UCSM 

When a user logs into the UCSM they will need their name and password to be qualified 

by the authenticating server. This is handled by a new drop down list on the UCSM log in 

screen, however it will also be required for console login. If a domain name is not 

specified, then default authentication is used and what you have specified there is where 

they will have to be validated against. This applies for the console default as well. 

 

 


